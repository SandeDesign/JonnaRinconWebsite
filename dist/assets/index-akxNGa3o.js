var g1=Object.defineProperty;var y1=(t,e,n)=>e in t?g1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mn=(t,e,n)=>y1(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Dx={exports:{}},su={},Ox={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=Symbol.for("react.element"),x1=Symbol.for("react.portal"),v1=Symbol.for("react.fragment"),w1=Symbol.for("react.strict_mode"),_1=Symbol.for("react.profiler"),b1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),N1=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),S1=Symbol.for("react.memo"),I1=Symbol.for("react.lazy"),Ag=Symbol.iterator;function k1(t){return t===null||typeof t!="object"?null:(t=Ag&&t[Ag]||t["@@iterator"],typeof t=="function"?t:null)}var Lx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vx=Object.assign,Mx={};function zi(t,e,n){this.props=t,this.context=e,this.refs=Mx,this.updater=n||Lx}zi.prototype.isReactComponent={};zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fx(){}Fx.prototype=zi.prototype;function Sf(t,e,n){this.props=t,this.context=e,this.refs=Mx,this.updater=n||Lx}var If=Sf.prototype=new Fx;If.constructor=Sf;Vx(If,zi.prototype);If.isPureReactComponent=!0;var jg=Array.isArray,Ux=Object.prototype.hasOwnProperty,kf={current:null},Bx={key:!0,ref:!0,__self:!0,__source:!0};function zx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ux.call(e,r)&&!Bx.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var l=Array(u),d=0;d<u;d++)l[d]=arguments[d+2];s.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Ra,type:t,key:i,ref:o,props:s,_owner:kf.current}}function C1(t,e){return{$$typeof:Ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ra}function A1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rg=/\/+/g;function xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A1(""+t.key):e.toString(36)}function Fl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ra:case x1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xd(o,0):r,jg(s)?(n="",t!=null&&(n=t.replace(Rg,"$&/")+"/"),Fl(s,e,n,"",function(d){return d})):s!=null&&(Cf(s)&&(s=C1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",jg(t))for(var u=0;u<t.length;u++){i=t[u];var l=r+xd(i,u);o+=Fl(i,e,n,l,s)}else if(l=k1(t),typeof l=="function")for(t=l.call(t),u=0;!(i=t.next()).done;)i=i.value,l=r+xd(i,u++),o+=Fl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fl(t,e,n){if(t==null)return t;var r=[],s=0;return Fl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function j1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},Ul={transition:null},R1={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Ul,ReactCurrentOwner:kf};function $x(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:fl,forEach:function(t,e,n){fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fl(t,function(){e++}),e},toArray:function(t){return fl(t,function(e){return e})||[]},only:function(t){if(!Cf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=zi;re.Fragment=v1;re.Profiler=_1;re.PureComponent=Sf;re.StrictMode=w1;re.Suspense=T1;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R1;re.act=$x;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=kf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)Ux.call(e,l)&&!Bx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&u!==void 0?u[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){u=Array(l);for(var d=0;d<l;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Ra,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b1,_context:t},t.Consumer=t};re.createElement=zx;re.createFactory=function(t){var e=zx.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:N1,render:t}};re.isValidElement=Cf;re.lazy=function(t){return{$$typeof:I1,_payload:{_status:-1,_result:t},_init:j1}};re.memo=function(t,e){return{$$typeof:S1,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Ul.transition;Ul.transition={};try{t()}finally{Ul.transition=e}};re.unstable_act=$x;re.useCallback=function(t,e){return yt.current.useCallback(t,e)};re.useContext=function(t){return yt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};re.useEffect=function(t,e){return yt.current.useEffect(t,e)};re.useId=function(){return yt.current.useId()};re.useImperativeHandle=function(t,e,n){return yt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return yt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return yt.current.useReducer(t,e,n)};re.useRef=function(t){return yt.current.useRef(t)};re.useState=function(t){return yt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return yt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return yt.current.useTransition()};re.version="18.3.1";Ox.exports=re;var S=Ox.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=S,D1=Symbol.for("react.element"),O1=Symbol.for("react.fragment"),L1=Object.prototype.hasOwnProperty,V1=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M1={key:!0,ref:!0,__self:!0,__source:!0};function qx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)L1.call(e,r)&&!M1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:D1,type:t,key:i,ref:o,props:s,_owner:V1.current}}su.Fragment=O1;su.jsx=qx;su.jsxs=qx;Dx.exports=su;var a=Dx.exports,Hx={exports:{}},Mt={},Wx={exports:{}},Gx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Y){var ee=$.length;$.push(Y);e:for(;0<ee;){var _e=ee-1>>>1,Pe=$[_e];if(0<s(Pe,Y))$[_e]=Y,$[ee]=Pe,ee=_e;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],ee=$.pop();if(ee!==Y){$[0]=ee;e:for(var _e=0,Pe=$.length,as=Pe>>>1;_e<as;){var Bt=2*(_e+1)-1,ls=$[Bt],en=Bt+1,cr=$[en];if(0>s(ls,ee))en<Pe&&0>s(cr,ls)?($[_e]=cr,$[en]=ee,_e=en):($[_e]=ls,$[Bt]=ee,_e=Bt);else if(en<Pe&&0>s(cr,ee))$[_e]=cr,$[en]=ee,_e=en;else break e}}return Y}function s($,Y){var ee=$.sortIndex-Y.sortIndex;return ee!==0?ee:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var l=[],d=[],h=1,p=null,m=3,x=!1,N=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=$)r(d),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(d)}}function D($){if(C=!1,y($),!N)if(n(l)!==null)N=!0,Zi(M);else{var Y=n(d);Y!==null&&eo(D,Y.startTime-$)}}function M($,Y){N=!1,C&&(C=!1,w(b),b=-1),x=!0;var ee=m;try{for(y(Y),p=n(l);p!==null&&(!(p.expirationTime>Y)||$&&!A());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,m=p.priorityLevel;var Pe=_e(p.expirationTime<=Y);Y=t.unstable_now(),typeof Pe=="function"?p.callback=Pe:p===n(l)&&r(l),y(Y)}else r(l);p=n(l)}if(p!==null)var as=!0;else{var Bt=n(d);Bt!==null&&eo(D,Bt.startTime-Y),as=!1}return as}finally{p=null,m=ee,x=!1}}var F=!1,E=null,b=-1,T=5,I=-1;function A(){return!(t.unstable_now()-I<T)}function R(){if(E!==null){var $=t.unstable_now();I=$;var Y=!0;try{Y=E(!0,$)}finally{Y?k():(F=!1,E=null)}}else F=!1}var k;if(typeof _=="function")k=function(){_(R)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,Vn=Je.port2;Je.port1.onmessage=R,k=function(){Vn.postMessage(null)}}else k=function(){j(R,0)};function Zi($){E=$,F||(F=!0,k())}function eo($,Y){b=j(function(){$(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){N||x||(N=!0,Zi(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var ee=m;m=Y;try{return $()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=m;m=$;try{return Y()}finally{m=ee}},t.unstable_scheduleCallback=function($,Y,ee){var _e=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?_e+ee:_e):ee=_e,$){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ee+Pe,$={id:h++,callback:Y,priorityLevel:$,startTime:ee,expirationTime:Pe,sortIndex:-1},ee>_e?($.sortIndex=ee,e(d,$),n(l)===null&&$===n(d)&&(C?(w(b),b=-1):C=!0,eo(D,ee-_e))):($.sortIndex=Pe,e(l,$),N||x||(N=!0,Zi(M))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var Y=m;return function(){var ee=m;m=Y;try{return $.apply(this,arguments)}finally{m=ee}}}})(Gx);Wx.exports=Gx;var F1=Wx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=S,Vt=F1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kx=new Set,Zo={};function Fs(t,e){Si(t,e),Si(t+"Capture",e)}function Si(t,e){for(Zo[t]=e,t=0;t<e.length;t++)Kx.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=Object.prototype.hasOwnProperty,B1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pg={},Dg={};function z1(t){return oh.call(Dg,t)?!0:oh.call(Pg,t)?!1:B1.test(t)?Dg[t]=!0:(Pg[t]=!0,!1)}function $1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q1(t,e,n,r){if(e===null||typeof e>"u"||$1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Af=/[\-:]([a-z])/g;function jf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Af,jf);nt[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Af,jf);nt[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Af,jf);nt[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rf(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q1(e,n,s,r)&&(n=null),r||s===null?z1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),Pf=Symbol.for("react.strict_mode"),ah=Symbol.for("react.profiler"),Qx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),Df=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),ch=Symbol.for("react.suspense_list"),Of=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),Jx=Symbol.for("react.offscreen"),Og=Symbol.iterator;function xo(t){return t===null||typeof t!="object"?null:(t=Og&&t[Og]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,vd;function Io(t){if(vd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vd=e&&e[1]||""}return`
`+vd+t}var wd=!1;function _d(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=u);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Io(t):""}function H1(t){switch(t.tag){case 5:return Io(t.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return t=_d(t.type,!1),t;case 11:return t=_d(t.type.render,!1),t;case 1:return t=_d(t.type,!0),t;default:return""}}function uh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ti:return"Portal";case ah:return"Profiler";case Pf:return"StrictMode";case lh:return"Suspense";case ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yx:return(t.displayName||"Context")+".Consumer";case Qx:return(t._context.displayName||"Context")+".Provider";case Df:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Of:return e=t.displayName||null,e!==null?e:uh(t.type)||"Memo";case vr:e=t._payload,t=t._init;try{return uh(t(e))}catch{}}return null}function W1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uh(e);case 8:return e===Pf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G1(t){var e=Xx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=G1(t))}function Zx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Xx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dh(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ev(t,e){e=e.checked,e!=null&&Rf(t,"checked",e,!1)}function hh(t,e){ev(t,e);var n=$r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fh(t,e.type,n):e.hasOwnProperty("defaultValue")&&fh(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fh(t,e,n){(e!=="number"||cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ko=Array.isArray;function mi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ko(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function tv(t,e){var n=$r(e.value),r=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,rv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K1=["Webkit","ms","Moz","O"];Object.keys(Mo).forEach(function(t){K1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mo[e]=Mo[t]})});function sv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mo.hasOwnProperty(t)&&Mo[t]?(""+e).trim():e+"px"}function iv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Q1=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gh(t,e){if(e){if(Q1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function yh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=null;function Lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vh=null,gi=null,yi=null;function Ug(t){if(t=Oa(t)){if(typeof vh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=cu(e),vh(t.stateNode,t.type,e))}}function ov(t){gi?yi?yi.push(t):yi=[t]:gi=t}function av(){if(gi){var t=gi,e=yi;if(yi=gi=null,Ug(t),e)for(t=0;t<e.length;t++)Ug(e[t])}}function lv(t,e){return t(e)}function cv(){}var bd=!1;function uv(t,e,n){if(bd)return t(e,n);bd=!0;try{return lv(t,e,n)}finally{bd=!1,(gi!==null||yi!==null)&&(cv(),av())}}function ta(t,e){var n=t.stateNode;if(n===null)return null;var r=cu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var wh=!1;if(Yn)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){wh=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{wh=!1}function Y1(t,e,n,r,s,i,o,u,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Fo=!1,uc=null,dc=!1,_h=null,J1={onError:function(t){Fo=!0,uc=t}};function X1(t,e,n,r,s,i,o,u,l){Fo=!1,uc=null,Y1.apply(J1,arguments)}function Z1(t,e,n,r,s,i,o,u,l){if(X1.apply(this,arguments),Fo){if(Fo){var d=uc;Fo=!1,uc=null}else throw Error(U(198));dc||(dc=!0,_h=d)}}function Us(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bg(t){if(Us(t)!==t)throw Error(U(188))}function eN(t){var e=t.alternate;if(!e){if(e=Us(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bg(s),t;if(i===r)return Bg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function hv(t){return t=eN(t),t!==null?fv(t):null}function fv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fv(t);if(e!==null)return e;t=t.sibling}return null}var pv=Vt.unstable_scheduleCallback,zg=Vt.unstable_cancelCallback,tN=Vt.unstable_shouldYield,nN=Vt.unstable_requestPaint,Le=Vt.unstable_now,rN=Vt.unstable_getCurrentPriorityLevel,Vf=Vt.unstable_ImmediatePriority,mv=Vt.unstable_UserBlockingPriority,hc=Vt.unstable_NormalPriority,sN=Vt.unstable_LowPriority,gv=Vt.unstable_IdlePriority,iu=null,bn=null;function iN(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(iu,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:lN,oN=Math.log,aN=Math.LN2;function lN(t){return t>>>=0,t===0?32:31-(oN(t)/aN|0)|0}var yl=64,xl=4194304;function Co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Co(u):(i&=o,i!==0&&(r=Co(i)))}else o=n&~s,o!==0?r=Co(o):i!==0&&(r=Co(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),s=1<<n,r|=t[n],e&=~s;return r}function cN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-cn(i),u=1<<o,l=s[o];l===-1?(!(u&n)||u&r)&&(s[o]=cN(u,e)):l<=e&&(t.expiredLanes|=u),i&=~u}}function bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yv(){var t=yl;return yl<<=1,!(yl&4194240)&&(yl=64),t}function Ed(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function dN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Mf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function xv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vv,Ff,wv,_v,bv,Eh=!1,vl=[],jr=null,Rr=null,Pr=null,na=new Map,ra=new Map,_r=[],hN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $g(t,e){switch(t){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(e.pointerId)}}function wo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Oa(e),e!==null&&Ff(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fN(t,e,n,r,s){switch(e){case"focusin":return jr=wo(jr,t,e,n,r,s),!0;case"dragenter":return Rr=wo(Rr,t,e,n,r,s),!0;case"mouseover":return Pr=wo(Pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return na.set(i,wo(na.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ra.set(i,wo(ra.get(i)||null,t,e,n,r,s)),!0}return!1}function Ev(t){var e=ys(t.target);if(e!==null){var n=Us(e);if(n!==null){if(e=n.tag,e===13){if(e=dv(n),e!==null){t.blockedOn=e,bv(t.priority,function(){wv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xh=r,n.target.dispatchEvent(r),xh=null}else return e=Oa(n),e!==null&&Ff(e),t.blockedOn=n,!1;e.shift()}return!0}function qg(t,e,n){Bl(t)&&n.delete(e)}function pN(){Eh=!1,jr!==null&&Bl(jr)&&(jr=null),Rr!==null&&Bl(Rr)&&(Rr=null),Pr!==null&&Bl(Pr)&&(Pr=null),na.forEach(qg),ra.forEach(qg)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Eh||(Eh=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,pN)))}function sa(t){function e(s){return _o(s,t)}if(0<vl.length){_o(vl[0],t);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jr!==null&&_o(jr,t),Rr!==null&&_o(Rr,t),Pr!==null&&_o(Pr,t),na.forEach(e),ra.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)Ev(n),n.blockedOn===null&&_r.shift()}var xi=ar.ReactCurrentBatchConfig,pc=!0;function mN(t,e,n,r){var s=fe,i=xi.transition;xi.transition=null;try{fe=1,Uf(t,e,n,r)}finally{fe=s,xi.transition=i}}function gN(t,e,n,r){var s=fe,i=xi.transition;xi.transition=null;try{fe=4,Uf(t,e,n,r)}finally{fe=s,xi.transition=i}}function Uf(t,e,n,r){if(pc){var s=Nh(t,e,n,r);if(s===null)Pd(t,e,r,mc,n),$g(t,r);else if(fN(s,t,e,n,r))r.stopPropagation();else if($g(t,r),e&4&&-1<hN.indexOf(t)){for(;s!==null;){var i=Oa(s);if(i!==null&&vv(i),i=Nh(t,e,n,r),i===null&&Pd(t,e,r,mc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var mc=null;function Nh(t,e,n,r){if(mc=null,t=Lf(r),t=ys(t),t!==null)if(e=Us(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mc=t,null}function Nv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rN()){case Vf:return 1;case mv:return 4;case hc:case sN:return 16;case gv:return 536870912;default:return 16}default:return 16}}var Ir=null,Bf=null,zl=null;function Tv(){if(zl)return zl;var t,e=Bf,n=e.length,r,s="value"in Ir?Ir.value:Ir.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return zl=s.slice(t,1<r?1-r:void 0)}function $l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function Hg(){return!1}function Ft(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wl:Hg,this.isPropagationStopped=Hg,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zf=Ft($i),Da=Se({},$i,{view:0,detail:0}),yN=Ft(Da),Nd,Td,bo,ou=Se({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$f,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bo&&(bo&&t.type==="mousemove"?(Nd=t.screenX-bo.screenX,Td=t.screenY-bo.screenY):Td=Nd=0,bo=t),Nd)},movementY:function(t){return"movementY"in t?t.movementY:Td}}),Wg=Ft(ou),xN=Se({},ou,{dataTransfer:0}),vN=Ft(xN),wN=Se({},Da,{relatedTarget:0}),Sd=Ft(wN),_N=Se({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),bN=Ft(_N),EN=Se({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NN=Ft(EN),TN=Se({},$i,{data:0}),Gg=Ft(TN),SN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kN[t])?!!e[t]:!1}function $f(){return CN}var AN=Se({},Da,{key:function(t){if(t.key){var e=SN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$f,charCode:function(t){return t.type==="keypress"?$l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jN=Ft(AN),RN=Se({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kg=Ft(RN),PN=Se({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$f}),DN=Ft(PN),ON=Se({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),LN=Ft(ON),VN=Se({},ou,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MN=Ft(VN),FN=[9,13,27,32],qf=Yn&&"CompositionEvent"in window,Uo=null;Yn&&"documentMode"in document&&(Uo=document.documentMode);var UN=Yn&&"TextEvent"in window&&!Uo,Sv=Yn&&(!qf||Uo&&8<Uo&&11>=Uo),Qg=" ",Yg=!1;function Iv(t,e){switch(t){case"keyup":return FN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function BN(t,e){switch(t){case"compositionend":return kv(e);case"keypress":return e.which!==32?null:(Yg=!0,Qg);case"textInput":return t=e.data,t===Qg&&Yg?null:t;default:return null}}function zN(t,e){if(ri)return t==="compositionend"||!qf&&Iv(t,e)?(t=Tv(),zl=Bf=Ir=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sv&&e.locale!=="ko"?null:e.data;default:return null}}var $N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$N[t.type]:e==="textarea"}function Cv(t,e,n,r){ov(r),e=gc(e,"onChange"),0<e.length&&(n=new zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bo=null,ia=null;function qN(t){Uv(t,0)}function au(t){var e=oi(t);if(Zx(e))return t}function HN(t,e){if(t==="change")return e}var Av=!1;if(Yn){var Id;if(Yn){var kd="oninput"in document;if(!kd){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),kd=typeof Xg.oninput=="function"}Id=kd}else Id=!1;Av=Id&&(!document.documentMode||9<document.documentMode)}function Zg(){Bo&&(Bo.detachEvent("onpropertychange",jv),ia=Bo=null)}function jv(t){if(t.propertyName==="value"&&au(ia)){var e=[];Cv(e,ia,t,Lf(t)),uv(qN,e)}}function WN(t,e,n){t==="focusin"?(Zg(),Bo=e,ia=n,Bo.attachEvent("onpropertychange",jv)):t==="focusout"&&Zg()}function GN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return au(ia)}function KN(t,e){if(t==="click")return au(e)}function QN(t,e){if(t==="input"||t==="change")return au(e)}function YN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:YN;function oa(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!oh.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ty(t,e){var n=ey(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ey(n)}}function Rv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pv(){for(var t=window,e=cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cc(t.document)}return e}function Hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JN(t){var e=Pv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Rv(n.ownerDocument.documentElement,n)){if(r!==null&&Hf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ty(n,i);var o=ty(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XN=Yn&&"documentMode"in document&&11>=document.documentMode,si=null,Th=null,zo=null,Sh=!1;function ny(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sh||si==null||si!==cc(r)||(r=si,"selectionStart"in r&&Hf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zo&&oa(zo,r)||(zo=r,r=gc(Th,"onSelect"),0<r.length&&(e=new zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=si)))}function _l(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ii={animationend:_l("Animation","AnimationEnd"),animationiteration:_l("Animation","AnimationIteration"),animationstart:_l("Animation","AnimationStart"),transitionend:_l("Transition","TransitionEnd")},Cd={},Dv={};Yn&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function lu(t){if(Cd[t])return Cd[t];if(!ii[t])return t;var e=ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dv)return Cd[t]=e[n];return t}var Ov=lu("animationend"),Lv=lu("animationiteration"),Vv=lu("animationstart"),Mv=lu("transitionend"),Fv=new Map,ry="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){Fv.set(t,e),Fs(e,[t])}for(var Ad=0;Ad<ry.length;Ad++){var jd=ry[Ad],ZN=jd.toLowerCase(),eT=jd[0].toUpperCase()+jd.slice(1);es(ZN,"on"+eT)}es(Ov,"onAnimationEnd");es(Lv,"onAnimationIteration");es(Vv,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(Mv,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function sy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Z1(r,e,void 0,t),t.currentTarget=null}function Uv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],l=u.instance,d=u.currentTarget;if(u=u.listener,l!==i&&s.isPropagationStopped())break e;sy(s,u,d),i=l}else for(o=0;o<r.length;o++){if(u=r[o],l=u.instance,d=u.currentTarget,u=u.listener,l!==i&&s.isPropagationStopped())break e;sy(s,u,d),i=l}}}if(dc)throw t=_h,dc=!1,_h=null,t}function xe(t,e){var n=e[jh];n===void 0&&(n=e[jh]=new Set);var r=t+"__bubble";n.has(r)||(Bv(e,t,2,!1),n.add(r))}function Rd(t,e,n){var r=0;e&&(r|=4),Bv(n,t,r,e)}var bl="_reactListening"+Math.random().toString(36).slice(2);function aa(t){if(!t[bl]){t[bl]=!0,Kx.forEach(function(n){n!=="selectionchange"&&(tT.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bl]||(e[bl]=!0,Rd("selectionchange",!1,e))}}function Bv(t,e,n,r){switch(Nv(e)){case 1:var s=mN;break;case 4:s=gN;break;default:s=Uf}n=s.bind(null,e,n,t),s=void 0,!wh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;u!==null;){if(o=ys(u),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}u=u.parentNode}}r=r.return}uv(function(){var d=i,h=Lf(n),p=[];e:{var m=Fv.get(t);if(m!==void 0){var x=zf,N=t;switch(t){case"keypress":if($l(n)===0)break e;case"keydown":case"keyup":x=jN;break;case"focusin":N="focus",x=Sd;break;case"focusout":N="blur",x=Sd;break;case"beforeblur":case"afterblur":x=Sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=vN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=DN;break;case Ov:case Lv:case Vv:x=bN;break;case Mv:x=LN;break;case"scroll":x=yN;break;case"wheel":x=MN;break;case"copy":case"cut":case"paste":x=NN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Kg}var C=(e&4)!==0,j=!C&&t==="scroll",w=C?m!==null?m+"Capture":null:m;C=[];for(var _=d,y;_!==null;){y=_;var D=y.stateNode;if(y.tag===5&&D!==null&&(y=D,w!==null&&(D=ta(_,w),D!=null&&C.push(la(_,D,y)))),j)break;_=_.return}0<C.length&&(m=new x(m,N,null,n,h),p.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==xh&&(N=n.relatedTarget||n.fromElement)&&(ys(N)||N[Jn]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(N=n.relatedTarget||n.toElement,x=d,N=N?ys(N):null,N!==null&&(j=Us(N),N!==j||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=d),x!==N)){if(C=Wg,D="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=Kg,D="onPointerLeave",w="onPointerEnter",_="pointer"),j=x==null?m:oi(x),y=N==null?m:oi(N),m=new C(D,_+"leave",x,n,h),m.target=j,m.relatedTarget=y,D=null,ys(h)===d&&(C=new C(w,_+"enter",N,n,h),C.target=y,C.relatedTarget=j,D=C),j=D,x&&N)t:{for(C=x,w=N,_=0,y=C;y;y=Qs(y))_++;for(y=0,D=w;D;D=Qs(D))y++;for(;0<_-y;)C=Qs(C),_--;for(;0<y-_;)w=Qs(w),y--;for(;_--;){if(C===w||w!==null&&C===w.alternate)break t;C=Qs(C),w=Qs(w)}C=null}else C=null;x!==null&&iy(p,m,x,C,!1),N!==null&&j!==null&&iy(p,j,N,C,!0)}}e:{if(m=d?oi(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var M=HN;else if(Jg(m))if(Av)M=QN;else{M=GN;var F=WN}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=KN);if(M&&(M=M(t,d))){Cv(p,M,n,h);break e}F&&F(t,m,d),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&fh(m,"number",m.value)}switch(F=d?oi(d):window,t){case"focusin":(Jg(F)||F.contentEditable==="true")&&(si=F,Th=d,zo=null);break;case"focusout":zo=Th=si=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,ny(p,n,h);break;case"selectionchange":if(XN)break;case"keydown":case"keyup":ny(p,n,h)}var E;if(qf)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ri?Iv(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Sv&&n.locale!=="ko"&&(ri||b!=="onCompositionStart"?b==="onCompositionEnd"&&ri&&(E=Tv()):(Ir=h,Bf="value"in Ir?Ir.value:Ir.textContent,ri=!0)),F=gc(d,b),0<F.length&&(b=new Gg(b,t,null,n,h),p.push({event:b,listeners:F}),E?b.data=E:(E=kv(n),E!==null&&(b.data=E)))),(E=UN?BN(t,n):zN(t,n))&&(d=gc(d,"onBeforeInput"),0<d.length&&(h=new Gg("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=E))}Uv(p,e)})}function la(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ta(t,n),i!=null&&r.unshift(la(t,i,s)),i=ta(t,e),i!=null&&r.push(la(t,i,s))),t=t.return}return r}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,l=u.alternate,d=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&d!==null&&(u=d,s?(l=ta(n,i),l!=null&&o.unshift(la(n,l,u))):s||(l=ta(n,i),l!=null&&o.push(la(n,l,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nT=/\r\n?/g,rT=/\u0000|\uFFFD/g;function oy(t){return(typeof t=="string"?t:""+t).replace(nT,`
`).replace(rT,"")}function El(t,e,n){if(e=oy(e),oy(t)!==e&&n)throw Error(U(425))}function yc(){}var Ih=null,kh=null;function Ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ah=typeof setTimeout=="function"?setTimeout:void 0,sT=typeof clearTimeout=="function"?clearTimeout:void 0,ay=typeof Promise=="function"?Promise:void 0,iT=typeof queueMicrotask=="function"?queueMicrotask:typeof ay<"u"?function(t){return ay.resolve(null).then(t).catch(oT)}:Ah;function oT(t){setTimeout(function(){throw t})}function Dd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),sa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);sa(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ly(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),_n="__reactFiber$"+qi,ca="__reactProps$"+qi,Jn="__reactContainer$"+qi,jh="__reactEvents$"+qi,aT="__reactListeners$"+qi,lT="__reactHandles$"+qi;function ys(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ly(t);t!==null;){if(n=t[_n])return n;t=ly(t)}return e}t=n,n=t.parentNode}return null}function Oa(t){return t=t[_n]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function cu(t){return t[ca]||null}var Rh=[],ai=-1;function ts(t){return{current:t}}function we(t){0>ai||(t.current=Rh[ai],Rh[ai]=null,ai--)}function ge(t,e){ai++,Rh[ai]=t.current,t.current=e}var qr={},dt=ts(qr),St=ts(!1),Ts=qr;function Ii(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function xc(){we(St),we(dt)}function cy(t,e,n){if(dt.current!==qr)throw Error(U(168));ge(dt,e),ge(St,n)}function zv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,W1(t)||"Unknown",s));return Se({},n,r)}function vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,Ts=dt.current,ge(dt,t),ge(St,St.current),!0}function uy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=zv(t,e,Ts),r.__reactInternalMemoizedMergedChildContext=t,we(St),we(dt),ge(dt,t)):we(St),ge(St,n)}var Bn=null,uu=!1,Od=!1;function $v(t){Bn===null?Bn=[t]:Bn.push(t)}function cT(t){uu=!0,$v(t)}function ns(){if(!Od&&Bn!==null){Od=!0;var t=0,e=fe;try{var n=Bn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,uu=!1}catch(s){throw Bn!==null&&(Bn=Bn.slice(t+1)),pv(Vf,ns),s}finally{fe=e,Od=!1}}return null}var li=[],ci=0,wc=null,_c=0,qt=[],Ht=0,Ss=null,zn=1,$n="";function ps(t,e){li[ci++]=_c,li[ci++]=wc,wc=t,_c=e}function qv(t,e,n){qt[Ht++]=zn,qt[Ht++]=$n,qt[Ht++]=Ss,Ss=t;var r=zn;t=$n;var s=32-cn(r)-1;r&=~(1<<s),n+=1;var i=32-cn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,zn=1<<32-cn(e)+s|n<<s|r,$n=i+t}else zn=1<<i|n<<s|r,$n=t}function Wf(t){t.return!==null&&(ps(t,1),qv(t,1,0))}function Gf(t){for(;t===wc;)wc=li[--ci],li[ci]=null,_c=li[--ci],li[ci]=null;for(;t===Ss;)Ss=qt[--Ht],qt[Ht]=null,$n=qt[--Ht],qt[Ht]=null,zn=qt[--Ht],qt[Ht]=null}var Lt=null,Dt=null,be=!1,sn=null;function Hv(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Dt=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ss!==null?{id:zn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Dt=null,!0):!1;default:return!1}}function Ph(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dh(t){if(be){var e=Dt;if(e){var n=e;if(!dy(t,e)){if(Ph(t))throw Error(U(418));e=Dr(n.nextSibling);var r=Lt;e&&dy(t,e)?Hv(r,n):(t.flags=t.flags&-4097|2,be=!1,Lt=t)}}else{if(Ph(t))throw Error(U(418));t.flags=t.flags&-4097|2,be=!1,Lt=t}}}function hy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Nl(t){if(t!==Lt)return!1;if(!be)return hy(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ch(t.type,t.memoizedProps)),e&&(e=Dt)){if(Ph(t))throw Wv(),Error(U(418));for(;e;)Hv(t,e),e=Dr(e.nextSibling)}if(hy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Lt?Dr(t.stateNode.nextSibling):null;return!0}function Wv(){for(var t=Dt;t;)t=Dr(t.nextSibling)}function ki(){Dt=Lt=null,be=!1}function Kf(t){sn===null?sn=[t]:sn.push(t)}var uT=ar.ReactCurrentBatchConfig;function Eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Tl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fy(t){var e=t._init;return e(t._payload)}function Gv(t){function e(w,_){if(t){var y=w.deletions;y===null?(w.deletions=[_],w.flags|=16):y.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function s(w,_){return w=Mr(w,_),w.index=0,w.sibling=null,w}function i(w,_,y){return w.index=y,t?(y=w.alternate,y!==null?(y=y.index,y<_?(w.flags|=2,_):y):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function u(w,_,y,D){return _===null||_.tag!==6?(_=zd(y,w.mode,D),_.return=w,_):(_=s(_,y),_.return=w,_)}function l(w,_,y,D){var M=y.type;return M===ni?h(w,_,y.props.children,D,y.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===vr&&fy(M)===_.type)?(D=s(_,y.props),D.ref=Eo(w,_,y),D.return=w,D):(D=Yl(y.type,y.key,y.props,null,w.mode,D),D.ref=Eo(w,_,y),D.return=w,D)}function d(w,_,y,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==y.containerInfo||_.stateNode.implementation!==y.implementation?(_=$d(y,w.mode,D),_.return=w,_):(_=s(_,y.children||[]),_.return=w,_)}function h(w,_,y,D,M){return _===null||_.tag!==7?(_=bs(y,w.mode,D,M),_.return=w,_):(_=s(_,y),_.return=w,_)}function p(w,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return _=zd(""+_,w.mode,y),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pl:return y=Yl(_.type,_.key,_.props,null,w.mode,y),y.ref=Eo(w,null,_),y.return=w,y;case ti:return _=$d(_,w.mode,y),_.return=w,_;case vr:var D=_._init;return p(w,D(_._payload),y)}if(ko(_)||xo(_))return _=bs(_,w.mode,y,null),_.return=w,_;Tl(w,_)}return null}function m(w,_,y,D){var M=_!==null?_.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return M!==null?null:u(w,_,""+y,D);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:return y.key===M?l(w,_,y,D):null;case ti:return y.key===M?d(w,_,y,D):null;case vr:return M=y._init,m(w,_,M(y._payload),D)}if(ko(y)||xo(y))return M!==null?null:h(w,_,y,D,null);Tl(w,y)}return null}function x(w,_,y,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(y)||null,u(_,w,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case pl:return w=w.get(D.key===null?y:D.key)||null,l(_,w,D,M);case ti:return w=w.get(D.key===null?y:D.key)||null,d(_,w,D,M);case vr:var F=D._init;return x(w,_,y,F(D._payload),M)}if(ko(D)||xo(D))return w=w.get(y)||null,h(_,w,D,M,null);Tl(_,D)}return null}function N(w,_,y,D){for(var M=null,F=null,E=_,b=_=0,T=null;E!==null&&b<y.length;b++){E.index>b?(T=E,E=null):T=E.sibling;var I=m(w,E,y[b],D);if(I===null){E===null&&(E=T);break}t&&E&&I.alternate===null&&e(w,E),_=i(I,_,b),F===null?M=I:F.sibling=I,F=I,E=T}if(b===y.length)return n(w,E),be&&ps(w,b),M;if(E===null){for(;b<y.length;b++)E=p(w,y[b],D),E!==null&&(_=i(E,_,b),F===null?M=E:F.sibling=E,F=E);return be&&ps(w,b),M}for(E=r(w,E);b<y.length;b++)T=x(E,w,b,y[b],D),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?b:T.key),_=i(T,_,b),F===null?M=T:F.sibling=T,F=T);return t&&E.forEach(function(A){return e(w,A)}),be&&ps(w,b),M}function C(w,_,y,D){var M=xo(y);if(typeof M!="function")throw Error(U(150));if(y=M.call(y),y==null)throw Error(U(151));for(var F=M=null,E=_,b=_=0,T=null,I=y.next();E!==null&&!I.done;b++,I=y.next()){E.index>b?(T=E,E=null):T=E.sibling;var A=m(w,E,I.value,D);if(A===null){E===null&&(E=T);break}t&&E&&A.alternate===null&&e(w,E),_=i(A,_,b),F===null?M=A:F.sibling=A,F=A,E=T}if(I.done)return n(w,E),be&&ps(w,b),M;if(E===null){for(;!I.done;b++,I=y.next())I=p(w,I.value,D),I!==null&&(_=i(I,_,b),F===null?M=I:F.sibling=I,F=I);return be&&ps(w,b),M}for(E=r(w,E);!I.done;b++,I=y.next())I=x(E,w,b,I.value,D),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?b:I.key),_=i(I,_,b),F===null?M=I:F.sibling=I,F=I);return t&&E.forEach(function(R){return e(w,R)}),be&&ps(w,b),M}function j(w,_,y,D){if(typeof y=="object"&&y!==null&&y.type===ni&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:e:{for(var M=y.key,F=_;F!==null;){if(F.key===M){if(M=y.type,M===ni){if(F.tag===7){n(w,F.sibling),_=s(F,y.props.children),_.return=w,w=_;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===vr&&fy(M)===F.type){n(w,F.sibling),_=s(F,y.props),_.ref=Eo(w,F,y),_.return=w,w=_;break e}n(w,F);break}else e(w,F);F=F.sibling}y.type===ni?(_=bs(y.props.children,w.mode,D,y.key),_.return=w,w=_):(D=Yl(y.type,y.key,y.props,null,w.mode,D),D.ref=Eo(w,_,y),D.return=w,w=D)}return o(w);case ti:e:{for(F=y.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===y.containerInfo&&_.stateNode.implementation===y.implementation){n(w,_.sibling),_=s(_,y.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=$d(y,w.mode,D),_.return=w,w=_}return o(w);case vr:return F=y._init,j(w,_,F(y._payload),D)}if(ko(y))return N(w,_,y,D);if(xo(y))return C(w,_,y,D);Tl(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,_!==null&&_.tag===6?(n(w,_.sibling),_=s(_,y),_.return=w,w=_):(n(w,_),_=zd(y,w.mode,D),_.return=w,w=_),o(w)):n(w,_)}return j}var Ci=Gv(!0),Kv=Gv(!1),bc=ts(null),Ec=null,ui=null,Qf=null;function Yf(){Qf=ui=Ec=null}function Jf(t){var e=bc.current;we(bc),t._currentValue=e}function Oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vi(t,e){Ec=t,Qf=ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(Qf!==t)if(t={context:t,memoizedValue:e,next:null},ui===null){if(Ec===null)throw Error(U(308));ui=t,Ec.dependencies={lanes:0,firstContext:t}}else ui=ui.next=t;return e}var xs=null;function Xf(t){xs===null?xs=[t]:xs.push(t)}function Qv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xn(t,r)}function Xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function Zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xn(t,n)}return s=r.interleaved,s===null?(e.next=e,Xf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xn(t,n)}function ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mf(t,n)}}function py(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nc(t,e,n,r){var s=t.updateQueue;wr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var l=u,d=l.next;l.next=null,o===null?i=d:o.next=d,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==o&&(u===null?h.firstBaseUpdate=d:u.next=d,h.lastBaseUpdate=l))}if(i!==null){var p=s.baseState;o=0,h=d=l=null,u=i;do{var m=u.lane,x=u.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=t,C=u;switch(m=e,x=n,C.tag){case 1:if(N=C.payload,typeof N=="function"){p=N.call(x,p,m);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,m=typeof N=="function"?N.call(x,p,m):N,m==null)break e;p=Se({},p,m);break e;case 2:wr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[u]:m.push(u))}else x={eventTime:x,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(d=h=x,l=p):h=h.next=x,o|=m;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;m=u,u=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=p),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ks|=o,t.lanes=o,t.memoizedState=p}}function my(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var La={},En=ts(La),ua=ts(La),da=ts(La);function vs(t){if(t===La)throw Error(U(174));return t}function ep(t,e){switch(ge(da,e),ge(ua,t),ge(En,La),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mh(e,t)}we(En),ge(En,e)}function Ai(){we(En),we(ua),we(da)}function Jv(t){vs(da.current);var e=vs(En.current),n=mh(e,t.type);e!==n&&(ge(ua,t),ge(En,n))}function tp(t){ua.current===t&&(we(En),we(ua))}var Ne=ts(0);function Tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ld=[];function np(){for(var t=0;t<Ld.length;t++)Ld[t]._workInProgressVersionPrimary=null;Ld.length=0}var Hl=ar.ReactCurrentDispatcher,Vd=ar.ReactCurrentBatchConfig,Is=0,Te=null,$e=null,Ke=null,Sc=!1,$o=!1,ha=0,dT=0;function it(){throw Error(U(321))}function rp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function sp(t,e,n,r,s,i){if(Is=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hl.current=t===null||t.memoizedState===null?mT:gT,t=n(r,s),$o){i=0;do{if($o=!1,ha=0,25<=i)throw Error(U(301));i+=1,Ke=$e=null,e.updateQueue=null,Hl.current=yT,t=n(r,s)}while($o)}if(Hl.current=Ic,e=$e!==null&&$e.next!==null,Is=0,Ke=$e=Te=null,Sc=!1,e)throw Error(U(300));return t}function ip(){var t=ha!==0;return ha=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Te.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Jt(){if($e===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ke===null?Te.memoizedState:Ke.next;if(e!==null)Ke=e,$e=t;else{if(t===null)throw Error(U(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ke===null?Te.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function fa(t,e){return typeof e=="function"?e(t):e}function Md(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,l=null,d=i;do{var h=d.lane;if((Is&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(u=l=p,o=r):l=l.next=p,Te.lanes|=h,ks|=h}d=d.next}while(d!==null&&d!==i);l===null?o=r:l.next=u,dn(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,ks|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fd(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dn(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Xv(){}function Zv(t,e){var n=Te,r=Jt(),s=e(),i=!dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,op(nw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,pa(9,tw.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error(U(349));Is&30||ew(n,e,s)}return s}function ew(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tw(t,e,n,r){e.value=n,e.getSnapshot=r,rw(e)&&sw(t)}function nw(t,e,n){return n(function(){rw(e)&&sw(t)})}function rw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function sw(t){var e=Xn(t,1);e!==null&&un(e,t,1,-1)}function gy(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:t},e.queue=t,t=t.dispatch=pT.bind(null,Te,t),[e.memoizedState,t]}function pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iw(){return Jt().memoizedState}function Wl(t,e,n,r){var s=vn();Te.flags|=t,s.memoizedState=pa(1|e,n,void 0,r===void 0?null:r)}function du(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&rp(r,o.deps)){s.memoizedState=pa(e,n,i,r);return}}Te.flags|=t,s.memoizedState=pa(1|e,n,i,r)}function yy(t,e){return Wl(8390656,8,t,e)}function op(t,e){return du(2048,8,t,e)}function ow(t,e){return du(4,2,t,e)}function aw(t,e){return du(4,4,t,e)}function lw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cw(t,e,n){return n=n!=null?n.concat([t]):null,du(4,4,lw.bind(null,e,t),n)}function ap(){}function uw(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dw(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hw(t,e,n){return Is&21?(dn(n,e)||(n=yv(),Te.lanes|=n,ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function hT(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Vd.transition;Vd.transition={};try{t(!1),e()}finally{fe=n,Vd.transition=r}}function fw(){return Jt().memoizedState}function fT(t,e,n){var r=Vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pw(t))mw(e,n);else if(n=Qv(t,e,n,r),n!==null){var s=gt();un(n,t,r,s),gw(n,e,r)}}function pT(t,e,n){var r=Vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pw(t))mw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,dn(u,o)){var l=e.interleaved;l===null?(s.next=s,Xf(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Qv(t,e,s,r),n!==null&&(s=gt(),un(n,t,r,s),gw(n,e,r))}}function pw(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function mw(t,e){$o=Sc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mf(t,n)}}var Ic={readContext:Yt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},mT={readContext:Yt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:yy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wl(4194308,4,lw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fT.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:gy,useDebugValue:ap,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=gy(!1),e=t[0];return t=hT.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=vn();if(be){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ye===null)throw Error(U(349));Is&30||ew(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yy(nw.bind(null,r,i,t),[t]),r.flags|=2048,pa(9,tw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vn(),e=Ye.identifierPrefix;if(be){var n=$n,r=zn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gT={readContext:Yt,useCallback:uw,useContext:Yt,useEffect:op,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:dw,useReducer:Md,useRef:iw,useState:function(){return Md(fa)},useDebugValue:ap,useDeferredValue:function(t){var e=Jt();return hw(e,$e.memoizedState,t)},useTransition:function(){var t=Md(fa)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Xv,useSyncExternalStore:Zv,useId:fw,unstable_isNewReconciler:!1},yT={readContext:Yt,useCallback:uw,useContext:Yt,useEffect:op,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:dw,useReducer:Fd,useRef:iw,useState:function(){return Fd(fa)},useDebugValue:ap,useDeferredValue:function(t){var e=Jt();return $e===null?e.memoizedState=t:hw(e,$e.memoizedState,t)},useTransition:function(){var t=Fd(fa)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Xv,useSyncExternalStore:Zv,useId:fw,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hu={isMounted:function(t){return(t=t._reactInternals)?Us(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gt(),s=Vr(t),i=Wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(un(e,t,s,r),ql(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gt(),s=Vr(t),i=Wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(un(e,t,s,r),ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gt(),r=Vr(t),s=Wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Or(t,s,r),e!==null&&(un(e,t,r,n),ql(e,t,r))}};function xy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!oa(n,r)||!oa(s,i):!0}function yw(t,e,n){var r=!1,s=qr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=It(e)?Ts:dt.current,r=e.contextTypes,i=(r=r!=null)?Ii(t,s):qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function vy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hu.enqueueReplaceState(e,e.state,null)}function Vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=It(e)?Ts:dt.current,s.context=Ii(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hu.enqueueReplaceState(s,s.state,null),Nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ji(t,e){try{var n="",r=e;do n+=H1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ud(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xT=typeof WeakMap=="function"?WeakMap:Map;function xw(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cc||(Cc=!0,Kh=r),Mh(t,e)},n}function vw(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mh(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=RT.bind(null,t,e,n),e.then(t,t))}function _y(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function by(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var vT=ar.ReactCurrentOwner,Tt=!1;function mt(t,e,n,r){e.child=t===null?Kv(e,null,n,r):Ci(e,t.child,n,r)}function Ey(t,e,n,r,s){n=n.render;var i=e.ref;return vi(e,s),r=sp(t,e,n,r,i,s),n=ip(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(be&&n&&Wf(e),e.flags|=1,mt(t,e,r,s),e.child)}function Ny(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ww(t,e,i,r,s)):(t=Yl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:oa,n(o,r)&&t.ref===e.ref)return Zn(t,e,s)}return e.flags|=1,t=Mr(i,r),t.ref=e.ref,t.return=e,e.child=t}function ww(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(oa(i,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Zn(t,e,s)}return Fh(t,e,n,r,s)}function _w(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(hi,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(hi,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(hi,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(hi,Rt),Rt|=r;return mt(t,e,s,n),e.child}function bw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fh(t,e,n,r,s){var i=It(n)?Ts:dt.current;return i=Ii(e,i),vi(e,s),n=sp(t,e,n,r,i,s),r=ip(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(be&&r&&Wf(e),e.flags|=1,mt(t,e,n,s),e.child)}function Ty(t,e,n,r,s){if(It(n)){var i=!0;vc(e)}else i=!1;if(vi(e,s),e.stateNode===null)Gl(t,e),yw(e,n,r),Vh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var l=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Yt(d):(d=It(n)?Ts:dt.current,d=Ii(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||l!==d)&&vy(e,o,r,d),wr=!1;var m=e.memoizedState;o.state=m,Nc(e,r,o,s),l=e.memoizedState,u!==r||m!==l||St.current||wr?(typeof h=="function"&&(Lh(e,n,h,r),l=e.memoizedState),(u=wr||xy(e,n,u,r,m,l,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Yv(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:nn(e.type,u),o.props=d,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yt(l):(l=It(n)?Ts:dt.current,l=Ii(e,l));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||m!==l)&&vy(e,o,r,l),wr=!1,m=e.memoizedState,o.state=m,Nc(e,r,o,s);var N=e.memoizedState;u!==p||m!==N||St.current||wr?(typeof x=="function"&&(Lh(e,n,x,r),N=e.memoizedState),(d=wr||xy(e,n,d,r,m,N,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=l,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Uh(t,e,n,r,i,s)}function Uh(t,e,n,r,s,i){bw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&uy(e,n,!1),Zn(t,e,i);r=e.stateNode,vT.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ci(e,t.child,null,i),e.child=Ci(e,null,u,i)):mt(t,e,u,i),e.memoizedState=r.state,s&&uy(e,n,!0),e.child}function Ew(t){var e=t.stateNode;e.pendingContext?cy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cy(t,e.context,!1),ep(t,e.containerInfo)}function Sy(t,e,n,r,s){return ki(),Kf(s),e.flags|=256,mt(t,e,n,r),e.child}var Bh={dehydrated:null,treeContext:null,retryLane:0};function zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Nw(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Ne,s&1),t===null)return Dh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mu(o,r,0,null),t=bs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zh(n),e.memoizedState=Bh,t):lp(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return wT(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Mr(u,i):(i=bs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bh,r}return i=t.child,t=i.sibling,r=Mr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lp(t,e){return e=mu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sl(t,e,n,r){return r!==null&&Kf(r),Ci(e,t.child,null,n),t=lp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ud(Error(U(422))),Sl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=mu({mode:"visible",children:r.children},s,0,null),i=bs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ci(e,t.child,null,o),e.child.memoizedState=zh(o),e.memoizedState=Bh,i);if(!(e.mode&1))return Sl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(U(419)),r=Ud(i,r,void 0),Sl(t,e,o,r)}if(u=(o&t.childLanes)!==0,Tt||u){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xn(t,s),un(r,t,s,-1))}return pp(),r=Ud(Error(U(421))),Sl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=PT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=Dr(s.nextSibling),Lt=e,be=!0,sn=null,t!==null&&(qt[Ht++]=zn,qt[Ht++]=$n,qt[Ht++]=Ss,zn=t.id,$n=t.overflow,Ss=e),e=lp(e,r.children),e.flags|=4096,e)}function Iy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oh(t.return,e,n)}function Bd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Tw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iy(t,n,e);else if(t.tag===19)Iy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Tc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Tc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bd(e,!0,n,null,i);break;case"together":Bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _T(t,e,n){switch(e.tag){case 3:Ew(e),ki();break;case 5:Jv(e);break;case 1:It(e.type)&&vc(e);break;case 4:ep(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(bc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Nw(t,e,n):(ge(Ne,Ne.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);ge(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Tw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,_w(t,e,n)}return Zn(t,e,n)}var Sw,$h,Iw,kw;Sw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$h=function(){};Iw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vs(En.current);var i=null;switch(n){case"input":s=dh(t,s),r=dh(t,r),i=[];break;case"select":s=Se({},s,{value:void 0}),r=Se({},r,{value:void 0}),i=[];break;case"textarea":s=ph(t,s),r=ph(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yc)}gh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var l=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&l!==u&&(l!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(i=i||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Zo.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&xe("scroll",t),i||u===l||(i=[])):(i=i||[]).push(d,l))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};kw=function(t,e,n,r){n!==r&&(e.flags|=4)};function No(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bT(t,e,n){var r=e.pendingProps;switch(Gf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return It(e.type)&&xc(),ot(e),null;case 3:return r=e.stateNode,Ai(),we(St),we(dt),np(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Jh(sn),sn=null))),$h(t,e),ot(e),null;case 5:tp(e);var s=vs(da.current);if(n=e.type,t!==null&&e.stateNode!=null)Iw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ot(e),null}if(t=vs(En.current),Nl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_n]=e,r[ca]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<Ao.length;s++)xe(Ao[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Lg(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Mg(r,i),xe("invalid",r)}gh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&El(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&El(r.textContent,u,t),s=["children",""+u]):Zo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":ml(r),Vg(r,i,!0);break;case"textarea":ml(r),Fg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=yc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_n]=e,t[ca]=r,Sw(t,e,!1,!1),e.stateNode=t;e:{switch(o=yh(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ao.length;s++)xe(Ao[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":Lg(t,r),s=dh(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Se({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Mg(t,r),s=ph(t,r),xe("invalid",t);break;default:s=r}gh(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var l=u[i];i==="style"?iv(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rv(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ea(t,l):typeof l=="number"&&ea(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zo.hasOwnProperty(i)?l!=null&&i==="onScroll"&&xe("scroll",t):l!=null&&Rf(t,i,l,o))}switch(n){case"input":ml(t),Vg(t,r,!1);break;case"textarea":ml(t),Fg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$r(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?mi(t,!!r.multiple,i,!1):r.defaultValue!=null&&mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)kw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=vs(da.current),vs(En.current),Nl(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(i=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:El(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&El(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return ot(e),null;case 13:if(we(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Dt!==null&&e.mode&1&&!(e.flags&128))Wv(),ki(),e.flags|=98560,i=!1;else if(i=Nl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[_n]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else sn!==null&&(Jh(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?qe===0&&(qe=3):pp())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Ai(),$h(t,e),t===null&&aa(e.stateNode.containerInfo),ot(e),null;case 10:return Jf(e.type._context),ot(e),null;case 17:return It(e.type)&&xc(),ot(e),null;case 19:if(we(Ne),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)No(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tc(t),o!==null){for(e.flags|=128,No(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Le()>Ri&&(e.flags|=128,r=!0,No(i,!1),e.lanes=4194304)}else{if(!r)if(t=Tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return ot(e),null}else 2*Le()-i.renderingStartTime>Ri&&n!==1073741824&&(e.flags|=128,r=!0,No(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Le(),e.sibling=null,n=Ne.current,ge(Ne,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return fp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function ET(t,e){switch(Gf(e),e.tag){case 1:return It(e.type)&&xc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ai(),we(St),we(dt),np(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tp(e),null;case 13:if(we(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Ne),null;case 4:return Ai(),null;case 10:return Jf(e.type._context),null;case 22:case 23:return fp(),null;case 24:return null;default:return null}}var Il=!1,ct=!1,NT=typeof WeakSet=="function"?WeakSet:Set,H=null;function di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function qh(t,e,n){try{n()}catch(r){je(t,e,r)}}var ky=!1;function TT(t,e){if(Ih=pc,t=Pv(),Hf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,l=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)m=p,p=x;for(;;){if(p===t)break t;if(m===n&&++d===s&&(u=o),m===i&&++h===r&&(l=o),(x=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=x}n=u===-1||l===-1?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kh={focusedElem:t,selectionRange:n},pc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,j=N.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?C:nn(e.type,C),j);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=ky,ky=!1,N}function qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&qh(e,n,i)}s=s.next}while(s!==r)}}function fu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Cw(t){var e=t.alternate;e!==null&&(t.alternate=null,Cw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[ca],delete e[jh],delete e[aT],delete e[lT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Aw(t){return t.tag===5||t.tag===3||t.tag===4}function Cy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Aw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yc));else if(r!==4&&(t=t.child,t!==null))for(Wh(t,e,n),t=t.sibling;t!==null;)Wh(t,e,n),t=t.sibling}function Gh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gh(t,e,n),t=t.sibling;t!==null;)Gh(t,e,n),t=t.sibling}var Xe=null,rn=!1;function gr(t,e,n){for(n=n.child;n!==null;)jw(t,e,n),n=n.sibling}function jw(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(iu,n)}catch{}switch(n.tag){case 5:ct||di(n,e);case 6:var r=Xe,s=rn;Xe=null,gr(t,e,n),Xe=r,rn=s,Xe!==null&&(rn?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(rn?(t=Xe,n=n.stateNode,t.nodeType===8?Dd(t.parentNode,n):t.nodeType===1&&Dd(t,n),sa(t)):Dd(Xe,n.stateNode));break;case 4:r=Xe,s=rn,Xe=n.stateNode.containerInfo,rn=!0,gr(t,e,n),Xe=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&qh(n,e,o),s=s.next}while(s!==r)}gr(t,e,n);break;case 1:if(!ct&&(di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){je(n,e,u)}gr(t,e,n);break;case 21:gr(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,gr(t,e,n),ct=r):gr(t,e,n);break;default:gr(t,e,n)}}function Ay(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NT),e.forEach(function(r){var s=DT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Xe=u.stateNode,rn=!1;break e;case 3:Xe=u.stateNode.containerInfo,rn=!0;break e;case 4:Xe=u.stateNode.containerInfo,rn=!0;break e}u=u.return}if(Xe===null)throw Error(U(160));jw(i,o,s),Xe=null,rn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(d){je(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Rw(e,t),e=e.sibling}function Rw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),xn(t),r&4){try{qo(3,t,t.return),fu(3,t)}catch(C){je(t,t.return,C)}try{qo(5,t,t.return)}catch(C){je(t,t.return,C)}}break;case 1:tn(e,t),xn(t),r&512&&n!==null&&di(n,n.return);break;case 5:if(tn(e,t),xn(t),r&512&&n!==null&&di(n,n.return),t.flags&32){var s=t.stateNode;try{ea(s,"")}catch(C){je(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&ev(s,i),yh(u,o);var d=yh(u,i);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?iv(s,p):h==="dangerouslySetInnerHTML"?rv(s,p):h==="children"?ea(s,p):Rf(s,h,p,d)}switch(u){case"input":hh(s,i);break;case"textarea":tv(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?mi(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?mi(s,!!i.multiple,i.defaultValue,!0):mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ca]=i}catch(C){je(t,t.return,C)}}break;case 6:if(tn(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){je(t,t.return,C)}}break;case 3:if(tn(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sa(e.containerInfo)}catch(C){je(t,t.return,C)}break;case 4:tn(e,t),xn(t);break;case 13:tn(e,t),xn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dp=Le())),r&4&&Ay(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(d=ct)||h,tn(e,t),ct=d):tn(e,t),xn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(p=H=h;H!==null;){switch(m=H,x=m.child,m.tag){case 0:case 11:case 14:case 15:qo(4,m,m.return);break;case 1:di(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(C){je(r,n,C)}}break;case 5:di(m,m.return);break;case 22:if(m.memoizedState!==null){Ry(p);continue}}x!==null?(x.return=m,H=x):Ry(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=sv("display",o))}catch(C){je(t,t.return,C)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(C){je(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:tn(e,t),xn(t),r&4&&Ay(t);break;case 21:break;default:tn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Aw(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ea(s,""),r.flags&=-33);var i=Cy(t);Gh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Cy(t);Wh(t,u,o);break;default:throw Error(U(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ST(t,e,n){H=t,Pw(t)}function Pw(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Il;if(!o){var u=s.alternate,l=u!==null&&u.memoizedState!==null||ct;u=Il;var d=ct;if(Il=o,(ct=l)&&!d)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?Py(s):l!==null?(l.return=o,H=l):Py(s);for(;i!==null;)H=i,Pw(i),i=i.sibling;H=s,Il=u,ct=d}jy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):jy(t)}}function jy(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||fu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&my(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}my(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&sa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ct||e.flags&512&&Hh(e)}catch(m){je(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Ry(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Py(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fu(4,e)}catch(l){je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){je(e,s,l)}}var i=e.return;try{Hh(e)}catch(l){je(e,i,l)}break;case 5:var o=e.return;try{Hh(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){H=null;break}var u=e.sibling;if(u!==null){u.return=e.return,H=u;break}H=e.return}}var IT=Math.ceil,kc=ar.ReactCurrentDispatcher,cp=ar.ReactCurrentOwner,Kt=ar.ReactCurrentBatchConfig,le=0,Ye=null,Fe=null,tt=0,Rt=0,hi=ts(0),qe=0,ma=null,ks=0,pu=0,up=0,Ho=null,_t=null,dp=0,Ri=1/0,Un=null,Cc=!1,Kh=null,Lr=null,kl=!1,kr=null,Ac=0,Wo=0,Qh=null,Kl=-1,Ql=0;function gt(){return le&6?Le():Kl!==-1?Kl:Kl=Le()}function Vr(t){return t.mode&1?le&2&&tt!==0?tt&-tt:uT.transition!==null?(Ql===0&&(Ql=yv()),Ql):(t=fe,t!==0||(t=window.event,t=t===void 0?16:Nv(t.type)),t):1}function un(t,e,n,r){if(50<Wo)throw Wo=0,Qh=null,Error(U(185));Pa(t,n,r),(!(le&2)||t!==Ye)&&(t===Ye&&(!(le&2)&&(pu|=n),qe===4&&br(t,tt)),kt(t,r),n===1&&le===0&&!(e.mode&1)&&(Ri=Le()+500,uu&&ns()))}function kt(t,e){var n=t.callbackNode;uN(t,e);var r=fc(t,t===Ye?tt:0);if(r===0)n!==null&&zg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zg(n),e===1)t.tag===0?cT(Dy.bind(null,t)):$v(Dy.bind(null,t)),iT(function(){!(le&6)&&ns()}),n=null;else{switch(xv(r)){case 1:n=Vf;break;case 4:n=mv;break;case 16:n=hc;break;case 536870912:n=gv;break;default:n=hc}n=Bw(n,Dw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dw(t,e){if(Kl=-1,Ql=0,le&6)throw Error(U(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=fc(t,t===Ye?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jc(t,r);else{e=r;var s=le;le|=2;var i=Lw();(Ye!==t||tt!==e)&&(Un=null,Ri=Le()+500,_s(t,e));do try{AT();break}catch(u){Ow(t,u)}while(!0);Yf(),kc.current=i,le=s,Fe!==null?e=0:(Ye=null,tt=0,e=qe)}if(e!==0){if(e===2&&(s=bh(t),s!==0&&(r=s,e=Yh(t,s))),e===1)throw n=ma,_s(t,0),br(t,r),kt(t,Le()),n;if(e===6)br(t,r);else{if(s=t.current.alternate,!(r&30)&&!kT(s)&&(e=jc(t,r),e===2&&(i=bh(t),i!==0&&(r=i,e=Yh(t,i))),e===1))throw n=ma,_s(t,0),br(t,r),kt(t,Le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ms(t,_t,Un);break;case 3:if(br(t,r),(r&130023424)===r&&(e=dp+500-Le(),10<e)){if(fc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){gt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ah(ms.bind(null,t,_t,Un),e);break}ms(t,_t,Un);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-cn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IT(r/1960))-r,10<r){t.timeoutHandle=Ah(ms.bind(null,t,_t,Un),r);break}ms(t,_t,Un);break;case 5:ms(t,_t,Un);break;default:throw Error(U(329))}}}return kt(t,Le()),t.callbackNode===n?Dw.bind(null,t):null}function Yh(t,e){var n=Ho;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=jc(t,e),t!==2&&(e=_t,_t=n,e!==null&&Jh(e)),t}function Jh(t){_t===null?_t=t:_t.push.apply(_t,t)}function kT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~up,e&=~pu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function Dy(t){if(le&6)throw Error(U(327));wi();var e=fc(t,0);if(!(e&1))return kt(t,Le()),null;var n=jc(t,e);if(t.tag!==0&&n===2){var r=bh(t);r!==0&&(e=r,n=Yh(t,r))}if(n===1)throw n=ma,_s(t,0),br(t,e),kt(t,Le()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ms(t,_t,Un),kt(t,Le()),null}function hp(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ri=Le()+500,uu&&ns())}}function Cs(t){kr!==null&&kr.tag===0&&!(le&6)&&wi();var e=le;le|=1;var n=Kt.transition,r=fe;try{if(Kt.transition=null,fe=1,t)return t()}finally{fe=r,Kt.transition=n,le=e,!(le&6)&&ns()}}function fp(){Rt=hi.current,we(hi)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sT(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Gf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xc();break;case 3:Ai(),we(St),we(dt),np();break;case 5:tp(r);break;case 4:Ai();break;case 13:we(Ne);break;case 19:we(Ne);break;case 10:Jf(r.type._context);break;case 22:case 23:fp()}n=n.return}if(Ye=t,Fe=t=Mr(t.current,null),tt=Rt=e,qe=0,ma=null,up=pu=ks=0,_t=Ho=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xs=null}return t}function Ow(t,e){do{var n=Fe;try{if(Yf(),Hl.current=Ic,Sc){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sc=!1}if(Is=0,Ke=$e=Te=null,$o=!1,ha=0,cp.current=null,n===null||n.return===null){qe=1,ma=e,Fe=null;break}e:{var i=t,o=n.return,u=n,l=e;if(e=tt,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=u,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=_y(o);if(x!==null){x.flags&=-257,by(x,o,u,i,e),x.mode&1&&wy(i,d,e),e=x,l=d;var N=e.updateQueue;if(N===null){var C=new Set;C.add(l),e.updateQueue=C}else N.add(l);break e}else{if(!(e&1)){wy(i,d,e),pp();break e}l=Error(U(426))}}else if(be&&u.mode&1){var j=_y(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),by(j,o,u,i,e),Kf(ji(l,u));break e}}i=l=ji(l,u),qe!==4&&(qe=2),Ho===null?Ho=[i]:Ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=xw(i,l,e);py(i,w);break e;case 1:u=l;var _=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Lr===null||!Lr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=vw(i,u,e);py(i,D);break e}}i=i.return}while(i!==null)}Mw(n)}catch(M){e=M,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Lw(){var t=kc.current;return kc.current=Ic,t===null?Ic:t}function pp(){(qe===0||qe===3||qe===2)&&(qe=4),Ye===null||!(ks&268435455)&&!(pu&268435455)||br(Ye,tt)}function jc(t,e){var n=le;le|=2;var r=Lw();(Ye!==t||tt!==e)&&(Un=null,_s(t,e));do try{CT();break}catch(s){Ow(t,s)}while(!0);if(Yf(),le=n,kc.current=r,Fe!==null)throw Error(U(261));return Ye=null,tt=0,qe}function CT(){for(;Fe!==null;)Vw(Fe)}function AT(){for(;Fe!==null&&!tN();)Vw(Fe)}function Vw(t){var e=Uw(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?Mw(t):Fe=e,cp.current=null}function Mw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ET(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Fe=null;return}}else if(n=bT(n,e,Rt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);qe===0&&(qe=5)}function ms(t,e,n){var r=fe,s=Kt.transition;try{Kt.transition=null,fe=1,jT(t,e,n,r)}finally{Kt.transition=s,fe=r}return null}function jT(t,e,n,r){do wi();while(kr!==null);if(le&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(dN(t,i),t===Ye&&(Fe=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kl||(kl=!0,Bw(hc,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=fe;fe=1;var u=le;le|=4,cp.current=null,TT(t,n),Rw(n,t),JN(kh),pc=!!Ih,kh=Ih=null,t.current=n,ST(n),nN(),le=u,fe=o,Kt.transition=i}else t.current=n;if(kl&&(kl=!1,kr=t,Ac=s),i=t.pendingLanes,i===0&&(Lr=null),iN(n.stateNode),kt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cc)throw Cc=!1,t=Kh,Kh=null,t;return Ac&1&&t.tag!==0&&wi(),i=t.pendingLanes,i&1?t===Qh?Wo++:(Wo=0,Qh=t):Wo=0,ns(),null}function wi(){if(kr!==null){var t=xv(Ac),e=Kt.transition,n=fe;try{if(Kt.transition=null,fe=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,Ac=0,le&6)throw Error(U(331));var s=le;for(le|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var u=i.deletions;if(u!==null){for(var l=0;l<u.length;l++){var d=u[l];for(H=d;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:qo(8,h,i)}var p=h.child;if(p!==null)p.return=h,H=p;else for(;H!==null;){h=H;var m=h.sibling,x=h.return;if(Cw(h),h===d){H=null;break}if(m!==null){m.return=x,H=m;break}H=x}}}var N=i.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var j=C.sibling;C.sibling=null,C=j}while(C!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var _=t.current;for(H=_;H!==null;){o=H;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,H=y;else e:for(o=_;H!==null;){if(u=H,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:fu(9,u)}}catch(M){je(u,u.return,M)}if(u===o){H=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,H=D;break e}H=u.return}}if(le=s,ns(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(iu,t)}catch{}r=!0}return r}finally{fe=n,Kt.transition=e}}return!1}function Oy(t,e,n){e=ji(n,e),e=xw(t,e,1),t=Or(t,e,1),e=gt(),t!==null&&(Pa(t,1,e),kt(t,e))}function je(t,e,n){if(t.tag===3)Oy(t,t,n);else for(;e!==null;){if(e.tag===3){Oy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=ji(n,t),t=vw(e,t,1),e=Or(e,t,1),t=gt(),e!==null&&(Pa(e,1,t),kt(e,t));break}}e=e.return}}function RT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(tt&n)===n&&(qe===4||qe===3&&(tt&130023424)===tt&&500>Le()-dp?_s(t,0):up|=n),kt(t,e)}function Fw(t,e){e===0&&(t.mode&1?(e=xl,xl<<=1,!(xl&130023424)&&(xl=4194304)):e=1);var n=gt();t=Xn(t,e),t!==null&&(Pa(t,e,n),kt(t,n))}function PT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fw(t,n)}function DT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Fw(t,n)}var Uw;Uw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,_T(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,be&&e.flags&1048576&&qv(e,_c,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gl(t,e),t=e.pendingProps;var s=Ii(e,dt.current);vi(e,n),s=sp(null,e,r,t,s,n);var i=ip();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,vc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zf(e),s.updater=hu,e.stateNode=s,s._reactInternals=e,Vh(e,r,t,n),e=Uh(null,e,r,!0,i,n)):(e.tag=0,be&&i&&Wf(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=LT(r),t=nn(r,t),s){case 0:e=Fh(null,e,r,t,n);break e;case 1:e=Ty(null,e,r,t,n);break e;case 11:e=Ey(null,e,r,t,n);break e;case 14:e=Ny(null,e,r,nn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Fh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Ty(t,e,r,s,n);case 3:e:{if(Ew(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Yv(t,e),Nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ji(Error(U(423)),e),e=Sy(t,e,r,n,s);break e}else if(r!==s){s=ji(Error(U(424)),e),e=Sy(t,e,r,n,s);break e}else for(Dt=Dr(e.stateNode.containerInfo.firstChild),Lt=e,be=!0,sn=null,n=Kv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===s){e=Zn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return Jv(e),t===null&&Dh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ch(r,s)?o=null:i!==null&&Ch(r,i)&&(e.flags|=32),bw(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&Dh(e),null;case 13:return Nw(t,e,n);case 4:return ep(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ci(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Ey(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(bc,r._currentValue),r._currentValue=o,i!==null)if(dn(i.value,o)){if(i.children===s.children&&!St.current){e=Zn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Wn(-1,n&-n),l.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Oh(i.return,n,e),u.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Oh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vi(e,n),s=Yt(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),Ny(t,e,r,s,n);case 15:return ww(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Gl(t,e),e.tag=1,It(r)?(t=!0,vc(e)):t=!1,vi(e,n),yw(e,r,s),Vh(e,r,s,n),Uh(null,e,r,!0,t,n);case 19:return Tw(t,e,n);case 22:return _w(t,e,n)}throw Error(U(156,e.tag))};function Bw(t,e){return pv(t,e)}function OT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new OT(t,e,n,r)}function mp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LT(t){if(typeof t=="function")return mp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Df)return 11;if(t===Of)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")mp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ni:return bs(n.children,s,i,e);case Pf:o=8,s|=8;break;case ah:return t=Gt(12,n,e,s|2),t.elementType=ah,t.lanes=i,t;case lh:return t=Gt(13,n,e,s),t.elementType=lh,t.lanes=i,t;case ch:return t=Gt(19,n,e,s),t.elementType=ch,t.lanes=i,t;case Jx:return mu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qx:o=10;break e;case Yx:o=9;break e;case Df:o=11;break e;case Of:o=14;break e;case vr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Gt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bs(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function mu(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=Jx,t.lanes=n,t.stateNode={isHidden:!1},t}function zd(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function $d(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ed(0),this.expirationTimes=Ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ed(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gp(t,e,n,r,s,i,o,u,l){return t=new VT(t,e,n,u,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(i),t}function MT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zw(t){if(!t)return qr;t=t._reactInternals;e:{if(Us(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(It(n))return zv(t,n,e)}return e}function $w(t,e,n,r,s,i,o,u,l){return t=gp(n,r,!0,t,s,i,o,u,l),t.context=zw(null),n=t.current,r=gt(),s=Vr(n),i=Wn(r,s),i.callback=e??null,Or(n,i,s),t.current.lanes=s,Pa(t,s,r),kt(t,r),t}function gu(t,e,n,r){var s=e.current,i=gt(),o=Vr(s);return n=zw(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(s,e,o),t!==null&&(un(t,s,o,i),ql(t,s,o)),o}function Rc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ly(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yp(t,e){Ly(t,e),(t=t.alternate)&&Ly(t,e)}function FT(){return null}var qw=typeof reportError=="function"?reportError:function(t){console.error(t)};function xp(t){this._internalRoot=t}yu.prototype.render=xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));gu(t,e,null,null)};yu.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cs(function(){gu(null,t,null,null)}),e[Jn]=null}};function yu(t){this._internalRoot=t}yu.prototype.unstable_scheduleHydration=function(t){if(t){var e=_v();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&Ev(t)}};function vp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function UT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Rc(o);i.call(d)}}var o=$w(e,r,t,0,null,!1,!1,"",Vy);return t._reactRootContainer=o,t[Jn]=o.current,aa(t.nodeType===8?t.parentNode:t),Cs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Rc(l);u.call(d)}}var l=gp(t,0,!1,null,null,!1,!1,"",Vy);return t._reactRootContainer=l,t[Jn]=l.current,aa(t.nodeType===8?t.parentNode:t),Cs(function(){gu(e,l,n,r)}),l}function vu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var l=Rc(o);u.call(l)}}gu(e,o,t,s)}else o=UT(n,e,t,s,r);return Rc(o)}vv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Co(e.pendingLanes);n!==0&&(Mf(e,n|1),kt(e,Le()),!(le&6)&&(Ri=Le()+500,ns()))}break;case 13:Cs(function(){var r=Xn(t,1);if(r!==null){var s=gt();un(r,t,1,s)}}),yp(t,1)}};Ff=function(t){if(t.tag===13){var e=Xn(t,134217728);if(e!==null){var n=gt();un(e,t,134217728,n)}yp(t,134217728)}};wv=function(t){if(t.tag===13){var e=Vr(t),n=Xn(t,e);if(n!==null){var r=gt();un(n,t,e,r)}yp(t,e)}};_v=function(){return fe};bv=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};vh=function(t,e,n){switch(e){case"input":if(hh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=cu(r);if(!s)throw Error(U(90));Zx(r),hh(r,s)}}}break;case"textarea":tv(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};lv=hp;cv=Cs;var BT={usingClientEntryPoint:!1,Events:[Oa,oi,cu,ov,av,hp]},To={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zT={bundleType:To.bundleType,version:To.version,rendererPackageName:To.rendererPackageName,rendererConfig:To.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hv(t),t===null?null:t.stateNode},findFiberByHostInstance:To.findFiberByHostInstance||FT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{iu=Cl.inject(zT),bn=Cl}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BT;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(e))throw Error(U(200));return MT(t,e,null,n)};Mt.createRoot=function(t,e){if(!vp(t))throw Error(U(299));var n=!1,r="",s=qw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gp(t,1,!1,null,null,n,!1,r,s),t[Jn]=e.current,aa(t.nodeType===8?t.parentNode:t),new xp(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=hv(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return Cs(t)};Mt.hydrate=function(t,e,n){if(!xu(e))throw Error(U(200));return vu(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!vp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=qw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$w(e,null,t,1,n??null,s,!1,i,o),t[Jn]=e.current,aa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yu(e)};Mt.render=function(t,e,n){if(!xu(e))throw Error(U(200));return vu(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!xu(t))throw Error(U(40));return t._reactRootContainer?(Cs(function(){vu(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};Mt.unstable_batchedUpdates=hp;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return vu(t,e,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function Hw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hw)}catch(t){console.error(t)}}Hw(),Hx.exports=Mt;var $T=Hx.exports,Ww,My=$T;Ww=My.createRoot,My.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fy="popstate";function qT(t={}){function e(r,s){let{pathname:i,search:o,hash:u}=r.location;return Xh("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ga(s)}return WT(e,n,null,t)}function Ee(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HT(){return Math.random().toString(36).substring(2,10)}function Uy(t,e){return{usr:t.state,key:t.key,idx:e}}function Xh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Hi(e):e,state:n,key:e&&e.key||r||HT()}}function ga({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function WT(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u="POP",l=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){u="POP";let j=h(),w=j==null?null:j-d;d=j,l&&l({action:u,location:C.location,delta:w})}function m(j,w){u="PUSH";let _=Xh(C.location,j,w);d=h()+1;let y=Uy(_,d),D=C.createHref(_);try{o.pushState(y,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(D)}i&&l&&l({action:u,location:C.location,delta:1})}function x(j,w){u="REPLACE";let _=Xh(C.location,j,w);d=h();let y=Uy(_,d),D=C.createHref(_);o.replaceState(y,"",D),i&&l&&l({action:u,location:C.location,delta:0})}function N(j){return GT(j)}let C={get action(){return u},get location(){return t(s,o)},listen(j){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Fy,p),l=j,()=>{s.removeEventListener(Fy,p),l=null}},createHref(j){return e(s,j)},createURL:N,encodeLocation(j){let w=N(j);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:x,go(j){return o.go(j)}};return C}function GT(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ee(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ga(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Gw(t,e,n="/"){return KT(t,e,n,!1)}function KT(t,e,n,r){let s=typeof e=="string"?Hi(e):e,i=er(s.pathname||"/",n);if(i==null)return null;let o=Kw(t);QT(o);let u=null;for(let l=0;u==null&&l<o.length;++l){let d=oS(i);u=sS(o[l],d,r)}return u}function Kw(t,e=[],n=[],r="",s=!1){let i=(o,u,l=s,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&l)return;Ee(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Gn([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(Ee(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Kw(o.children,e,m,p,l)),!(o.path==null&&!o.index)&&e.push({path:p,score:nS(p,o.index),routesMeta:m})};return t.forEach((o,u)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,u);else for(let d of Qw(o.path))i(o,u,!0,d)}),e}function Qw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Qw(r.join("/")),u=[];return u.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&u.push(...o),u.map(l=>t.startsWith("/")&&l===""?"/":l)}function QT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var YT=/^:[\w-]+$/,JT=3,XT=2,ZT=1,eS=10,tS=-2,By=t=>t==="*";function nS(t,e){let n=t.split("/"),r=n.length;return n.some(By)&&(r+=tS),e&&(r+=XT),n.filter(s=>!By(s)).reduce((s,i)=>s+(YT.test(i)?JT:i===""?ZT:eS),r)}function rS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sS(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let u=0;u<r.length;++u){let l=r[u],d=u===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=Pc({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},h),m=l.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=Pc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Gn([i,p.pathname]),pathnameBase:dS(Gn([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Gn([i,p.pathnameBase]))}return o}function Pc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},m)=>{if(h==="*"){let N=u[m]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const x=u[m];return p&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function iS(t,e=!1,n=!0){Xt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,l)=>(r.push({paramName:u,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function oS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function er(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var aS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lS=t=>aS.test(t);function cS(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hi(t):t,i;if(n)if(lS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xt(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=zy(n.substring(1),"/"):i=zy(n,e)}else i=e;return{pathname:i,search:hS(r),hash:fS(s)}}function zy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wp(t){let e=uS(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function _p(t,e,n,r=!1){let s;typeof t=="string"?s=Hi(t):(s={...t},Ee(!s.pathname||!s.pathname.includes("?"),qd("?","pathname","search",s)),Ee(!s.pathname||!s.pathname.includes("#"),qd("#","pathname","hash",s)),Ee(!s.search||!s.search.includes("#"),qd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}u=p>=0?e[p]:"/"}let l=cS(s,u),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||h)&&(l.pathname+="/"),l}var Gn=t=>t.join("/").replace(/\/\/+/g,"/"),dS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function mS(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Yw=["POST","PUT","PATCH","DELETE"];new Set(Yw);var gS=["GET",...Yw];new Set(gS);var Wi=S.createContext(null);Wi.displayName="DataRouter";var wu=S.createContext(null);wu.displayName="DataRouterState";S.createContext(!1);var Jw=S.createContext({isTransitioning:!1});Jw.displayName="ViewTransition";var yS=S.createContext(new Map);yS.displayName="Fetchers";var xS=S.createContext(null);xS.displayName="Await";var Zt=S.createContext(null);Zt.displayName="Navigation";var Va=S.createContext(null);Va.displayName="Location";var Pn=S.createContext({outlet:null,matches:[],isDataRoute:!1});Pn.displayName="Route";var bp=S.createContext(null);bp.displayName="RouteError";function vS(t,{relative:e}={}){Ee(Gi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Zt),{hash:s,pathname:i,search:o}=Ma(t,{relative:e}),u=i;return n!=="/"&&(u=i==="/"?n:Gn([n,i])),r.createHref({pathname:u,search:o,hash:s})}function Gi(){return S.useContext(Va)!=null}function pn(){return Ee(Gi(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Va).location}var Xw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zw(t){S.useContext(Zt).static||S.useLayoutEffect(t)}function rs(){let{isDataRoute:t}=S.useContext(Pn);return t?RS():wS()}function wS(){Ee(Gi(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Wi),{basename:e,navigator:n}=S.useContext(Zt),{matches:r}=S.useContext(Pn),{pathname:s}=pn(),i=JSON.stringify(wp(r)),o=S.useRef(!1);return Zw(()=>{o.current=!0}),S.useCallback((l,d={})=>{if(Xt(o.current,Xw),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=_p(l,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Gn([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}S.createContext(null);function Ma(t,{relative:e}={}){let{matches:n}=S.useContext(Pn),{pathname:r}=pn(),s=JSON.stringify(wp(n));return S.useMemo(()=>_p(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function _S(t,e){return e_(t,e)}function e_(t,e,n,r,s){var _;Ee(Gi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(Zt),{matches:o}=S.useContext(Pn),u=o[o.length-1],l=u?u.params:{},d=u?u.pathname:"/",h=u?u.pathnameBase:"/",p=u&&u.route;{let y=p&&p.path||"";t_(d,!p||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let m=pn(),x;if(e){let y=typeof e=="string"?Hi(e):e;Ee(h==="/"||((_=y.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${y.pathname}" was given in the \`location\` prop.`),x=y}else x=m;let N=x.pathname||"/",C=N;if(h!=="/"){let y=h.replace(/^\//,"").split("/");C="/"+N.replace(/^\//,"").split("/").slice(y.length).join("/")}let j=Gw(t,{pathname:C});Xt(p||j!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Xt(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=SS(j&&j.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Gn([h,i.encodeLocation?i.encodeLocation(y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?h:Gn([h,i.encodeLocation?i.encodeLocation(y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathnameBase])})),o,n,r,s);return e&&w?S.createElement(Va.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},w):w}function bS(){let t=jS(),e=pS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,o)}var ES=S.createElement(bS,null),NS=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?S.createElement(Pn.Provider,{value:this.props.routeContext},S.createElement(bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TS({routeContext:t,match:e,children:n}){let r=S.useContext(Wi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Pn.Provider,{value:t},n)}function SS(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let h=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Ee(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let u=!1,l=-1;if(n)for(let h=0;h<i.length;h++){let p=i[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(l=h),p.route.id){let{loaderData:m,errors:x}=n,N=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||N){u=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let d=n&&r?(h,p)=>{var m,x;r(h,{location:n.location,params:((x=(m=n.matches)==null?void 0:m[0])==null?void 0:x.params)??{},unstable_pattern:mS(n.matches),errorInfo:p})}:void 0;return i.reduceRight((h,p,m)=>{let x,N=!1,C=null,j=null;n&&(x=o&&p.route.id?o[p.route.id]:void 0,C=p.route.errorElement||ES,u&&(l<0&&m===0?(t_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,j=null):l===m&&(N=!0,j=p.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,m+1)),_=()=>{let y;return x?y=C:N?y=j:p.route.Component?y=S.createElement(p.route.Component,null):p.route.element?y=p.route.element:y=h,S.createElement(TS,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?S.createElement(NS,{location:n.location,revalidation:n.revalidation,component:C,error:x,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:d}):_()},null)}function Ep(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IS(t){let e=S.useContext(Wi);return Ee(e,Ep(t)),e}function kS(t){let e=S.useContext(wu);return Ee(e,Ep(t)),e}function CS(t){let e=S.useContext(Pn);return Ee(e,Ep(t)),e}function Np(t){let e=CS(t),n=e.matches[e.matches.length-1];return Ee(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function AS(){return Np("useRouteId")}function jS(){var r;let t=S.useContext(bp),e=kS("useRouteError"),n=Np("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function RS(){let{router:t}=IS("useNavigate"),e=Np("useNavigate"),n=S.useRef(!1);return Zw(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{Xt(n.current,Xw),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var $y={};function t_(t,e,n){!e&&!$y[t]&&($y[t]=!0,Xt(!1,n))}S.memo(PS);function PS({routes:t,future:e,state:n,unstable_onError:r}){return e_(t,void 0,n,r,e)}function Dc({to:t,replace:e,state:n,relative:r}){Ee(Gi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(Zt);Xt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(Pn),{pathname:o}=pn(),u=rs(),l=_p(t,wp(i),o,r==="path"),d=JSON.stringify(l);return S.useEffect(()=>{u(JSON.parse(d),{replace:e,state:n,relative:r})},[u,d,r,e,n]),null}function De(t){Ee(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DS({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Ee(!Gi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:u,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[u,s,i,o]);typeof n=="string"&&(n=Hi(n));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:x="default"}=n,N=S.useMemo(()=>{let C=er(d,u);return C==null?null:{location:{pathname:C,search:h,hash:p,state:m,key:x},navigationType:r}},[u,d,h,p,m,x,r]);return Xt(N!=null,`<Router basename="${u}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:S.createElement(Zt.Provider,{value:l},S.createElement(Va.Provider,{children:e,value:N}))}function OS({children:t,location:e}){return _S(Zh(t),e)}function Zh(t,e=[]){let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,Zh(r.props.children,i));return}Ee(r.type===De,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ee(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zh(r.props.children,i)),n.push(o)}),n}var Jl="get",Xl="application/x-www-form-urlencoded";function _u(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function LS(t){return _u(t)&&t.tagName.toLowerCase()==="button"}function VS(t){return _u(t)&&t.tagName.toLowerCase()==="form"}function MS(t){return _u(t)&&t.tagName.toLowerCase()==="input"}function FS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function US(t,e){return t.button===0&&(!e||e==="_self")&&!FS(t)}var Al=null;function BS(){if(Al===null)try{new FormData(document.createElement("form"),0),Al=!1}catch{Al=!0}return Al}var zS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hd(t){return t!=null&&!zS.has(t)?(Xt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xl}"`),null):t}function $S(t,e){let n,r,s,i,o;if(VS(t)){let u=t.getAttribute("action");r=u?er(u,e):null,n=t.getAttribute("method")||Jl,s=Hd(t.getAttribute("enctype"))||Xl,i=new FormData(t)}else if(LS(t)||MS(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||u.getAttribute("action");if(r=l?er(l,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Jl,s=Hd(t.getAttribute("formenctype"))||Hd(u.getAttribute("enctype"))||Xl,i=new FormData(u,t),!BS()){let{name:d,type:h,value:p}=t;if(h==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,p)}}else{if(_u(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jl,r=null,s=Xl,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qS(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&er(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function HS(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function GS(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await HS(i,n);return o.links?o.links():[]}return[]}));return JS(r.flat(1).filter(WS).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qy(t,e,n,r,s,i){let o=(l,d)=>n[d]?l.route.id!==n[d].route.id:!0,u=(l,d)=>{var h;return n[d].pathname!==l.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,d)=>o(l,d)||u(l,d)):i==="data"?e.filter((l,d)=>{var p;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,d)||u(l,d))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function KS(t,e,{includeHydrateFallback:n}={}){return QS(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function QS(t){return[...new Set(t)]}function YS(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function JS(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(YS(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function n_(){let t=S.useContext(Wi);return Tp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function XS(){let t=S.useContext(wu);return Tp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Sp=S.createContext(void 0);Sp.displayName="FrameworkContext";function r_(){let t=S.useContext(Sp);return Tp(t,"You must render this element inside a <HydratedRouter> element"),t}function ZS(t,e){let n=S.useContext(Sp),[r,s]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:u,onBlur:l,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,m=S.useRef(null);S.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=w=>{w.forEach(_=>{o(_.isIntersecting)})},j=new IntersectionObserver(C,{threshold:.5});return m.current&&j.observe(m.current),()=>{j.disconnect()}}},[t]),S.useEffect(()=>{if(r){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[r]);let x=()=>{s(!0)},N=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:So(u,x),onBlur:So(l,N),onMouseEnter:So(d,x),onMouseLeave:So(h,N),onTouchStart:So(p,x)}]:[!1,m,{}]}function So(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function eI({page:t,...e}){let{router:n}=n_(),r=S.useMemo(()=>Gw(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?S.createElement(nI,{page:t,matches:r,...e}):null}function tI(t){let{manifest:e,routeModules:n}=r_(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return GS(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function nI({page:t,matches:e,...n}){let r=pn(),{manifest:s,routeModules:i}=r_(),{basename:o}=n_(),{loaderData:u,matches:l}=XS(),d=S.useMemo(()=>qy(t,e,l,s,r,"data"),[t,e,l,s,r]),h=S.useMemo(()=>qy(t,e,l,s,r,"assets"),[t,e,l,s,r]),p=S.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,C=!1;if(e.forEach(w=>{var y;let _=s.routes[w.route.id];!_||!_.hasLoader||(!d.some(D=>D.route.id===w.route.id)&&w.route.id in u&&((y=i[w.route.id])!=null&&y.shouldRevalidate)||_.hasClientLoader?C=!0:N.add(w.route.id))}),N.size===0)return[];let j=qS(t,o,"data");return C&&N.size>0&&j.searchParams.set("_routes",e.filter(w=>N.has(w.route.id)).map(w=>w.route.id).join(",")),[j.pathname+j.search]},[o,u,r,s,d,e,t,i]),m=S.useMemo(()=>KS(h,s),[h,s]),x=tI(h);return S.createElement(S.Fragment,null,p.map(N=>S.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),m.map(N=>S.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),x.map(({key:N,link:C})=>S.createElement("link",{key:N,nonce:n.nonce,...C})))}function rI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var s_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{s_&&(window.__reactRouterVersion="7.10.1")}catch{}function sI({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=S.useRef();s.current==null&&(s.current=qT({window:r,v5Compat:!0}));let i=s.current,[o,u]=S.useState({action:i.action,location:i.location}),l=S.useCallback(d=>{n===!1?u(d):S.startTransition(()=>u(d))},[n]);return S.useLayoutEffect(()=>i.listen(l),[i,l]),S.createElement(DS,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n===!0})}var i_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ne=S.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:u,target:l,to:d,preventScrollReset:h,viewTransition:p,...m},x){let{basename:N,unstable_useTransitions:C}=S.useContext(Zt),j=typeof d=="string"&&i_.test(d),w,_=!1;if(typeof d=="string"&&j&&(w=d,s_))try{let I=new URL(window.location.href),A=d.startsWith("//")?new URL(I.protocol+d):new URL(d),R=er(A.pathname,N);A.origin===I.origin&&R!=null?d=R+A.search+A.hash:_=!0}catch{Xt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=vS(d,{relative:s}),[D,M,F]=ZS(r,m),E=lI(d,{replace:o,state:u,target:l,preventScrollReset:h,relative:s,viewTransition:p,unstable_useTransitions:C});function b(I){e&&e(I),I.defaultPrevented||E(I)}let T=S.createElement("a",{...m,...F,href:w||y,onClick:_||i?e:b,ref:rI(x,M),target:l,"data-discover":!j&&n==="render"?"true":void 0});return D&&!j?S.createElement(S.Fragment,null,T,S.createElement(eI,{page:y})):T});ne.displayName="Link";var iI=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:u,children:l,...d},h){let p=Ma(o,{relative:d.relative}),m=pn(),x=S.useContext(wu),{navigator:N,basename:C}=S.useContext(Zt),j=x!=null&&fI(p)&&u===!0,w=N.encodeLocation?N.encodeLocation(p).pathname:p.pathname,_=m.pathname,y=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(_=_.toLowerCase(),y=y?y.toLowerCase():null,w=w.toLowerCase()),y&&C&&(y=er(y,C)||y);const D=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=_===w||!s&&_.startsWith(w)&&_.charAt(D)==="/",F=y!=null&&(y===w||!s&&y.startsWith(w)&&y.charAt(w.length)==="/"),E={isActive:M,isPending:F,isTransitioning:j},b=M?e:void 0,T;typeof r=="function"?T=r(E):T=[r,M?"active":null,F?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(E):i;return S.createElement(ne,{...d,"aria-current":b,className:T,ref:h,style:I,to:o,viewTransition:u},typeof l=="function"?l(E):l)});iI.displayName="NavLink";var oI=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Jl,action:u,onSubmit:l,relative:d,preventScrollReset:h,viewTransition:p,...m},x)=>{let{unstable_useTransitions:N}=S.useContext(Zt),C=dI(),j=hI(u,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&i_.test(u),y=D=>{if(l&&l(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,F=(M==null?void 0:M.getAttribute("formmethod"))||o,E=()=>C(M||D.currentTarget,{fetcherKey:e,method:F,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:p});N&&n!==!1?S.startTransition(()=>E()):E()};return S.createElement("form",{ref:x,method:w,action:j,onSubmit:r?l:y,...m,"data-discover":!_&&t==="render"?"true":void 0})});oI.displayName="Form";function aI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o_(t){let e=S.useContext(Wi);return Ee(e,aI(t)),e}function lI(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:u}={}){let l=rs(),d=pn(),h=Ma(t,{relative:i});return S.useCallback(p=>{if(US(p,e)){p.preventDefault();let m=n!==void 0?n:ga(d)===ga(h),x=()=>l(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o});u?S.startTransition(()=>x()):x()}},[d,l,h,n,r,e,t,s,i,o,u])}var cI=0,uI=()=>`__${String(++cI)}__`;function dI(){let{router:t}=o_("useSubmit"),{basename:e}=S.useContext(Zt),n=AS(),r=t.fetch,s=t.navigate;return S.useCallback(async(i,o={})=>{let{action:u,method:l,encType:d,formData:h,body:p}=$S(i,e);if(o.navigate===!1){let m=o.fetcherKey||uI();await r(m,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||l,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||u,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||l,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function hI(t,{relative:e}={}){let{basename:n}=S.useContext(Zt),r=S.useContext(Pn);Ee(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ma(t||".",{relative:e})},o=pn();if(t==null){i.search=o.search;let u=new URLSearchParams(i.search),l=u.getAll("index");if(l.some(h=>h==="")){u.delete("index"),l.filter(p=>p).forEach(p=>u.append("index",p));let h=u.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Gn([n,i.pathname])),ga(i)}function fI(t,{relative:e}={}){let n=S.useContext(Jw);Ee(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=o_("useViewTransitionState"),s=Ma(t,{relative:e});if(!n.isTransitioning)return!1;let i=er(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=er(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Pc(s.pathname,o)!=null||Pc(s.pathname,i)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=()=>{};var Hy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},l_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,l=s+2<t.length,d=l?t[s+2]:0,h=i>>2,p=(i&3)<<4|u>>4;let m=(u&15)<<2|d>>6,x=d&63;l||(x=64,o||(m=64)),r.push(n[h],n[p],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||p==null)throw new gI;const m=i<<2|u>>4;if(r.push(m),d!==64){const x=u<<4&240|d>>2;if(r.push(x),p!==64){const N=d<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yI=function(t){const e=a_(t);return l_.encodeByteArray(e,!0)},Oc=function(t){return yI(t).replace(/\./g,"")},c_=function(t){try{return l_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=()=>xI().__FIREBASE_DEFAULTS__,wI=()=>{if(typeof process>"u"||typeof Hy>"u")return;const t=Hy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_I=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&c_(t[1]);return e&&JSON.parse(e)},bu=()=>{try{return pI()||vI()||wI()||_I()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},u_=t=>{var e,n;return(n=(e=bu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},d_=t=>{const e=u_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h_=()=>{var t;return(t=bu())==null?void 0:t.config},f_=t=>{var e;return(e=bu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ip(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Oc(JSON.stringify(n)),Oc(JSON.stringify(o)),""].join(".")}const Go={};function EI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Go))Go[e]?t.emulator.push(e):t.prod.push(e);return t}function NI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Wy=!1;function kp(t,e){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||Go[t]===e||Go[t]||Wy)return;Go[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=EI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function u(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Wy=!0,o()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=NI(r),x=n("text"),N=document.getElementById(x)||document.createElement("span"),C=n("learnmore"),j=document.getElementById(C)||document.createElement("a"),w=n("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const y=m.element;u(y),h(j,C);const D=d();l(_,w),y.append(_,N,j,D),document.body.appendChild(y)}i?(N.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function SI(){var e;const t=(e=bu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function II(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AI(){const t=ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jI(){return!SI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RI(){try{return typeof indexedDB=="object"}catch{return!1}}function PI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DI,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fa.prototype.create)}}class Fa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?OI(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new Dn(s,u,r)}}function OI(t,e){return t.replace(LI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const LI=/\{\$([^}]+)}/g;function VI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function As(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Gy(i)&&Gy(o)){if(!As(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Gy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ro(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MI(t,e){const n=new FI(t,e);return n.subscribe.bind(n)}class FI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wd),s.error===void 0&&(s.error=Wd),s.complete===void 0&&(s.complete=Wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t){return t&&t._delegate?t._delegate:t}class Hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($I(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zI(t){return t===gs?void 0:t}function $I(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const HI={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},WI=se.INFO,GI={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},KI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=GI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=WI,this._logHandler=KI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const QI=(t,e)=>e.some(n=>t instanceof n);let Ky,Qy;function YI(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JI(){return Qy||(Qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m_=new WeakMap,ef=new WeakMap,g_=new WeakMap,Gd=new WeakMap,Ap=new WeakMap;function XI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&m_.set(n,t)}).catch(()=>{}),Ap.set(e,t),e}function ZI(t){if(ef.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ef.set(t,e)}let tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||g_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function e2(t){tf=t(tf)}function t2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kd(this),e,...n);return g_.set(r,e.sort?e.sort():[e]),Fr(r)}:JI().includes(t)?function(...e){return t.apply(Kd(this),e),Fr(m_.get(this))}:function(...e){return Fr(t.apply(Kd(this),e))}}function n2(t){return typeof t=="function"?t2(t):(t instanceof IDBTransaction&&ZI(t),QI(t,YI())?new Proxy(t,tf):t)}function Fr(t){if(t instanceof IDBRequest)return XI(t);if(Gd.has(t))return Gd.get(t);const e=n2(t);return e!==t&&(Gd.set(t,e),Ap.set(e,t)),e}const Kd=t=>Ap.get(t);function r2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Fr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Fr(o.result),l.oldVersion,l.newVersion,Fr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),u.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const s2=["get","getKey","getAll","getAllKeys","count"],i2=["put","add","delete","clear"],Qd=new Map;function Yy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qd.get(e))return Qd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=i2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||s2.includes(n)))return;const i=async function(o,...u){const l=this.transaction(o,s?"readwrite":"readonly");let d=l.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&l.done]))[0]};return Qd.set(e,i),i}e2(t=>({...t,get:(e,n,r)=>Yy(e,n)||t.get(e,n,r),has:(e,n)=>!!Yy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(a2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function a2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Jy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Cp("@firebase/app"),l2="@firebase/app-compat",c2="@firebase/analytics-compat",u2="@firebase/analytics",d2="@firebase/app-check-compat",h2="@firebase/app-check",f2="@firebase/auth",p2="@firebase/auth-compat",m2="@firebase/database",g2="@firebase/data-connect",y2="@firebase/database-compat",x2="@firebase/functions",v2="@firebase/functions-compat",w2="@firebase/installations",_2="@firebase/installations-compat",b2="@firebase/messaging",E2="@firebase/messaging-compat",N2="@firebase/performance",T2="@firebase/performance-compat",S2="@firebase/remote-config",I2="@firebase/remote-config-compat",k2="@firebase/storage",C2="@firebase/storage-compat",A2="@firebase/firestore",j2="@firebase/ai",R2="@firebase/firestore-compat",P2="firebase",D2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",O2={[nf]:"fire-core",[l2]:"fire-core-compat",[u2]:"fire-analytics",[c2]:"fire-analytics-compat",[h2]:"fire-app-check",[d2]:"fire-app-check-compat",[f2]:"fire-auth",[p2]:"fire-auth-compat",[m2]:"fire-rtdb",[g2]:"fire-data-connect",[y2]:"fire-rtdb-compat",[x2]:"fire-fn",[v2]:"fire-fn-compat",[w2]:"fire-iid",[_2]:"fire-iid-compat",[b2]:"fire-fcm",[E2]:"fire-fcm-compat",[N2]:"fire-perf",[T2]:"fire-perf-compat",[S2]:"fire-rc",[I2]:"fire-rc-compat",[k2]:"fire-gcs",[C2]:"fire-gcs-compat",[A2]:"fire-fst",[R2]:"fire-fst-compat",[j2]:"fire-vertex","fire-js":"fire-js",[P2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,L2=new Map,sf=new Map;function Xy(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function js(t){const e=t.name;if(sf.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,t);for(const n of Lc.values())Xy(n,t);for(const n of L2.values())Xy(n,t);return!0}function Eu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Fa("app","Firebase",V2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=D2;function y_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:rf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ur.create("bad-app-name",{appName:String(s)});if(n||(n=h_()),!n)throw Ur.create("no-options");const i=Lc.get(s);if(i){if(As(n,i.options)&&As(r,i.config))return i;throw Ur.create("duplicate-app",{appName:s})}const o=new qI(s);for(const l of sf.values())o.addComponent(l);const u=new M2(n,r,o);return Lc.set(s,u),u}function jp(t=rf){const e=Lc.get(t);if(!e&&t===rf&&h_())return y_();if(!e)throw Ur.create("no-app",{appName:t});return e}function Nn(t,e,n){let r=O2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(o.join(" "));return}js(new Hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firebase-heartbeat-database",U2=1,ya="firebase-heartbeat-store";let Yd=null;function x_(){return Yd||(Yd=r2(F2,U2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ya)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),Yd}async function B2(t){try{const n=(await x_()).transaction(ya),r=await n.objectStore(ya).get(v_(t));return await n.done,r}catch(e){if(e instanceof Dn)tr.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tr.warn(n.message)}}}async function Zy(t,e){try{const r=(await x_()).transaction(ya,"readwrite");await r.objectStore(ya).put(e,v_(t)),await r.done}catch(n){if(n instanceof Dn)tr.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tr.warn(r.message)}}}function v_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=1024,$2=30;class q2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new W2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=e0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>$2){const o=G2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e0(),{heartbeatsToSend:r,unsentEntries:s}=H2(this._heartbeatsCache.heartbeats),i=Oc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return tr.warn(n),""}}}function e0(){return new Date().toISOString().substring(0,10)}function H2(t,e=z2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),t0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),t0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class W2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RI()?PI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function t0(t){return Oc(JSON.stringify({version:2,heartbeats:t})).length}function G2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){js(new Hr("platform-logger",e=>new o2(e),"PRIVATE")),js(new Hr("heartbeat",e=>new q2(e),"PRIVATE")),Nn(nf,Jy,t),Nn(nf,Jy,"esm2020"),Nn("fire-js","")}K2("");function w_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q2=w_,__=new Fa("auth","Firebase",w_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Cp("@firebase/auth");function Y2(t,...e){Vc.logLevel<=se.WARN&&Vc.warn(`Auth (${zs}): ${t}`,...e)}function Zl(t,...e){Vc.logLevel<=se.ERROR&&Vc.error(`Auth (${zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,...e){throw Rp(t,...e)}function Tn(t,...e){return Rp(t,...e)}function b_(t,e,n){const r={...Q2(),[e]:n};return new Fa("auth","Firebase",r).create(e,{appName:t.name})}function Kn(t){return b_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return __.create(t,...e)}function K(t,e,...n){if(!t)throw Rp(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zl(e),new Error(e)}function nr(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function J2(){return n0()==="http:"||n0()==="https:"}function n0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J2()||kI()||"connection"in navigator)?navigator.onLine:!0}function Z2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.shortDelay=e,this.longDelay=n,nr(n>e,"Short delay should be less than long delay!"),this.isMobile=TI()||CI()}get(){return X2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e){nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nk=new Ba(3e4,6e4);function lr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function mn(t,e,n,r,s={}){return N_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Ua({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:l,...i};return II()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(d.credentials="include"),E_.fetch()(await T_(t,t.config.apiHost,n,u),d)})}async function N_(t,e,n){t._canInitEmulator=!1;const r={...ek,...e};try{const s=new sk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw jl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[l,d]=u.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw jl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw jl(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw b_(t,h,d);hn(t,h)}}catch(s){if(s instanceof Dn)throw s;hn(t,"network-request-failed",{message:String(s)})}}async function za(t,e,n,r,s={}){const i=await mn(t,e,n,r,s);return"mfaPendingCredential"in i&&hn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function T_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Pp(t.config,s):`${t.config.apiScheme}://${s}`;return tk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),nk.get())})}}function jl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tn(t,e,r);return s.customData._tokenResponse=n,s}function r0(t){return t!==void 0&&t.enterprise!==void 0}class ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ok(t,e){return mn(t,"GET","/v2/recaptchaConfig",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e){return mn(t,"POST","/v1/accounts:delete",e)}async function Mc(t,e){return mn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lk(t,e=!1){const n=Ie(t),r=await n.getIdToken(e),s=Dp(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ko(Jd(s.auth_time)),issuedAtTime:Ko(Jd(s.iat)),expirationTime:Ko(Jd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Jd(t){return Number(t)*1e3}function Dp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zl("JWT malformed, contained fewer than 3 sections"),null;try{const s=c_(n);return s?JSON.parse(s):(Zl("Failed to decode base64 JWT payload"),null)}catch(s){return Zl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function s0(t){const e=Dp(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&ck(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ck({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ko(this.lastLoginAt),this.creationTime=Ko(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Rs(t,Mc(e,{idToken:n}));K(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?S_(s.providerUserInfo):[],o=hk(t.providerData,i),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=u?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new af(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function dk(t){const e=Ie(t);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function S_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){const n=await N_(t,{},async()=>{const r=Ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await T_(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:u,body:r};return t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(l.credentials="include"),E_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pk(t,e){return mn(t,"POST","/v2/accounts:revokeToken",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=s0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new _i;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _i,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class on{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new uk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new af(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Rs(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lk(this,e)}reload(){return dk(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(Kn(this.auth));const e=await this.getIdToken();return await Rs(this,ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,u=n.tenantId??void 0,l=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:x,providerData:N,stsTokenManager:C}=n;K(p&&C,e,"internal-error");const j=_i.fromJSON(this.name,C);K(typeof p=="string",e,"internal-error"),yr(r,e.name),yr(s,e.name),K(typeof m=="boolean",e,"internal-error"),K(typeof x=="boolean",e,"internal-error"),yr(i,e.name),yr(o,e.name),yr(u,e.name),yr(l,e.name),yr(d,e.name),yr(h,e.name);const w=new on({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:u,stsTokenManager:j,createdAt:d,lastLoginAt:h});return N&&Array.isArray(N)&&(w.providerData=N.map(_=>({..._}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new _i;s.updateFromServerResponse(n);const i=new on({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?S_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new _i;u.updateFromIdToken(r);const l=new on({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new af(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,d),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;function Hn(t){nr(t instanceof Function,"Expected a class definition");let e=i0.get(t);return e?(nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}I_.type="NONE";const o0=I_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e,n){return`firebase:${t}:${e}:${n}`}class bi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ec(this.userKey,s.apiKey,i),this.fullPersistenceKey=ec("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mc(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bi(Hn(o0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Hn(o0);const o=ec(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const m=await Mc(e,{idToken:h}).catch(()=>{});if(!m)break;p=await on._fromGetAccountInfoResponse(e,m,h)}else p=on._fromJSON(e,h);d!==i&&(u=p),i=d;break}}catch{}const l=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new bi(i,e,r):(i=l[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new bi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P_(e))return"Blackberry";if(D_(e))return"Webos";if(C_(e))return"Safari";if((e.includes("chrome/")||A_(e))&&!e.includes("edge/"))return"Chrome";if(R_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function k_(t=ht()){return/firefox\//i.test(t)}function C_(t=ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A_(t=ht()){return/crios\//i.test(t)}function j_(t=ht()){return/iemobile/i.test(t)}function R_(t=ht()){return/android/i.test(t)}function P_(t=ht()){return/blackberry/i.test(t)}function D_(t=ht()){return/webos/i.test(t)}function Op(t=ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mk(t=ht()){var e;return Op(t)&&!!((e=window.navigator)!=null&&e.standalone)}function gk(){return AI()&&document.documentMode===10}function O_(t=ht()){return Op(t)||R_(t)||D_(t)||P_(t)||/windows phone/i.test(t)||j_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e=[]){let n;switch(t){case"Browser":n=a0(ht());break;case"Worker":n=`${a0(ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const l=e(i);o(l)}catch(l){u(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e={}){return mn(t,"GET","/v2/passwordPolicy",lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=6;class wk{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l0(this),this.idTokenSubscription=new l0(this),this.beforeStateQueue=new yk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=__,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await bi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mc(this,{idToken:e}),r=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Pt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,u=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===u)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(Kn(this));const n=e?Ie(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(Kn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(Kn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xk(this),n=new wk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await bi.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Y2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ss(t){return Ie(t)}class l0{constructor(e){this.auth=e,this.observer=null,this.addObserver=MI(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bk(t){Nu=t}function V_(t){return Nu.loadJS(t)}function Ek(){return Nu.recaptchaEnterpriseScript}function Nk(){return Nu.gapiScript}function Tk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Sk{constructor(){this.enterprise=new Ik}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ik{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kk="recaptcha-enterprise",M_="NO_RECAPTCHA";class Ck{constructor(e){this.type=kk,this.auth=ss(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{ok(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new ik(l);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(l=>{u(l)})})}function s(i,o,u){const l=window.grecaptcha;r0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(M_)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(u=>{if(!n&&r0(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Ek();l.length!==0&&(l+=u),V_(l).then(()=>{s(u,i,o)}).catch(d=>{o(d)})}}).catch(u=>{o(u)})})}}async function c0(t,e,n,r=!1,s=!1){const i=new Ck(t);let o;if(s)o=M_;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const l=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const l=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Uc(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await c0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await c0(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e){const n=Eu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(As(i,e??{}))return s;hn(s,"already-initialized")}return n.initialize({options:e})}function jk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Rk(t,e,n){const r=ss(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=F_(e),{host:o,port:u}=Pk(e),l=u===null?"":`:${u}`,d={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(As(d,r.config.emulator)&&As(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Bs(o)?(Ip(`${i}//${o}${l}`),kp("Auth",!0)):Dk()}function F_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pk(t){const e=F_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:u0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:u0(o)}}}function u0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function Ok(t,e){return mn(t,"POST","/v1/accounts:update",e)}async function Lk(t,e){return mn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e){return za(t,"POST","/v1/accounts:signInWithPassword",lr(t,e))}async function Mk(t,e){return mn(t,"POST","/v1/accounts:sendOobCode",lr(t,e))}async function Fk(t,e){return Mk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){return za(t,"POST","/v1/accounts:signInWithEmailLink",lr(t,e))}async function Bk(t,e){return za(t,"POST","/v1/accounts:signInWithEmailLink",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Lp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new xa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uc(e,n,"signInWithPassword",Vk);case"emailLink":return Uk(e,{email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uc(e,r,"signUpPassword",Lk);case"emailLink":return Bk(e,{idToken:n,email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e){return za(t,"POST","/v1/accounts:signInWithIdp",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="http://localhost";class Ps extends Lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ps(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ei(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ei(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ei(e,n)}buildRequest(){const e={requestUri:zk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ua(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qk(t){const e=jo(Ro(t)).link,n=e?jo(Ro(e)).deep_link_id:null,r=jo(Ro(t)).deep_link_id;return(r?jo(Ro(r)).link:null)||r||n||e||t}class Vp{constructor(e){const n=jo(Ro(e)),r=n.apiKey??null,s=n.oobCode??null,i=$k(n.mode??null);K(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qk(e);try{return new Vp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.providerId=Ki.PROVIDER_ID}static credential(e,n){return xa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vp.parseLink(n);return K(r,"argument-error"),xa._fromEmailAndCode(e,r.code,r.tenantId)}}Ki.PROVIDER_ID="password";Ki.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ki.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends U_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends $a{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends $a{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ps._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends $a{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends $a{constructor(){super("twitter.com")}static credential(e,n){return Ps._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e){return za(t,"POST","/v1/accounts:signUp",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await on._fromIdTokenResponse(e,r,s),o=d0(r);return new Ds({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=d0(r);return new Ds({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function d0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Dn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Bc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Bc(e,n,r,s)}}function B_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Bc._fromErrorAndOperation(t,i,e,r):i})}async function Wk(t,e,n=!1){const r=await Rs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ds._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e,n=!1){const{auth:r}=t;if(Pt(r.app))return Promise.reject(Kn(r));const s="reauthenticate";try{const i=await Rs(t,B_(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=Dp(i.idToken);K(o,r,"internal-error");const{sub:u}=o;return K(t.uid===u,r,"user-mismatch"),Ds._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_(t,e,n=!1){if(Pt(t.app))return Promise.reject(Kn(t));const r="signIn",s=await B_(t,r,e),i=await Ds._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Kk(t,e){return z_(ss(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $_(t){const e=ss(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Qk(t,e,n){const r=ss(t);await Uc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Fk)}async function Yk(t,e,n){if(Pt(t.app))return Promise.reject(Kn(t));const r=ss(t),o=await Uc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&$_(t),l}),u=await Ds._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function Jk(t,e,n){return Pt(t.app)?Promise.reject(Kn(t)):Kk(Ie(t),Ki.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(t,e){return mn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h0(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ie(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Rs(r,Xk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:l})=>l==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Zk(t,e){return eC(Ie(t),null,e)}async function eC(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Rs(t,Ok(r,i));await t._updateTokensIfNecessary(o,!0)}function tC(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function nC(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function rC(t,e,n,r){return Ie(t).onAuthStateChanged(e,n,r)}function sC(t){return Ie(t).signOut()}const zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zc,"1"),this.storage.removeItem(zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=1e3,oC=10;class H_ extends q_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,oC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H_.type="LOCAL";const aC=H_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends q_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}W_.type="SESSION";const G_=W_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Tu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,i)),l=await lC(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,l)=>{const d=Mp("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return window}function uC(t){Sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function dC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function fC(){return K_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="firebaseLocalStorageDb",pC=1,$c="firebaseLocalStorage",Y_="fbase_key";class qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Su(t,e){return t.transaction([$c],e?"readwrite":"readonly").objectStore($c)}function mC(){const t=indexedDB.deleteDatabase(Q_);return new qa(t).toPromise()}function lf(){const t=indexedDB.open(Q_,pC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($c,{keyPath:Y_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($c)?e(r):(r.close(),await mC(),e(await lf()))})})}async function f0(t,e,n){const r=Su(t,!0).put({[Y_]:e,value:n});return new qa(r).toPromise()}async function gC(t,e){const n=Su(t,!1).get(e),r=await new qa(n).toPromise();return r===void 0?null:r.value}function p0(t,e){const n=Su(t,!0).delete(e);return new qa(n).toPromise()}const yC=800,xC=3;class J_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tu._getInstance(fC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await dC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lf();return await f0(e,zc,"1"),await p0(e,zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Su(s,!1).getAll();return new qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J_.type="LOCAL";const vC=J_;new Ba(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e){return e?Hn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends Lp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ei(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _C(t){return z_(t.auth,new Fp(t),t.bypassAuthState)}function bC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),Gk(n,new Fp(t),t.bypassAuthState)}async function EC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),Wk(n,new Fp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(l))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _C;case"linkViaPopup":case"linkViaRedirect":return EC;case"reauthViaPopup":case"reauthViaRedirect":return bC;default:hn(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Ba(2e3,1e4);class fi extends X_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,fi.currentPopupAction&&fi.currentPopupAction.cancel(),fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NC.get())};e()}}fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="pendingRedirect",tc=new Map;class SC extends X_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const r=await IC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IC(t,e){const n=AC(e),r=CC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function kC(t,e){tc.set(t._key(),e)}function CC(t){return Hn(t._redirectPersistence)}function AC(t){return ec(TC,t.config.apiKey,t.name)}async function jC(t,e,n=!1){if(Pt(t.app))return Promise.reject(Kn(t));const r=ss(t),s=wC(r,e),o=await new SC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=10*60*1e3;class PC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Z_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RC&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Z_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t,e={}){return mn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VC=/^https?/;async function MC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OC(t);for(const n of e)try{if(FC(n))return}catch{}hn(t,"unauthorized-domain")}function FC(t){const e=of(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VC.test(n))return!1;if(LC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Ba(3e4,6e4);function g0(){const t=Sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BC(t){return new Promise((e,n)=>{var s,i,o;function r(){g0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g0(),n(Tn(t,"network-request-failed"))},timeout:UC.get()})}if((i=(s=Sn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Sn().gapi)!=null&&o.load)r();else{const u=Tk("iframefcb");return Sn()[u]=()=>{gapi.load?r():n(Tn(t,"network-request-failed"))},V_(`${Nk()}?onload=${u}`).catch(l=>n(l))}}).catch(e=>{throw nc=null,e})}let nc=null;function zC(t){return nc=nc||BC(t),nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new Ba(5e3,15e3),qC="__/auth/iframe",HC="emulator/auth/iframe",WC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KC(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pp(e,HC):`https://${t.config.authDomain}/${qC}`,r={apiKey:e.apiKey,appName:t.name,v:zs},s=GC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ua(r).slice(1)}`}async function QC(t){const e=await zC(t),n=Sn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:KC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),u=Sn().setTimeout(()=>{i(o)},$C.get());function l(){Sn().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JC=500,XC=600,ZC="_blank",eA="http://localhost";class y0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tA(t,e,n,r=JC,s=XC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const l={...YC,width:r.toString(),height:s.toString(),top:i,left:o},d=ht().toLowerCase();n&&(u=A_(d)?ZC:n),k_(d)&&(e=e||eA,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[x,N])=>`${m}${x}=${N},`,"");if(mk(d)&&u!=="_self")return nA(e||"",u),new y0(null);const p=window.open(e||"",u,h);K(p,t,"popup-blocked");try{p.focus()}catch{}return new y0(p)}function nA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="__/auth/handler",sA="emulator/auth/handler",iA=encodeURIComponent("fac");async function x0(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zs,eventId:s};if(e instanceof U_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof $a){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const l=await t._getAppCheckToken(),d=l?`#${iA}=${encodeURIComponent(l)}`:"";return`${oA(t)}?${Ua(u).slice(1)}${d}`}function oA({config:t}){return t.emulator?Pp(t,sA):`https://${t.authDomain}/${rA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="webStorageSupport";class aA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G_,this._completeRedirectFn=jC,this._overrideRedirectResult=kC}async _openPopup(e,n,r,s){var o;nr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await x0(e,n,r,of(),s);return tA(e,i,Mp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await x0(e,n,r,of(),s);return uC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(nr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QC(e),r=new PC(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xd,{type:Xd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Xd];i!==void 0&&n(!!i),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return O_()||C_()||Op()}}const lA=aA;var v0="@firebase/auth",w0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dA(t){js(new Hr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L_(t)},d=new _k(r,s,i,l);return jk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),js(new Hr("auth-internal",e=>{const n=ss(e.getProvider("auth").getImmediate());return(r=>new cA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(v0,w0,uA(t)),Nn(v0,w0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=5*60,fA=f_("authIdTokenMaxAge")||hA;let _0=null;const pA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fA)return;const s=n==null?void 0:n.token;_0!==s&&(_0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function mA(t=jp()){const e=Eu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ak(t,{popupRedirectResolver:lA,persistence:[vC,aC,G_]}),r=f_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=pA(i.toString());nC(n,o,()=>o(n.currentUser)),tC(n,u=>o(u))}}const s=u_("auth");return s&&Rk(n,`http://${s}`),n}function gA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}bk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",gA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dA("Browser");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,eb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,b){function T(){}T.prototype=b.prototype,E.F=b.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(I,A,R){for(var k=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)k[Je-2]=arguments[Je];return b.prototype[A].apply(I,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,b,T){T||(T=0);const I=Array(16);if(typeof b=="string")for(var A=0;A<16;++A)I[A]=b.charCodeAt(T++)|b.charCodeAt(T++)<<8|b.charCodeAt(T++)<<16|b.charCodeAt(T++)<<24;else for(A=0;A<16;++A)I[A]=b[T++]|b[T++]<<8|b[T++]<<16|b[T++]<<24;b=E.g[0],T=E.g[1],A=E.g[2];let R=E.g[3],k;k=b+(R^T&(A^R))+I[0]+3614090360&4294967295,b=T+(k<<7&4294967295|k>>>25),k=R+(A^b&(T^A))+I[1]+3905402710&4294967295,R=b+(k<<12&4294967295|k>>>20),k=A+(T^R&(b^T))+I[2]+606105819&4294967295,A=R+(k<<17&4294967295|k>>>15),k=T+(b^A&(R^b))+I[3]+3250441966&4294967295,T=A+(k<<22&4294967295|k>>>10),k=b+(R^T&(A^R))+I[4]+4118548399&4294967295,b=T+(k<<7&4294967295|k>>>25),k=R+(A^b&(T^A))+I[5]+1200080426&4294967295,R=b+(k<<12&4294967295|k>>>20),k=A+(T^R&(b^T))+I[6]+2821735955&4294967295,A=R+(k<<17&4294967295|k>>>15),k=T+(b^A&(R^b))+I[7]+4249261313&4294967295,T=A+(k<<22&4294967295|k>>>10),k=b+(R^T&(A^R))+I[8]+1770035416&4294967295,b=T+(k<<7&4294967295|k>>>25),k=R+(A^b&(T^A))+I[9]+2336552879&4294967295,R=b+(k<<12&4294967295|k>>>20),k=A+(T^R&(b^T))+I[10]+4294925233&4294967295,A=R+(k<<17&4294967295|k>>>15),k=T+(b^A&(R^b))+I[11]+2304563134&4294967295,T=A+(k<<22&4294967295|k>>>10),k=b+(R^T&(A^R))+I[12]+1804603682&4294967295,b=T+(k<<7&4294967295|k>>>25),k=R+(A^b&(T^A))+I[13]+4254626195&4294967295,R=b+(k<<12&4294967295|k>>>20),k=A+(T^R&(b^T))+I[14]+2792965006&4294967295,A=R+(k<<17&4294967295|k>>>15),k=T+(b^A&(R^b))+I[15]+1236535329&4294967295,T=A+(k<<22&4294967295|k>>>10),k=b+(A^R&(T^A))+I[1]+4129170786&4294967295,b=T+(k<<5&4294967295|k>>>27),k=R+(T^A&(b^T))+I[6]+3225465664&4294967295,R=b+(k<<9&4294967295|k>>>23),k=A+(b^T&(R^b))+I[11]+643717713&4294967295,A=R+(k<<14&4294967295|k>>>18),k=T+(R^b&(A^R))+I[0]+3921069994&4294967295,T=A+(k<<20&4294967295|k>>>12),k=b+(A^R&(T^A))+I[5]+3593408605&4294967295,b=T+(k<<5&4294967295|k>>>27),k=R+(T^A&(b^T))+I[10]+38016083&4294967295,R=b+(k<<9&4294967295|k>>>23),k=A+(b^T&(R^b))+I[15]+3634488961&4294967295,A=R+(k<<14&4294967295|k>>>18),k=T+(R^b&(A^R))+I[4]+3889429448&4294967295,T=A+(k<<20&4294967295|k>>>12),k=b+(A^R&(T^A))+I[9]+568446438&4294967295,b=T+(k<<5&4294967295|k>>>27),k=R+(T^A&(b^T))+I[14]+3275163606&4294967295,R=b+(k<<9&4294967295|k>>>23),k=A+(b^T&(R^b))+I[3]+4107603335&4294967295,A=R+(k<<14&4294967295|k>>>18),k=T+(R^b&(A^R))+I[8]+1163531501&4294967295,T=A+(k<<20&4294967295|k>>>12),k=b+(A^R&(T^A))+I[13]+2850285829&4294967295,b=T+(k<<5&4294967295|k>>>27),k=R+(T^A&(b^T))+I[2]+4243563512&4294967295,R=b+(k<<9&4294967295|k>>>23),k=A+(b^T&(R^b))+I[7]+1735328473&4294967295,A=R+(k<<14&4294967295|k>>>18),k=T+(R^b&(A^R))+I[12]+2368359562&4294967295,T=A+(k<<20&4294967295|k>>>12),k=b+(T^A^R)+I[5]+4294588738&4294967295,b=T+(k<<4&4294967295|k>>>28),k=R+(b^T^A)+I[8]+2272392833&4294967295,R=b+(k<<11&4294967295|k>>>21),k=A+(R^b^T)+I[11]+1839030562&4294967295,A=R+(k<<16&4294967295|k>>>16),k=T+(A^R^b)+I[14]+4259657740&4294967295,T=A+(k<<23&4294967295|k>>>9),k=b+(T^A^R)+I[1]+2763975236&4294967295,b=T+(k<<4&4294967295|k>>>28),k=R+(b^T^A)+I[4]+1272893353&4294967295,R=b+(k<<11&4294967295|k>>>21),k=A+(R^b^T)+I[7]+4139469664&4294967295,A=R+(k<<16&4294967295|k>>>16),k=T+(A^R^b)+I[10]+3200236656&4294967295,T=A+(k<<23&4294967295|k>>>9),k=b+(T^A^R)+I[13]+681279174&4294967295,b=T+(k<<4&4294967295|k>>>28),k=R+(b^T^A)+I[0]+3936430074&4294967295,R=b+(k<<11&4294967295|k>>>21),k=A+(R^b^T)+I[3]+3572445317&4294967295,A=R+(k<<16&4294967295|k>>>16),k=T+(A^R^b)+I[6]+76029189&4294967295,T=A+(k<<23&4294967295|k>>>9),k=b+(T^A^R)+I[9]+3654602809&4294967295,b=T+(k<<4&4294967295|k>>>28),k=R+(b^T^A)+I[12]+3873151461&4294967295,R=b+(k<<11&4294967295|k>>>21),k=A+(R^b^T)+I[15]+530742520&4294967295,A=R+(k<<16&4294967295|k>>>16),k=T+(A^R^b)+I[2]+3299628645&4294967295,T=A+(k<<23&4294967295|k>>>9),k=b+(A^(T|~R))+I[0]+4096336452&4294967295,b=T+(k<<6&4294967295|k>>>26),k=R+(T^(b|~A))+I[7]+1126891415&4294967295,R=b+(k<<10&4294967295|k>>>22),k=A+(b^(R|~T))+I[14]+2878612391&4294967295,A=R+(k<<15&4294967295|k>>>17),k=T+(R^(A|~b))+I[5]+4237533241&4294967295,T=A+(k<<21&4294967295|k>>>11),k=b+(A^(T|~R))+I[12]+1700485571&4294967295,b=T+(k<<6&4294967295|k>>>26),k=R+(T^(b|~A))+I[3]+2399980690&4294967295,R=b+(k<<10&4294967295|k>>>22),k=A+(b^(R|~T))+I[10]+4293915773&4294967295,A=R+(k<<15&4294967295|k>>>17),k=T+(R^(A|~b))+I[1]+2240044497&4294967295,T=A+(k<<21&4294967295|k>>>11),k=b+(A^(T|~R))+I[8]+1873313359&4294967295,b=T+(k<<6&4294967295|k>>>26),k=R+(T^(b|~A))+I[15]+4264355552&4294967295,R=b+(k<<10&4294967295|k>>>22),k=A+(b^(R|~T))+I[6]+2734768916&4294967295,A=R+(k<<15&4294967295|k>>>17),k=T+(R^(A|~b))+I[13]+1309151649&4294967295,T=A+(k<<21&4294967295|k>>>11),k=b+(A^(T|~R))+I[4]+4149444226&4294967295,b=T+(k<<6&4294967295|k>>>26),k=R+(T^(b|~A))+I[11]+3174756917&4294967295,R=b+(k<<10&4294967295|k>>>22),k=A+(b^(R|~T))+I[2]+718787259&4294967295,A=R+(k<<15&4294967295|k>>>17),k=T+(R^(A|~b))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+b&4294967295,E.g[1]=E.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.v=function(E,b){b===void 0&&(b=E.length);const T=b-this.blockSize,I=this.C;let A=this.h,R=0;for(;R<b;){if(A==0)for(;R<=T;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<b;)if(I[A++]=E.charCodeAt(R++),A==this.blockSize){s(this,I),A=0;break}}else for(;R<b;)if(I[A++]=E[R++],A==this.blockSize){s(this,I),A=0;break}}this.h=A,this.o+=b},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var b=1;b<E.length-8;++b)E[b]=0;b=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=b&255,b/=256;for(this.v(E),E=Array(16),b=0,T=0;T<4;++T)for(let I=0;I<32;I+=8)E[b++]=this.g[T]>>>I&255;return E};function i(E,b){var T=u;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=b(E)}function o(E,b){this.h=b;const T=[];let I=!0;for(let A=E.length-1;A>=0;A--){const R=E[A]|0;I&&R==b||(T[A]=R,I=!1)}this.g=T}var u={};function l(E){return-128<=E&&E<128?i(E,function(b){return new o([b|0],b<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return j(d(-E));const b=[];let T=1;for(let I=0;E>=T;I++)b[I]=E/T|0,T*=4294967296;return new o(b,0)}function h(E,b){if(E.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(E.charAt(0)=="-")return j(h(E.substring(1),b));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(b,8));let I=p;for(let R=0;R<E.length;R+=8){var A=Math.min(8,E.length-R);const k=parseInt(E.substring(R,R+A),b);A<8?(A=d(Math.pow(b,A)),I=I.j(A).add(d(k))):(I=I.j(T),I=I.add(d(k)))}return I}var p=l(0),m=l(1),x=l(16777216);t=o.prototype,t.m=function(){if(C(this))return-j(this).m();let E=0,b=1;for(let T=0;T<this.g.length;T++){const I=this.i(T);E+=(I>=0?I:4294967296+I)*b,b*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(C(this))return"-"+j(this).toString(E);const b=d(Math.pow(E,6));var T=this;let I="";for(;;){const A=D(T,b).g;T=w(T,A.j(b));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=A,N(T))return R+I;for(;R.length<6;)R="0"+R;I=R+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(let b=0;b<E.g.length;b++)if(E.g[b]!=0)return!1;return!0}function C(E){return E.h==-1}t.l=function(E){return E=w(this,E),C(E)?-1:N(E)?0:1};function j(E){const b=E.g.length,T=[];for(let I=0;I<b;I++)T[I]=~E.g[I];return new o(T,~E.h).add(m)}t.abs=function(){return C(this)?j(this):this},t.add=function(E){const b=Math.max(this.g.length,E.g.length),T=[];let I=0;for(let A=0;A<=b;A++){let R=I+(this.i(A)&65535)+(E.i(A)&65535),k=(R>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);I=k>>>16,R&=65535,k&=65535,T[A]=k<<16|R}return new o(T,T[T.length-1]&-2147483648?-1:0)};function w(E,b){return E.add(j(b))}t.j=function(E){if(N(this)||N(E))return p;if(C(this))return C(E)?j(this).j(j(E)):j(j(this).j(E));if(C(E))return j(this.j(j(E)));if(this.l(x)<0&&E.l(x)<0)return d(this.m()*E.m());const b=this.g.length+E.g.length,T=[];for(var I=0;I<2*b;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(let A=0;A<E.g.length;A++){const R=this.i(I)>>>16,k=this.i(I)&65535,Je=E.i(A)>>>16,Vn=E.i(A)&65535;T[2*I+2*A]+=k*Vn,_(T,2*I+2*A),T[2*I+2*A+1]+=R*Vn,_(T,2*I+2*A+1),T[2*I+2*A+1]+=k*Je,_(T,2*I+2*A+1),T[2*I+2*A+2]+=R*Je,_(T,2*I+2*A+2)}for(E=0;E<b;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=b;E<2*b;E++)T[E]=0;return new o(T,0)};function _(E,b){for(;(E[b]&65535)!=E[b];)E[b+1]+=E[b]>>>16,E[b]&=65535,b++}function y(E,b){this.g=E,this.h=b}function D(E,b){if(N(b))throw Error("division by zero");if(N(E))return new y(p,p);if(C(E))return b=D(j(E),b),new y(j(b.g),j(b.h));if(C(b))return b=D(E,j(b)),new y(j(b.g),b.h);if(E.g.length>30){if(C(E)||C(b))throw Error("slowDivide_ only works with positive integers.");for(var T=m,I=b;I.l(E)<=0;)T=M(T),I=M(I);var A=F(T,1),R=F(I,1);for(I=F(I,2),T=F(T,2);!N(I);){var k=R.add(I);k.l(E)<=0&&(A=A.add(T),R=k),I=F(I,1),T=F(T,1)}return b=w(E,A.j(b)),new y(A,b)}for(A=p;E.l(b)>=0;){for(T=Math.max(1,Math.floor(E.m()/b.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),R=d(T),k=R.j(b);C(k)||k.l(E)>0;)T-=I,R=d(T),k=R.j(b);N(R)&&(R=m),A=A.add(R),E=w(E,k)}return new y(A,E)}t.B=function(E){return D(this,E).h},t.and=function(E){const b=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<b;I++)T[I]=this.i(I)&E.i(I);return new o(T,this.h&E.h)},t.or=function(E){const b=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<b;I++)T[I]=this.i(I)|E.i(I);return new o(T,this.h|E.h)},t.xor=function(E){const b=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<b;I++)T[I]=this.i(I)^E.i(I);return new o(T,this.h^E.h)};function M(E){const b=E.g.length+1,T=[];for(let I=0;I<b;I++)T[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(T,E.h)}function F(E,b){const T=b>>5;b%=32;const I=E.g.length-T,A=[];for(let R=0;R<I;R++)A[R]=b>0?E.i(R+T)>>>b|E.i(R+T+1)<<32-b:E.i(R+T);return new o(A,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,eb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Br=o}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tb,Po,nb,rc,cf,rb,sb,ib;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rl=="object"&&Rl];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var g=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var P=c[v];if(!(P in g))break e;g=g[P]}c=c[c.length-1],v=g[c],f=f(v),f!=v&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(f){var g=[],v;for(v in f)Object.prototype.hasOwnProperty.call(f,v)&&g.push([v,f[v]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function l(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){return d=l,d.apply(null,arguments)}function h(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function p(c,f){function g(){}g.prototype=f.prototype,c.Z=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(v,P,O){for(var B=Array(arguments.length-2),te=2;te<arguments.length;te++)B[te-2]=arguments[te];return f.prototype[P].apply(v,B)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function x(c){const f=c.length;if(f>0){const g=Array(f);for(let v=0;v<f;v++)g[v]=c[v];return g}return[]}function N(c,f){for(let v=1;v<arguments.length;v++){const P=arguments[v];var g=typeof P;if(g=g!="object"?g:P?Array.isArray(P)?"array":g:"null",g=="array"||g=="object"&&typeof P.length=="number"){g=c.length||0;const O=P.length||0;c.length=g+O;for(let B=0;B<O;B++)c[g+B]=P[B]}else c.push(P)}}class C{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function j(c){o.setTimeout(()=>{throw c},0)}function w(){var c=E;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class _{constructor(){this.h=this.g=null}add(f,g){const v=y.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var y=new C(()=>new D,c=>c.reset());class D{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,E=new _,b=()=>{const c=Promise.resolve(void 0);M=()=>{c.then(T)}};function T(){for(var c;c=w();){try{c.h.call(c.g)}catch(g){j(g)}var f=y;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}F=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return c}();function k(c){return/^[\s\xa0]*$/.test(c)}function Je(c,f){A.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}p(Je,A),Je.prototype.init=function(c,f){const g=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Vn="closure_listenable_"+(Math.random()*1e6|0),Zi=0;function eo(c,f,g,v,P){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=P,this.key=++Zi,this.da=this.fa=!1}function $(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Y(c,f,g){for(const v in c)f.call(g,c[v],v,c)}function ee(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function _e(c){const f={};for(const g in c)f[g]=c[g];return f}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function as(c,f){let g,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(g in v)c[g]=v[g];for(let O=0;O<Pe.length;O++)g=Pe[O],Object.prototype.hasOwnProperty.call(v,g)&&(c[g]=v[g])}}function Bt(c){this.src=c,this.g={},this.h=0}Bt.prototype.add=function(c,f,g,v,P){const O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);const B=en(c,f,v,P);return B>-1?(f=c[B],g||(f.fa=!1)):(f=new eo(f,this.src,O,!!v,P),f.fa=g,c.push(f)),f};function ls(c,f){const g=f.type;if(g in c.g){var v=c.g[g],P=Array.prototype.indexOf.call(v,f,void 0),O;(O=P>=0)&&Array.prototype.splice.call(v,P,1),O&&($(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function en(c,f,g,v){for(let P=0;P<c.length;++P){const O=c[P];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==v)return P}return-1}var cr="closure_lm_"+(Math.random()*1e6|0),Ju={};function Rm(c,f,g,v,P){if(Array.isArray(f)){for(let O=0;O<f.length;O++)Rm(c,f[O],g,v,P);return null}return g=Om(g),c&&c[Vn]?c.J(f,g,u(v)?!!v.capture:!1,P):BE(c,f,g,!1,v,P)}function BE(c,f,g,v,P,O){if(!f)throw Error("Invalid event type");const B=u(P)?!!P.capture:!!P;let te=Zu(c);if(te||(c[cr]=te=new Bt(c)),g=te.add(f,g,v,B,O),g.proxy)return g;if(v=zE(),g.proxy=v,v.src=c,v.listener=g,c.addEventListener)R||(P=B),P===void 0&&(P=!1),c.addEventListener(f.toString(),v,P);else if(c.attachEvent)c.attachEvent(Dm(f.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function zE(){function c(g){return f.call(c.src,c.listener,g)}const f=$E;return c}function Pm(c,f,g,v,P){if(Array.isArray(f))for(var O=0;O<f.length;O++)Pm(c,f[O],g,v,P);else v=u(v)?!!v.capture:!!v,g=Om(g),c&&c[Vn]?(c=c.i,O=String(f).toString(),O in c.g&&(f=c.g[O],g=en(f,g,v,P),g>-1&&($(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete c.g[O],c.h--)))):c&&(c=Zu(c))&&(f=c.g[f.toString()],c=-1,f&&(c=en(f,g,v,P)),(g=c>-1?f[c]:null)&&Xu(g))}function Xu(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Vn])ls(f.i,c);else{var g=c.type,v=c.proxy;f.removeEventListener?f.removeEventListener(g,v,c.capture):f.detachEvent?f.detachEvent(Dm(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=Zu(f))?(ls(g,c),g.h==0&&(g.src=null,f[cr]=null)):$(c)}}}function Dm(c){return c in Ju?Ju[c]:Ju[c]="on"+c}function $E(c,f){if(c.da)c=!0;else{f=new Je(f,this);const g=c.listener,v=c.ha||c.src;c.fa&&Xu(c),c=g.call(v,f)}return c}function Zu(c){return c=c[cr],c instanceof Bt?c:null}var ed="__closure_events_fn_"+(Math.random()*1e9>>>0);function Om(c){return typeof c=="function"?c:(c[ed]||(c[ed]=function(f){return c.handleEvent(f)}),c[ed])}function st(){I.call(this),this.i=new Bt(this),this.M=this,this.G=null}p(st,I),st.prototype[Vn]=!0,st.prototype.removeEventListener=function(c,f,g,v){Pm(this,c,f,g,v)};function ft(c,f){var g,v=c.G;if(v)for(g=[];v;v=v.G)g.push(v);if(c=c.M,v=f.type||f,typeof f=="string")f=new A(f,c);else if(f instanceof A)f.target=f.target||c;else{var P=f;f=new A(v,c),as(f,P)}P=!0;let O,B;if(g)for(B=g.length-1;B>=0;B--)O=f.g=g[B],P=tl(O,v,!0,f)&&P;if(O=f.g=c,P=tl(O,v,!0,f)&&P,P=tl(O,v,!1,f)&&P,g)for(B=0;B<g.length;B++)O=f.g=g[B],P=tl(O,v,!1,f)&&P}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const g=c.g[f];for(let v=0;v<g.length;v++)$(g[v]);delete c.g[f],c.h--}}this.G=null},st.prototype.J=function(c,f,g,v){return this.i.add(String(c),f,!1,g,v)},st.prototype.K=function(c,f,g,v){return this.i.add(String(c),f,!0,g,v)};function tl(c,f,g,v){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let P=!0;for(let O=0;O<f.length;++O){const B=f[O];if(B&&!B.da&&B.capture==g){const te=B.listener,ze=B.ha||B.src;B.fa&&ls(c.i,B),P=te.call(ze,v)!==!1&&P}}return P&&!v.defaultPrevented}function qE(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function Lm(c){c.g=qE(()=>{c.g=null,c.i&&(c.i=!1,Lm(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class HE extends I{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Lm(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function to(c){I.call(this),this.h=c,this.g={}}p(to,I);var Vm=[];function Mm(c){Y(c.g,function(f,g){this.g.hasOwnProperty(g)&&Xu(f)},c),c.g={}}to.prototype.N=function(){to.Z.N.call(this),Mm(this)},to.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var td=o.JSON.stringify,WE=o.JSON.parse,GE=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Fm(){}function Um(){}var no={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nd(){A.call(this,"d")}p(nd,A);function rd(){A.call(this,"c")}p(rd,A);var cs={},Bm=null;function nl(){return Bm=Bm||new st}cs.Ia="serverreachability";function zm(c){A.call(this,cs.Ia,c)}p(zm,A);function ro(c){const f=nl();ft(f,new zm(f))}cs.STAT_EVENT="statevent";function $m(c,f){A.call(this,cs.STAT_EVENT,c),this.stat=f}p($m,A);function pt(c){const f=nl();ft(f,new $m(f,c))}cs.Ja="timingevent";function qm(c,f){A.call(this,cs.Ja,c),this.size=f}p(qm,A);function so(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function io(){this.g=!0}io.prototype.ua=function(){this.g=!1};function KE(c,f,g,v,P,O){c.info(function(){if(c.g)if(O){var B="",te=O.split("&");for(let pe=0;pe<te.length;pe++){var ze=te[pe].split("=");if(ze.length>1){const We=ze[0];ze=ze[1];const yn=We.split("_");B=yn.length>=2&&yn[1]=="type"?B+(We+"="+ze+"&"):B+(We+"=redacted&")}}}else B=null;else B=O;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+f+`
`+g+`
`+B})}function QE(c,f,g,v,P,O,B){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+f+`
`+g+`
`+O+" "+B})}function Ws(c,f,g,v){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+JE(c,g)+(v?" "+v:"")})}function YE(c,f){c.info(function(){return"TIMEOUT: "+f})}io.prototype.info=function(){};function JE(c,f){if(!c.g)return f;if(!f)return null;try{const O=JSON.parse(f);if(O){for(c=0;c<O.length;c++)if(Array.isArray(O[c])){var g=O[c];if(!(g.length<2)){var v=g[1];if(Array.isArray(v)&&!(v.length<1)){var P=v[0];if(P!="noop"&&P!="stop"&&P!="close")for(let B=1;B<v.length;B++)v[B]=""}}}}return td(O)}catch{return f}}var rl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wm;function sd(){}p(sd,Fm),sd.prototype.g=function(){return new XMLHttpRequest},Wm=new sd;function oo(c){return encodeURIComponent(String(c))}function XE(c){var f=1;c=c.split(":");const g=[];for(;f>0&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function ur(c,f,g,v){this.j=c,this.i=f,this.l=g,this.S=v||1,this.V=new to(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gm}function Gm(){this.i=null,this.g="",this.h=!1}var Km={},id={};function od(c,f,g){c.M=1,c.A=il(gn(f)),c.u=g,c.R=!0,Qm(c,null)}function Qm(c,f){c.F=Date.now(),sl(c),c.B=gn(c.A);var g=c.B,v=c.S;Array.isArray(v)||(v=[String(v)]),lg(g.i,"t",v),c.C=0,g=c.j.L,c.h=new Gm,c.g=Sg(c.j,g?f:null,!c.u),c.P>0&&(c.O=new HE(d(c.Y,c,c.g),c.P)),f=c.V,g=c.g,v=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(Vm[0]=P.toString()),P=Vm);for(let O=0;O<P.length;O++){const B=Rm(g,P[O],v||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=c.J?_e(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),ro(),KE(c.i,c.v,c.B,c.l,c.S,c.u)}ur.prototype.ba=function(c){c=c.target;const f=this.O;f&&fr(c)==3?f.j():this.Y(c)},ur.prototype.Y=function(c){try{if(c==this.g)e:{const te=fr(this.g),ze=this.g.ya(),pe=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||mg(this.g)))){this.K||te!=4||ze==7||(ze==8||pe<=0?ro(3):ro(2)),ad(this);var f=this.g.ca();this.X=f;var g=ZE(this);if(this.o=f==200,QE(this.i,this.v,this.B,this.l,this.S,te,f),this.o){if(this.U&&!this.L){t:{if(this.g){var v,P=this.g;if((v=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(v)){var O=v;break t}}O=null}if(c=O)Ws(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ld(this,c);else{this.o=!1,this.m=3,pt(12),us(this),ao(this);break e}}if(this.R){c=!0;let We;for(;!this.K&&this.C<g.length;)if(We=e1(this,g),We==id){te==4&&(this.m=4,pt(14),c=!1),Ws(this.i,this.l,null,"[Incomplete Response]");break}else if(We==Km){this.m=4,pt(15),Ws(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else Ws(this.i,this.l,We,null),ld(this,We);if(Ym(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||g.length!=0||this.h.h||(this.m=1,pt(16),c=!1),this.o=this.o&&c,!c)Ws(this.i,this.l,g,"[Invalid Chunked Response]"),us(this),ao(this);else if(g.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),gd(B),B.P=!0,pt(11))}}else Ws(this.i,this.l,g,null),ld(this,g);te==4&&us(this),this.o&&!this.K&&(te==4?bg(this.j,this):(this.o=!1,sl(this)))}else p1(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),us(this),ao(this)}}}catch{}finally{}};function ZE(c){if(!Ym(c))return c.g.la();const f=mg(c.g);if(f==="")return"";let g="";const v=f.length,P=fr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return us(c),ao(c),"";c.h.i=new o.TextDecoder}for(let O=0;O<v;O++)c.h.h=!0,g+=c.h.i.decode(f[O],{stream:!(P&&O==v-1)});return f.length=0,c.h.g+=g,c.C=0,c.h.g}function Ym(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function e1(c,f){var g=c.C,v=f.indexOf(`
`,g);return v==-1?id:(g=Number(f.substring(g,v)),isNaN(g)?Km:(v+=1,v+g>f.length?id:(f=f.slice(v,v+g),c.C=v+g,f)))}ur.prototype.cancel=function(){this.K=!0,us(this)};function sl(c){c.T=Date.now()+c.H,Jm(c,c.H)}function Jm(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=so(d(c.aa,c),f)}function ad(c){c.D&&(o.clearTimeout(c.D),c.D=null)}ur.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(YE(this.i,this.B),this.M!=2&&(ro(),pt(17)),us(this),this.m=2,ao(this)):Jm(this,this.T-c)};function ao(c){c.j.I==0||c.K||bg(c.j,c)}function us(c){ad(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,Mm(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function ld(c,f){try{var g=c.j;if(g.I!=0&&(g.g==c||cd(g.h,c))){if(!c.L&&cd(g.h,c)&&g.I==3){try{var v=g.Ba.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)ul(g),ll(g);else break e;md(g),pt(18)}}else g.xa=P[1],0<g.xa-g.K&&P[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=so(d(g.Va,g),6e3));eg(g.h)<=1&&g.ta&&(g.ta=void 0)}else hs(g,11)}else if((c.L||g.g==c)&&ul(g),!k(f))for(P=g.Ba.g.parse(f),f=0;f<P.length;f++){let pe=P[f];const We=pe[0];if(!(We<=g.K))if(g.K=We,pe=pe[1],g.I==2)if(pe[0]=="c"){g.M=pe[1],g.ba=pe[2];const yn=pe[3];yn!=null&&(g.ka=yn,g.j.info("VER="+g.ka));const fs=pe[4];fs!=null&&(g.za=fs,g.j.info("SVER="+g.za));const pr=pe[5];pr!=null&&typeof pr=="number"&&pr>0&&(v=1.5*pr,g.O=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const mr=c.g;if(mr){const hl=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var O=v.h;O.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ud(O,O.h),O.h=null))}if(v.G){const yd=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;yd&&(v.wa=yd,ye(v.J,v.G,yd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),v=g;var B=c;if(v.na=Tg(v,v.L?v.ba:null,v.W),B.L){tg(v.h,B);var te=B,ze=v.O;ze&&(te.H=ze),te.D&&(ad(te),sl(te)),v.g=B}else wg(v);g.i.length>0&&cl(g)}else pe[0]!="stop"&&pe[0]!="close"||hs(g,7);else g.I==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?hs(g,7):pd(g):pe[0]!="noop"&&g.l&&g.l.qa(pe),g.A=0)}}ro(4)}catch{}}var t1=class{constructor(c,f){this.g=c,this.map=f}};function Xm(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zm(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function eg(c){return c.h?1:c.g?c.g.size:0}function cd(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function ud(c,f){c.g?c.g.add(f):c.h=f}function tg(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Xm.prototype.cancel=function(){if(this.i=ng(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ng(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.G);return f}return x(c.i)}var rg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n1(c,f){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const v=c[g].indexOf("=");let P,O=null;v>=0?(P=c[g].substring(0,v),O=c[g].substring(v+1)):P=c[g],f(P,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function dr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof dr?(this.l=c.l,lo(this,c.j),this.o=c.o,this.g=c.g,co(this,c.u),this.h=c.h,dd(this,cg(c.i)),this.m=c.m):c&&(f=String(c).match(rg))?(this.l=!1,lo(this,f[1]||"",!0),this.o=uo(f[2]||""),this.g=uo(f[3]||"",!0),co(this,f[4]),this.h=uo(f[5]||"",!0),dd(this,f[6]||"",!0),this.m=uo(f[7]||"")):(this.l=!1,this.i=new fo(null,this.l))}dr.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(ho(f,sg,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(ho(f,sg,!0),"@"),c.push(oo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(ho(g,g.charAt(0)=="/"?i1:s1,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",ho(g,a1)),c.join("")},dr.prototype.resolve=function(c){const f=gn(this);let g=!!c.j;g?lo(f,c.j):g=!!c.o,g?f.o=c.o:g=!!c.g,g?f.g=c.g:g=c.u!=null;var v=c.h;if(g)co(f,c.u);else if(g=!!c.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var P=f.h.lastIndexOf("/");P!=-1&&(v=f.h.slice(0,P+1)+v)}if(P=v,P==".."||P==".")v="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){v=P.lastIndexOf("/",0)==0,P=P.split("/");const O=[];for(let B=0;B<P.length;){const te=P[B++];te=="."?v&&B==P.length&&O.push(""):te==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),v&&B==P.length&&O.push("")):(O.push(te),v=!0)}v=O.join("/")}else v=P}return g?f.h=v:g=c.i.toString()!=="",g?dd(f,cg(c.i)):g=!!c.m,g&&(f.m=c.m),f};function gn(c){return new dr(c)}function lo(c,f,g){c.j=g?uo(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function co(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function dd(c,f,g){f instanceof fo?(c.i=f,l1(c.i,c.l)):(g||(f=ho(f,o1)),c.i=new fo(f,c.l))}function ye(c,f,g){c.i.set(f,g)}function il(c){return ye(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function uo(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ho(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,r1),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function r1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sg=/[#\/\?@]/g,s1=/[#\?:]/g,i1=/[#\?]/g,o1=/[#\?@]/g,a1=/#/g;function fo(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ds(c){c.g||(c.g=new Map,c.h=0,c.i&&n1(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=fo.prototype,t.add=function(c,f){ds(this),this.i=null,c=Gs(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function ig(c,f){ds(c),f=Gs(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function og(c,f){return ds(c),f=Gs(c,f),c.g.has(f)}t.forEach=function(c,f){ds(this),this.g.forEach(function(g,v){g.forEach(function(P){c.call(f,P,v,this)},this)},this)};function ag(c,f){ds(c);let g=[];if(typeof f=="string")og(c,f)&&(g=g.concat(c.g.get(Gs(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)g=g.concat(c[f]);return g}t.set=function(c,f){return ds(this),this.i=null,c=Gs(this,c),og(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=ag(this,c),c.length>0?String(c[0]):f):f};function lg(c,f,g){ig(c,f),g.length>0&&(c.i=null,c.g.set(Gs(c,f),x(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let v=0;v<f.length;v++){var g=f[v];const P=oo(g);g=ag(this,g);for(let O=0;O<g.length;O++){let B=P;g[O]!==""&&(B+="="+oo(g[O])),c.push(B)}}return this.i=c.join("&")};function cg(c){const f=new fo;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function Gs(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function l1(c,f){f&&!c.j&&(ds(c),c.i=null,c.g.forEach(function(g,v){const P=v.toLowerCase();v!=P&&(ig(this,v),lg(this,P,g))},c)),c.j=f}function c1(c,f){const g=new io;if(o.Image){const v=new Image;v.onload=h(hr,g,"TestLoadImage: loaded",!0,f,v),v.onerror=h(hr,g,"TestLoadImage: error",!1,f,v),v.onabort=h(hr,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=h(hr,g,"TestLoadImage: timeout",!1,f,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else f(!1)}function u1(c,f){const g=new io,v=new AbortController,P=setTimeout(()=>{v.abort(),hr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:v.signal}).then(O=>{clearTimeout(P),O.ok?hr(g,"TestPingServer: ok",!0,f):hr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),hr(g,"TestPingServer: error",!1,f)})}function hr(c,f,g,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(g)}catch{}}function d1(){this.g=new GE}function hd(c){this.i=c.Sb||null,this.h=c.ab||!1}p(hd,Fm),hd.prototype.g=function(){return new ol(this.i,this.h)};function ol(c,f){st.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(ol,st),t=ol.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,mo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,po(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mo(this)),this.g&&(this.readyState=3,mo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ug(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ug(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?po(this):mo(this),this.readyState==3&&ug(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,po(this))},t.Na=function(c){this.g&&(this.response=c,po(this))},t.ga=function(){this.g&&po(this)};function po(c){c.readyState=4,c.l=null,c.j=null,c.B=null,mo(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function mo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function dg(c){let f="";return Y(c,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function fd(c,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=dg(g),typeof c=="string"?g!=null&&oo(g):ye(c,f,g))}function Ce(c){st.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ce,st);var h1=/^https?$/i,f1=["POST","PUT"];t=Ce.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wm.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(O){hg(this,O);return}if(c=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)g.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())g.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),P=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(f1,f,void 0)>=0)||v||P||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of g)this.g.setRequestHeader(O,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(O){hg(this,O)}};function hg(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,fg(c),al(c)}function fg(c){c.A||(c.A=!0,ft(c,"complete"),ft(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,ft(this,"complete"),ft(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),Ce.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pg(this):this.Xa())},t.Xa=function(){pg(this)};function pg(c){if(c.h&&typeof i<"u"){if(c.v&&fr(c)==4)setTimeout(c.Ca.bind(c),0);else if(ft(c,"readystatechange"),fr(c)==4){c.h=!1;try{const O=c.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=O===0){let B=String(c.D).match(rg)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),v=!h1.test(B?B.toLowerCase():"")}g=v}if(g)ft(c,"complete"),ft(c,"success");else{c.o=6;try{var P=fr(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",fg(c)}}finally{al(c)}}}}function al(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,f||ft(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function fr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return fr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),WE(f)}};function mg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function p1(c){const f={};c=(c.g&&fr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(k(c[v]))continue;var g=XE(c[v]);const P=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=f[P]||[];f[P]=O,O.push(g)}ee(f,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function go(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function gg(c){this.za=0,this.i=[],this.j=new io,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=go("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=go("baseRetryDelayMs",5e3,c),this.Za=go("retryDelaySeedMs",1e4,c),this.Ta=go("forwardChannelMaxRetries",2,c),this.va=go("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Xm(c&&c.concurrentRequestLimit),this.Ba=new d1,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=gg.prototype,t.ka=8,t.I=1,t.connect=function(c,f,g,v){pt(0),this.W=c,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.J=Tg(this,null,this.W),cl(this)};function pd(c){if(yg(c),c.I==3){var f=c.V++,g=gn(c.J);if(ye(g,"SID",c.M),ye(g,"RID",f),ye(g,"TYPE","terminate"),yo(c,g),f=new ur(c,c.j,f),f.M=2,f.A=il(gn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Sg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),sl(f)}Ng(c)}function ll(c){c.g&&(gd(c),c.g.cancel(),c.g=null)}function yg(c){ll(c),c.v&&(o.clearTimeout(c.v),c.v=null),ul(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function cl(c){if(!Zm(c.h)&&!c.m){c.m=!0;var f=c.Ea;M||b(),F||(M(),F=!0),E.add(f,c),c.D=0}}function m1(c,f){return eg(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=so(d(c.Ea,c,f),Eg(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const P=new ur(this,this.j,c);let O=this.o;if(this.U&&(O?(O=_e(O),as(O,this.U)):O=this.U),this.u!==null||this.R||(P.J=O,O=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=vg(this,P,f),g=gn(this.J),ye(g,"RID",c),ye(g,"CVER",22),this.G&&ye(g,"X-HTTP-Session-Id",this.G),yo(this,g),O&&(this.R?f="headers="+oo(dg(O))+"&"+f:this.u&&fd(g,this.u,O)),ud(this.h,P),this.Ra&&ye(g,"TYPE","init"),this.S?(ye(g,"$req",f),ye(g,"SID","null"),P.U=!0,od(P,g,null)):od(P,g,f),this.I=2}}else this.I==3&&(c?xg(this,c):this.i.length==0||Zm(this.h)||xg(this))};function xg(c,f){var g;f?g=f.l:g=c.V++;const v=gn(c.J);ye(v,"SID",c.M),ye(v,"RID",g),ye(v,"AID",c.K),yo(c,v),c.u&&c.o&&fd(v,c.u,c.o),g=new ur(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),f&&(c.i=f.G.concat(c.i)),f=vg(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ud(c.h,g),od(g,v,f)}function yo(c,f){c.H&&Y(c.H,function(g,v){ye(f,v,g)}),c.l&&Y({},function(g,v){ye(f,v,g)})}function vg(c,f,g){g=Math.min(c.i.length,g);const v=c.l?d(c.l.Ka,c.l,c):null;e:{var P=c.i;let te=-1;for(;;){const ze=["count="+g];te==-1?g>0?(te=P[0].g,ze.push("ofs="+te)):te=0:ze.push("ofs="+te);let pe=!0;for(let We=0;We<g;We++){var O=P[We].g;const yn=P[We].map;if(O-=te,O<0)te=Math.max(0,P[We].g-100),pe=!1;else try{O="req"+O+"_"||"";try{var B=yn instanceof Map?yn:Object.entries(yn);for(const[fs,pr]of B){let mr=pr;u(pr)&&(mr=td(pr)),ze.push(O+fs+"="+encodeURIComponent(mr))}}catch(fs){throw ze.push(O+"type="+encodeURIComponent("_badmap")),fs}}catch{v&&v(yn)}}if(pe){B=ze.join("&");break e}}B=void 0}return c=c.i.splice(0,g),f.G=c,B}function wg(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;M||b(),F||(M(),F=!0),E.add(f,c),c.A=0}}function md(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=so(d(c.Da,c),Eg(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,_g(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=so(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),ll(this),_g(this))};function gd(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function _g(c){c.g=new ur(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=gn(c.na);ye(f,"RID","rpc"),ye(f,"SID",c.M),ye(f,"AID",c.K),ye(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&ye(f,"TO",c.ia),ye(f,"TYPE","xmlhttp"),yo(c,f),c.u&&c.o&&fd(f,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=il(gn(f)),g.u=null,g.R=!0,Qm(g,c)}t.Va=function(){this.C!=null&&(this.C=null,ll(this),md(this),pt(19))};function ul(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function bg(c,f){var g=null;if(c.g==f){ul(c),gd(c),c.g=null;var v=2}else if(cd(c.h,f))g=f.G,tg(c.h,f),v=1;else return;if(c.I!=0){if(f.o)if(v==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var P=c.D;v=nl(),ft(v,new qm(v,g)),cl(c)}else wg(c);else if(P=f.m,P==3||P==0&&f.X>0||!(v==1&&m1(c,f)||v==2&&md(c)))switch(g&&g.length>0&&(f=c.h,f.i=f.i.concat(g)),P){case 1:hs(c,5);break;case 4:hs(c,10);break;case 3:hs(c,6);break;default:hs(c,2)}}}function Eg(c,f){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*f}function hs(c,f){if(c.j.info("Error code "+f),f==2){var g=d(c.bb,c),v=c.Ua;const P=!v;v=new dr(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||lo(v,"https"),il(v),P?c1(v.toString(),g):u1(v.toString(),g)}else pt(2);c.I=0,c.l&&c.l.pa(f),Ng(c),yg(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Ng(c){if(c.I=0,c.ja=[],c.l){const f=ng(c.h);(f.length!=0||c.i.length!=0)&&(N(c.ja,f),N(c.ja,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.oa()}}function Tg(c,f,g){var v=g instanceof dr?gn(g):new dr(g);if(v.g!="")f&&(v.g=f+"."+v.g),co(v,v.u);else{var P=o.location;v=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;const O=new dr(null);v&&lo(O,v),f&&(O.g=f),P&&co(O,P),g&&(O.h=g),v=O}return g=c.G,f=c.wa,g&&f&&ye(v,g,f),ye(v,"VER",c.ka),yo(c,v),v}function Sg(c,f,g){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new Ce(new hd({ab:g})):new Ce(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ig(){}t=Ig.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function dl(){}dl.prototype.g=function(c,f){return new jt(c,f)};function jt(c,f){st.call(this),this.g=new gg(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!k(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!k(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Ks(this)}p(jt,st),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){pd(this.g)},jt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=td(c),c=g);f.i.push(new t1(f.Ya++,c)),f.I==3&&cl(f)},jt.prototype.N=function(){this.g.l=null,delete this.j,pd(this.g),delete this.g,jt.Z.N.call(this)};function kg(c){nd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}p(kg,nd);function Cg(){rd.call(this),this.status=1}p(Cg,rd);function Ks(c){this.g=c}p(Ks,Ig),Ks.prototype.ra=function(){ft(this.g,"a")},Ks.prototype.qa=function(c){ft(this.g,new kg(c))},Ks.prototype.pa=function(c){ft(this.g,new Cg)},Ks.prototype.oa=function(){ft(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,ib=function(){return new dl},sb=function(){return nl()},rb=cs,cf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rl.NO_ERROR=0,rl.TIMEOUT=8,rl.HTTP_ERROR=6,rc=rl,Hm.COMPLETE="complete",nb=Hm,Um.EventType=no,no.OPEN="a",no.CLOSE="b",no.ERROR="c",no.MESSAGE="d",st.prototype.listen=st.prototype.J,Po=Um,Ce.prototype.listenOnce=Ce.prototype.K,Ce.prototype.getLastError=Ce.prototype.Ha,Ce.prototype.getLastErrorCode=Ce.prototype.ya,Ce.prototype.getStatus=Ce.prototype.ca,Ce.prototype.getResponseJson=Ce.prototype.La,Ce.prototype.getResponseText=Ce.prototype.la,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Fa,tb=Ce}).apply(typeof Rl<"u"?Rl:typeof self<"u"?self:typeof window<"u"?window:{});const E0="@firebase/firestore",N0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Cp("@firebase/firestore");function Ys(){return Os.logLevel}function q(t,...e){if(Os.logLevel<=se.DEBUG){const n=e.map(Up);Os.debug(`Firestore (${Qi}): ${t}`,...n)}}function rr(t,...e){if(Os.logLevel<=se.ERROR){const n=e.map(Up);Os.error(`Firestore (${Qi}): ${t}`,...n)}}function Pi(t,...e){if(Os.logLevel<=se.WARN){const n=e.map(Up);Os.warn(`Firestore (${Qi}): ${t}`,...n)}}function Up(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ob(t,r,n)}function ob(t,e,n){let r=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rr(r),new Error(r)}function ue(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ob(e,s,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class xA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vA{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},u=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string",31837,{l:r}),new ab(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string",2055,{h:e}),new lt(e)}}class wA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _A{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ue(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new T0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new T0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=EA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function uf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Zd(s)===Zd(i)?ie(s,i):Zd(s)?1:-1}return ie(t.length,e.length)}const NA=55296,TA=57343;function Zd(t){const e=t.charCodeAt(0);return e>=NA&&e<=TA}function Di(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="__name__";class wn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=wn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=wn.isNumericId(e),s=wn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?wn.extractNumericId(e).compare(wn.extractNumericId(n)):uf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Br.fromString(e.substring(4,e.length-2))}}class me extends wn{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new me(n)}static emptyPath(){return new me([])}}const SA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends wn{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return SA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===S0}static keyField(){return new et([S0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(me.fromString(e))}static fromName(e){return new W(me.fromString(e).popFirst(5))}static empty(){return new W(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t,e,n){if(!n)throw new z(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IA(t,e,n,r){if(e===!0&&r===!0)throw new z(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!W.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function k0(t){if(W.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function Ct(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iu(t);throw new z(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kA(t,e){if(e<=0)throw new z(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ha(t,e){if(!cb(t))throw new z(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new z(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=-62135596800,A0=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*A0);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C0)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ha(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-C0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:Be("string",ve._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new ve(0,0))}static max(){return new J(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=-1;function CA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new Wr(s,W.empty(),e)}function AA(t){return new Wr(t.readTime,t.key,va)}class Wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wr(J.min(),W.empty(),va)}static max(){return new Wr(J.max(),W.empty(),va)}}function jA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==RA)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let l=0;l<i;l++){const d=l;n(e[d]).next(h=>{o[d]=h,++u,u===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function DA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ji(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ku.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=-1;function Cu(t){return t==null}function qc(t){return t===0&&1/t==-1/0}function OA(t){return typeof t=="number"&&Number.isInteger(t)&&!qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="";function LA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=j0(e)),e=VA(t.get(n),e);return j0(e)}function VA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ub:n+="";break;default:n+=i}}return n}function j0(t){return t+ub+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function db(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pl(this.root,e,this.comparator,!0)}}class Pl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P0(this.data.getIterator())}getIteratorFrom(e){return new P0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class P0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new He(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hb("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const MA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(t){if(ue(!!t,39018),typeof t=="string"){let e=0;const n=MA.exec(t);if(ue(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="server_timestamp",pb="__type__",mb="__previous_value__",gb="__local_write_time__";function Au(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[pb])==null?void 0:r.stringValue)===fb}function ju(t){const e=t.mapValue.fields[mb];return Au(e)?ju(e):e}function wa(t){const e=Gr(t.mapValue.fields[gb].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,r,s,i,o,u,l,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=h}}const Hc="(default)";class _a{constructor(e,n){this.projectId=e,this.database=n||Hc}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database===Hc}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="__type__",UA="__max__",Dl={mapValue:{}},xb="__vector__",Wc="value";function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Au(t)?4:zA(t)?9007199254740991:BA(t)?10:11:Q(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wa(t).isEqual(wa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Gr(s.timestampValue),u=Gr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Kr(s.bytesValue).isEqual(Kr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),u=Oe(i.doubleValue);return o===u?qc(o)===qc(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Di(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(R0(o)!==R0(u))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(u[l]===void 0||!jn(o[l],u[l])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function ba(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=Qr(t),r=Qr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Oe(i.integerValue||i.doubleValue),l=Oe(o.integerValue||o.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(t,e);case 3:return D0(t.timestampValue,e.timestampValue);case 4:return D0(wa(t),wa(e));case 5:return uf(t.stringValue,e.stringValue);case 6:return function(i,o){const u=Kr(i),l=Kr(o);return u.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),l=o.split("/");for(let d=0;d<u.length&&d<l.length;d++){const h=ie(u[d],l[d]);if(h!==0)return h}return ie(u.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=ie(Oe(i.latitude),Oe(o.latitude));return u!==0?u:ie(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return O0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,x,N,C;const u=i.fields||{},l=o.fields||{},d=(m=u[Wc])==null?void 0:m.arrayValue,h=(x=l[Wc])==null?void 0:x.arrayValue,p=ie(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return p!==0?p:O0(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Dl.mapValue&&o===Dl.mapValue)return 0;if(i===Dl.mapValue)return 1;if(o===Dl.mapValue)return-1;const u=i.fields||{},l=Object.keys(u),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=uf(l[p],h[p]);if(m!==0)return m;const x=Oi(u[l[p]],d[h[p]]);if(x!==0)return x}return ie(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function D0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=Gr(t),r=Gr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function O0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Oi(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function Li(t){return df(t)}function df(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=df(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${df(n.fields[o])}`;return s+"}"}(t.mapValue):Q(61005,{value:t})}function sc(t){switch(Qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ju(t);return e?16+sc(e):16;case 5:return 2*t.stringValue.length;case 6:return Kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+sc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return is(r.fields,(i,o)=>{s+=i.length+sc(o)}),s}(t.mapValue);default:throw Q(13486,{value:t})}}function Gc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hf(t){return!!t&&"integerValue"in t}function $p(t){return!!t&&"arrayValue"in t}function L0(t){return!!t&&"nullValue"in t}function V0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ic(t){return!!t&&"mapValue"in t}function BA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[yb])==null?void 0:r.stringValue)===xb}function Qo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qo(t.arrayValue.values[n]);return e}return{...t}}function zA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===UA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ic(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qo(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=Qo(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ic(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ic(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Nt(Qo(this.value))}}function vb(t){const e=[];return is(t.fields,(n,r)=>{const s=new et([n]);if(ic(r)){const i=vb(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new ut(e,0,J.min(),J.min(),J.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,J.min(),J.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,J.min(),J.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.position=e,this.inclusive=n}}function M0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function F0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n="asc"){this.field=e,this.dir=n}}function $A(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wb=class{};class Ue extends wb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HA(e,n,r):n==="array-contains"?new KA(e,r):n==="in"?new QA(e,r):n==="not-in"?new YA(e,r):n==="array-contains-any"?new JA(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new WA(e,r):new GA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oi(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends wb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fn(e,n)}matches(e){return _b(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _b(t){return t.op==="and"}function bb(t){return qA(t)&&_b(t)}function qA(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function ff(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(bb(t))return t.filters.map(e=>ff(e)).join(",");{const e=t.filters.map(n=>ff(n)).join(",");return`${t.op}(${e})`}}function Eb(t,e){return t instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof fn?function(r,s){return s instanceof fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Eb(o,s.filters[u]),!0):!1}(t,e):void Q(19439)}function Nb(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof fn?function(n){return n.op.toString()+" {"+n.getFilters().map(Nb).join(" ,")+"}"}(t):"Filter"}class HA extends Ue{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class WA extends Ue{constructor(e,n){super(e,"in",n),this.keys=Tb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GA extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=Tb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tb(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class KA extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $p(n)&&ba(n.arrayValue,this.value)}}class QA extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ba(this.value.arrayValue,n)}}class YA extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ba(this.value.arrayValue,n)}}class JA extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$p(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ba(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function U0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new XA(t,e,n,r,s,i,o)}function qp(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ff(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Cu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.Te=n}return e.Te}function Hp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$A(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Eb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!F0(t.startAt,e.startAt)&&F0(t.endAt,e.endAt)}function pf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZA(t,e,n,r,s,i,o,u){return new $s(t,e,n,r,s,i,o,u)}function Ru(t){return new $s(t)}function B0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Wp(t){return t.collectionGroup!==null}function Ni(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new He(et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ea(i,r))}),n.has(et.keyField().canonicalString())||e.Ie.push(new Ea(et.keyField(),r))}return e.Ie}function In(t){const e=X(t);return e.Ee||(e.Ee=ej(e,Ni(t))),e.Ee}function ej(t,e){if(t.limitType==="F")return U0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ea(s.field,i)});const n=t.endAt?new Vi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vi(t.startAt.position,t.startAt.inclusive):null;return U0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mf(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kc(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pu(t,e){return Hp(In(t),In(e))&&t.limitType===e.limitType}function Sb(t){return`${qp(In(t))}|lt:${t.limitType}`}function Js(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Nb(s)).join(", ")}]`),Cu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Li(s)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function Du(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ni(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,l){const d=M0(o,u,l);return o.inclusive?d<=0:d<0}(r.startAt,Ni(r),s)||r.endAt&&!function(o,u,l){const d=M0(o,u,l);return o.inclusive?d>=0:d>0}(r.endAt,Ni(r),s))}(t,e)}function tj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ib(t){return(e,n)=>{let r=!1;for(const s of Ni(t)){const i=nj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nj(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,u){const l=o.data.field(i),d=u.data.field(i);return l!==null&&d!==null?Oi(l,d):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return db(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new ke(W.comparator);function sr(){return rj}const kb=new ke(W.comparator);function Do(...t){let e=kb;for(const n of t)e=e.insert(n.key,n);return e}function Cb(t){let e=kb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ws(){return Yo()}function Ab(){return Yo()}function Yo(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const sj=new ke(W.comparator),ij=new He(W.comparator);function oe(...t){let e=ij;for(const n of t)e=e.add(n);return e}const oj=new He(ie);function aj(){return oj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function jb(t){return{integerValue:""+t}}function Rb(t,e){return OA(e)?jb(e):Gp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this._=void 0}}function lj(t,e,n){return t instanceof Na?function(s,i){const o={fields:{[pb]:{stringValue:fb},[gb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Au(i)&&(i=ju(i)),i&&(o.fields[mb]=i),{mapValue:o}}(n,e):t instanceof Ta?Db(t,e):t instanceof Sa?Ob(t,e):function(s,i){const o=Pb(s,i),u=z0(o)+z0(s.Ae);return hf(o)&&hf(s.Ae)?jb(u):Gp(s.serializer,u)}(t,e)}function cj(t,e,n){return t instanceof Ta?Db(t,e):t instanceof Sa?Ob(t,e):n}function Pb(t,e){return t instanceof Ia?function(r){return hf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Na extends Ou{}class Ta extends Ou{constructor(e){super(),this.elements=e}}function Db(t,e){const n=Lb(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Sa extends Ou{constructor(e){super(),this.elements=e}}function Ob(t,e){let n=Lb(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class Ia extends Ou{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function z0(t){return Oe(t.integerValue||t.doubleValue)}function Lb(t){return $p(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.field=e,this.transform=n}}function uj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ta&&s instanceof Ta||r instanceof Sa&&s instanceof Sa?Di(r.elements,s.elements,jn):r instanceof Ia&&s instanceof Ia?jn(r.Ae,s.Ae):r instanceof Na&&s instanceof Na}(t.transform,e.transform)}class dj{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lu{}function Mb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kp(t.key,Qt.none()):new Wa(t.key,t.data,Qt.none());{const n=t.data,r=Nt.empty();let s=new He(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new os(t.key,r,new Ot(s.toArray()),Qt.none())}}function hj(t,e,n){t instanceof Wa?function(s,i,o){const u=s.value.clone(),l=q0(s.fieldTransforms,i,o.transformResults);u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof os?function(s,i,o){if(!oc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=q0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Fb(s)),l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n,r){return t instanceof Wa?function(i,o,u,l){if(!oc(i.precondition,o))return u;const d=i.value.clone(),h=H0(i.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(i,o,u,l){if(!oc(i.precondition,o))return u;const d=H0(i.fieldTransforms,l,o),h=o.data;return h.setAll(Fb(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return oc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function fj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pb(r.transform,s||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,i))}return n||null}function $0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Di(r,s,(i,o)=>uj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wa extends Lu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends Lu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function q0(t,e,n){const r=new Map;ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,cj(o,u,n[s]))}return r}function H0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,lj(i,o,e))}return r}class Kp extends Lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pj extends Lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&hj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ab();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const l=Mb(o,u);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Di(this.mutations,e.mutations,(n,r)=>$0(n,r))&&Di(this.baseMutations,e.baseMutations,(n,r)=>$0(n,r))}}class Qp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return sj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Qp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,ae;function xj(t){switch(t){case L.OK:return Q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function Ub(t){if(t===void 0)return rr("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ve.OK:return L.OK;case Ve.CANCELLED:return L.CANCELLED;case Ve.UNKNOWN:return L.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return L.INTERNAL;case Ve.UNAVAILABLE:return L.UNAVAILABLE;case Ve.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ve.NOT_FOUND:return L.NOT_FOUND;case Ve.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ve.ABORTED:return L.ABORTED;case Ve.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ve.DATA_LOSS:return L.DATA_LOSS;default:return Q(39323,{code:t})}}(ae=Ve||(Ve={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Br([4294967295,4294967295],0);function W0(t){const e=vj().encode(t),n=new eb;return n.update(e),new Uint8Array(n.digest())}function G0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Br([n,r],0),new Br([s,i],0)]}class Yp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Br.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Br.fromNumber(r)));return s.compare(wj)===1&&(s=new Br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=W0(e),[r,s]=G0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Yp(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=W0(e),[r,s]=G0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vu(J.min(),s,new ke(ie),sr(),oe())}}class Ga{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ga(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Bb{constructor(e,n){this.targetId=e,this.Ce=n}}class zb{constructor(e,n,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class K0{constructor(){this.ve=0,this.Fe=Q0(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q(38017,{changeType:i})}}),new Ga(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Q0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _j{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=Ol(),this.He=Ol(),this.Ye=new ke(ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(pf(i))if(r===0){const o=new W(i.path);this.et(n,o,ut.newNoDocument(o,J.min()))}else ue(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),l=u?this.ct(u,e,o):1;if(l!==0){this.it(n);const d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=Kr(r).toUint8Array()}catch(l){if(l instanceof hb)return Pi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new Yp(o,s,i)}catch(l){return Pi(l instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&pf(u.target)){const l=new W(u.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ut.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=oe();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(l=>{const d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Vu(e,n,this.Ye,this.je,r);return this.je=sr(),this.Je=Ol(),this.He=Ol(),this.Ye=new ke(ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new K0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new He(ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new He(ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new K0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ol(){return new ke(W.comparator)}function Q0(){return new ke(W.comparator)}const bj={asc:"ASCENDING",desc:"DESCENDING"},Ej={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nj={and:"AND",or:"OR"};class Tj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gf(t,e){return t.useProto3Json||Cu(e)?e:{value:e}}function Qc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $b(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sj(t,e){return Qc(t,e.toTimestamp())}function kn(t){return ue(!!t,49232),J.fromTimestamp(function(n){const r=Gr(n);return new ve(r.seconds,r.nanos)}(t))}function Jp(t,e){return yf(t,e).canonicalString()}function yf(t,e){const n=function(s){return new me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qb(t){const e=me.fromString(t);return ue(Qb(e),10190,{key:e.toString()}),e}function xf(t,e){return Jp(t.databaseId,e.path)}function eh(t,e){const n=qb(e);if(n.get(1)!==t.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Wb(n))}function Hb(t,e){return Jp(t.databaseId,e)}function Ij(t){const e=qb(t);return e.length===4?me.emptyPath():Wb(e)}function vf(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wb(t){return ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Y0(t,e,n){return{name:xf(t,e),fields:n.value.mapValue.fields}}function kj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ue(h===void 0||typeof h=="string",58123),rt.fromBase64String(h||"")):(ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const h=d.code===void 0?L.UNKNOWN:Ub(d.code);return new z(h,d.message||"")}(o);n=new zb(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=eh(t,r.document.name),i=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):J.min(),u=new Nt({mapValue:{fields:r.document.fields}}),l=ut.newFoundDocument(s,i,o,u),d=r.targetIds||[],h=r.removedTargetIds||[];n=new ac(d,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=eh(t,r.document),i=r.readTime?kn(r.readTime):J.min(),o=ut.newNoDocument(s,i),u=r.removedTargetIds||[];n=new ac([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=eh(t,r.document),i=r.removedTargetIds||[];n=new ac([],i,s,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new yj(s,i),u=r.targetId;n=new Bb(u,o)}}return n}function Cj(t,e){let n;if(e instanceof Wa)n={update:Y0(t,e.key,e.value)};else if(e instanceof Kp)n={delete:xf(t,e.key)};else if(e instanceof os)n={update:Y0(t,e.key,e.data),updateMask:Mj(e.fieldMask)};else{if(!(e instanceof pj))return Q(16599,{Vt:e.type});n={verify:xf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Na)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ta)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Sa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ia)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Sj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q(27497)}(t,e.precondition)),n}function Aj(t,e){return t&&t.length>0?(ue(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?kn(s.updateTime):kn(i);return o.isEqual(J.min())&&(o=kn(i)),new dj(o,s.transformResults||[])}(n,e))):[]}function jj(t,e){return{documents:[Hb(t,e.path)]}}function Rj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hb(t,s);const i=function(d){if(d.length!==0)return Kb(fn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Xs(m.field),direction:Oj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=gf(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function Pj(t){let e=Ij(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ue(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const m=Gb(p);return m instanceof fn&&bb(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(N){return new Ea(Zs(N.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let u=null;n.limit&&(u=function(p){let m;return m=typeof p=="object"?p.value:p,Cu(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,x=p.values||[];return new Vi(x,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,x=p.values||[];return new Vi(x,m)}(n.endAt)),ZA(e,s,o,i,u,"F",l,d)}function Dj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Gb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zs(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zs(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zs(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zs(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Zs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fn.create(n.compositeFilter.filters.map(r=>Gb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function Oj(t){return bj[t]}function Lj(t){return Ej[t]}function Vj(t){return Nj[t]}function Xs(t){return{fieldPath:t.canonicalString()}}function Zs(t){return et.fromServerFormat(t.fieldPath)}function Kb(t){return t instanceof Ue?function(n){if(n.op==="=="){if(V0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NAN"}};if(L0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(V0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NAN"}};if(L0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(n.field),op:Lj(n.op),value:n.value}}}(t):t instanceof fn?function(n){const r=n.getFilters().map(s=>Kb(s));return r.length===1?r[0]:{compositeFilter:{op:Vj(n.op),filters:r}}}(t):Q(54877,{filter:t})}function Mj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r,s,i=J.min(),o=J.min(),u=rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.yt=e}}function Uj(t){const e=Pj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.Cn=new zj}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Wr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class zj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yb=41943040;class wt{static withCacheSize(e){return new wt(e,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(Yb,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mi(0)}static cr(){return new Mi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="LruGarbageCollector",$j=1048576;function Z0([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class qj{constructor(e){this.Ir=e,this.buffer=new He(Z0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Z0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Hj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(X0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ji(n)?q(X0,"Ignoring IndexedDB error during garbage collection: ",n):await Yi(n)}await this.Vr(3e5)})}}class Wj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(ku.ce);const r=new qj(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(J0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,l,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Ys()<=se.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(l-u)+`ms
	Removed ${p} documents in `+(d-l)+`ms
Total Duration: ${d-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Gj(t,e){return new Wj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Jo(r.mutation,s,Ot.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Do();return i.forEach((u,l)=>{o=o.insert(u,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=sr();const o=Yo(),u=function(){return Yo()}();return n.forEach((l,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof os)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Jo(h.mutation,d,h.mutation.getFieldMask(),ve.now())):o.set(d.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>u.set(d,new Qj(h,o.get(d)??null))),u))}recalculateAndSaveOverlays(e,n){const r=Yo();let s=new ke((o,u)=>o-u),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(l=>{const d=n.get(l);if(d===null)return;let h=r.get(l)||Ot.empty();h=u.applyToLocalView(d,h),r.set(l,h);const p=(s.get(u.batchId)||oe()).add(l);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),d=l.key,h=l.value,p=Ab();h.forEach(m=>{if(!i.has(m)){const x=Mb(n.get(m),r.get(m));x!==null&&p.set(m,x),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Wp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(ws());let u=va,l=i;return o.next(d=>V.forEach(d,(h,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,l,d,oe())).next(h=>({batchId:u,changes:Cb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Do();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Do();return this.indexManager.getCollectionParents(e,i).next(u=>V.forEach(u,l=>{const d=function(p,m){return new $s(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,ut.newInvalidDocument(h)))});let u=Do();return o.forEach((l,d)=>{const h=i.get(l);h!==void 0&&Jo(h.mutation,d,Ot.empty(),ve.now()),Du(n,d)&&(u=u.insert(l,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Uj(s.bundledQuery),readTime:kn(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.overlays=new ke(W.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ws();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=ws(),i=n.length+1,o=new W(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const l=u.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ws(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const u=ws(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>u.set(d,h)),!(u.size()>=s)););return V.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gj(n,r));let i=this.qr.get(n);i===void 0&&(i=oe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Qr=new He(Ge.$r),this.Ur=new He(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new me([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new me([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=oe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||ie(e.Yr,n.Yr)}static Kr(e,n){return ie(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new He(Ge.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mj(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new Ge(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?zp:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(ie);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new W(i),0);let u=new He(ie);return this.Zr.forEachWhile(l=>{const d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(l.Yr)),!0)},o),V.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.ri=e,this.docs=function(){return new ke(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=sr();const o=n.path,u=new W(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||jA(AA(h),r)<=0||(s.has(h.key)||Du(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nR(this)}getSize(e){return V.resolve(this.size)}}class nR extends Kj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.persistence=e,this.si=new qs(n=>qp(n),Hp),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.oi=0,this._i=new Xp,this.targetCount=0,this.ai=Mi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Mi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.ui={},this.overlays={},this.ci=new ku(0),this.li=!1,this.li=!0,this.hi=new Zj,this.referenceDelegate=e(this),this.Pi=new rR(this),this.indexManager=new Bj,this.remoteDocumentCache=function(s){return new tR(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Fj(n),this.Ii=new Jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new eR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new sR(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class sR extends PA{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new Xp,this.Vi=null}static mi(e){return new Zp(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=W.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yc{constructor(e,n){this.persistence=e,this.pi=new qs(r=>LA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Gj(this,n)}static mi(e,n){return new Yc(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sc(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new em(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return jI()?8:DA(ht())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new iR;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ys()<=se.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Ys()<=se.DEBUG&&q("QueryEngine","Query:",Js(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ys()<=se.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):V.resolve())}ys(e,n){if(B0(n))return V.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Kc(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(l=>{const d=this.Ds(n,u);return this.Cs(n,d,o,l.readTime)?this.ys(e,Kc(n,null,"F")):this.vs(e,d,n,l)}))})))}ws(e,n,r,s){return B0(n)||s.isEqual(J.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(Ys()<=se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Js(n)),this.vs(e,o,n,CA(s,va)).next(u=>u))})}Ds(e,n){let r=new He(Ib(e));return n.forEach((s,i)=>{Du(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ys()<=se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Js(n)),this.ps.getDocumentsMatchingQuery(e,n,Wr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="LocalStore",aR=3e8;class lR{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ke(ie),this.xs=new qs(i=>qp(i),Hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function cR(t,e,n,r){return new lR(t,e,n,r)}async function Xb(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let l=oe();for(const d of s){o.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}for(const d of i){u.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:u}))})})}function uR(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,l,d,h){const p=d.batch,m=p.keys();let x=V.resolve();return m.forEach(N=>{x=x.next(()=>h.getEntry(l,N)).next(C=>{const j=d.docVersions.get(N);ue(j!==null,48541),C.version.compareTo(j)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),h.addEntry(C)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(l,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=oe();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(l=l.add(u.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Zb(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function dR(t,e){const n=X(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;u.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,p)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(rt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(p,x),function(C,j,w){return C.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=aR?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,x,h)&&u.push(n.Pi.updateTargetData(i,x))});let l=sr(),d=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),u.push(hR(i,o,e.documentUpdates).next(h=>{l=h.ks,d=h.qs})),!r.isEqual(J.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(h)}return V.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,d)).next(()=>l)}).then(i=>(n.Ms=s,i))}function hR(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=sr();return n.forEach((u,l)=>{const d=i.get(u);l.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(u,l.readTime),o=o.insert(u,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(u,l)):q(tm,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",l.version)}),{ks:o,qs:s}})}function fR(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pR(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function wf(t,e,n){const r=X(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ji(o))throw o;q(tm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ex(t,e,n){const r=X(t);let s=J.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){const p=X(l),m=p.xs.get(h);return m!==void 0?V.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)}(r,o,In(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:oe())).next(u=>(mR(r,tj(e),u),{documents:u,Qs:i})))}function mR(t,e,n){let r=t.Os.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class tx{constructor(){this.activeTargetIds=aj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gR{constructor(){this.Mo=new tx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="ConnectivityMonitor";class rx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(nx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(nx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll=null;function _f(){return Ll===null?Ll=function(){return 268435456+Math.round(2147483648*Math.random())}():Ll++,"0x"+Ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="RestConnection",xR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Hc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=_f(),u=this.zo(e,n.toUriEncodedString());q(th,`Sending RPC '${e}' ${o}:`,u,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:d}=new URL(u),h=Bs(d);return this.Jo(e,u,l,r,h).then(p=>(q(th,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Pi(th,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=xR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class _R extends vR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=_f();return new Promise((u,l)=>{const d=new tb;d.setWithCredentials(!0),d.listenOnce(nb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case rc.NO_ERROR:const p=d.getResponseJson();q(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case rc.TIMEOUT:q(at,`RPC '${e}' ${o} timed out`),l(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case rc.HTTP_ERROR:const m=d.getStatus();if(q(at,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x==null?void 0:x.error;if(N&&N.status&&N.message){const C=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(N.status);l(new z(C,N.message))}else l(new z(L.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new z(L.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{q(at,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);q(at,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=_f(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ib(),u=sb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");q(at,`Creating RPC '${e}' stream ${s}: ${h}`,l);const p=o.createWebChannel(h,l);this.I_(p);let m=!1,x=!1;const N=new wR({Yo:j=>{x?q(at,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(m||(q(at,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),q(at,`RPC '${e}' stream ${s} sending:`,j),p.send(j))},Zo:()=>p.close()}),C=(j,w,_)=>{j.listen(w,y=>{try{_(y)}catch(D){setTimeout(()=>{throw D},0)}})};return C(p,Po.EventType.OPEN,()=>{x||(q(at,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),C(p,Po.EventType.CLOSE,()=>{x||(x=!0,q(at,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(p))}),C(p,Po.EventType.ERROR,j=>{x||(x=!0,Pi(at,`RPC '${e}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),N.a_(new z(L.UNAVAILABLE,"The operation could not be completed")))}),C(p,Po.EventType.MESSAGE,j=>{var w;if(!x){const _=j.data[0];ue(!!_,16349);const y=_,D=(y==null?void 0:y.error)||((w=y[0])==null?void 0:w.error);if(D){q(at,`RPC '${e}' stream ${s} received error:`,D);const M=D.status;let F=function(T){const I=Ve[T];if(I!==void 0)return Ub(I)}(M),E=D.message;F===void 0&&(F=L.INTERNAL,E="Unknown error status: "+M+" with message "+D.message),x=!0,N.a_(new z(F,E)),p.close()}else q(at,`RPC '${e}' stream ${s} received:`,_),N.u_(_)}}),C(u,rb.STAT_EVENT,j=>{j.stat===cf.PROXY?q(at,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===cf.NOPROXY&&q(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){return new Tj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="PersistentStream";class tE{constructor(e,n,r,s,i,o,u,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new z(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(sx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(sx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bR extends tE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=kj(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?kn(o.readTime):J.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=vf(this.serializer),n.addTarget=function(i,o){let u;const l=o.target;if(u=pf(l)?{documents:jj(i,l)}:{query:Rj(i,l).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=$b(i,o.resumeToken);const d=gf(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){u.readTime=Qc(i,o.snapshotVersion.toTimestamp());const d=gf(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=Dj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=vf(this.serializer),n.removeTarget=e,this.q_(n)}}class ER extends tE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Aj(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=vf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Cj(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{}class TR extends NR{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,yf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(L.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,yf(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class SR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="RemoteStore";class IR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Hs(this)&&(q(Ls,"Restarting streams for network reachability change."),await async function(l){const d=X(l);d.Ea.add(4),await Ka(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Fu(d)}(this))})}),this.Ra=new SR(r,s)}}async function Fu(t){if(Hs(t))for(const e of t.da)await e(!0)}async function Ka(t){for(const e of t.da)await e(!1)}function nE(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),im(n)?sm(n):Xi(n).O_()&&rm(n,e))}function nm(t,e){const n=X(t),r=Xi(n);n.Ia.delete(e),r.O_()&&rE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Hs(n)&&n.Ra.set("Unknown"))}function rm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xi(t).Y_(e)}function rE(t,e){t.Va.Ue(e),Xi(t).Z_(e)}function sm(t){t.Va=new _j({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xi(t).start(),t.Ra.ua()}function im(t){return Hs(t)&&!Xi(t).x_()&&t.Ia.size>0}function Hs(t){return X(t).Ea.size===0}function sE(t){t.Va=void 0}async function kR(t){t.Ra.set("Online")}async function CR(t){t.Ia.forEach((e,n)=>{rm(t,e)})}async function AR(t,e){sE(t),im(t)?(t.Ra.ha(e),sm(t)):t.Ra.set("Unknown")}async function jR(t,e,n){if(t.Ra.set("Online"),e instanceof zb&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){q(Ls,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jc(t,r)}else if(e instanceof ac?t.Va.Ze(e):e instanceof Bb?t.Va.st(e):t.Va.tt(e),!n.isEqual(J.min()))try{const r=await Zb(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(l.resumeToken,o))}}),u.targetMismatches.forEach((l,d)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),rE(i,l);const p=new Cr(h.target,l,d,h.sequenceNumber);rm(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){q(Ls,"Failed to raise snapshot:",r),await Jc(t,r)}}async function Jc(t,e,n){if(!Ji(e))throw e;t.Ea.add(1),await Ka(t),t.Ra.set("Offline"),n||(n=()=>Zb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Ls,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fu(t)})}function iE(t,e){return e().catch(n=>Jc(t,n,e))}async function Uu(t){const e=X(t),n=Yr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zp;for(;RR(e);)try{const s=await fR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,PR(e,s)}catch(s){await Jc(e,s)}oE(e)&&aE(e)}function RR(t){return Hs(t)&&t.Ta.length<10}function PR(t,e){t.Ta.push(e);const n=Yr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function oE(t){return Hs(t)&&!Yr(t).x_()&&t.Ta.length>0}function aE(t){Yr(t).start()}async function DR(t){Yr(t).ra()}async function OR(t){const e=Yr(t);for(const n of t.Ta)e.ea(n.mutations)}async function LR(t,e,n){const r=t.Ta.shift(),s=Qp.from(r,e,n);await iE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Uu(t)}async function VR(t,e){e&&Yr(t).X_&&await async function(r,s){if(function(o){return xj(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();Yr(r).B_(),await iE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Uu(r)}}(t,e),oE(t)&&aE(t)}async function ix(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),q(Ls,"RemoteStore received new credentials");const r=Hs(n);n.Ea.add(3),await Ka(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fu(n)}async function MR(t,e){const n=X(t);e?(n.Ea.delete(2),await Fu(n)):e||(n.Ea.add(2),await Ka(n),n.Ra.set("Unknown"))}function Xi(t){return t.ma||(t.ma=function(n,r,s){const i=X(n);return i.sa(),new bR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:kR.bind(null,t),t_:CR.bind(null,t),r_:AR.bind(null,t),H_:jR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),im(t)?sm(t):t.Ra.set("Unknown")):(await t.ma.stop(),sE(t))})),t.ma}function Yr(t){return t.fa||(t.fa=function(n,r,s){const i=X(n);return i.sa(),new ER(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:DR.bind(null,t),r_:VR.bind(null,t),ta:OR.bind(null,t),na:LR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Uu(t)):(await t.fa.stop(),t.Ta.length>0&&(q(Ls,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new om(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Ji(t))return new z(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{static emptySet(e){return new Ti(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Do(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ti)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ti;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.ga=new ke(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fi{constructor(e,n,r,s,i,o,u,l,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Fi(e,n,Ti.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class UR{constructor(){this.queries=ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=ax(),i.forEach((o,u)=>{for(const l of u.Sa)l.onError(r)})})(this,new z(L.ABORTED,"Firestore shutting down"))}}function ax(){return new qs(t=>Sb(t),Pu)}async function lm(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new FR,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=am(o,`Initialization of query '${Js(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&um(n)}async function cm(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BR(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&um(n)}function zR(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function um(t){t.Ca.forEach(e=>{e.next()})}var bf,lx;(lx=bf||(bf={})).Ma="default",lx.Cache="cache";class dm{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.key=e}}class cE{constructor(e){this.key=e}}class $R{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=oe(),this.mutatedKeys=oe(),this.eu=Ib(e),this.tu=new Ti(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ox,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),x=Du(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),C=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let j=!1;m&&x?m.data.isEqual(x.data)?N!==C&&(r.track({type:3,doc:x}),j=!0):this.su(m,x)||(r.track({type:2,doc:x}),j=!0,(l&&this.eu(x,l)>0||d&&this.eu(x,d)<0)&&(u=!0)):!m&&x?(r.track({type:0,doc:x}),j=!0):m&&!x&&(r.track({type:1,doc:m}),j=!0,(l||d)&&(u=!0)),j&&(x?(o=o.add(x),i=C?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(x,N){const C=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:j})}};return C(x)-C(N)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,d=l!==this.Za;return this.Za=l,o.length!==0||d?{snapshot:new Fi(this.query,e.tu,i,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ox,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new cE(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new lE(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hm="SyncEngine";class qR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HR{constructor(e){this.key=e,this.hu=!1}}class WR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qs(u=>Sb(u),Pu),this.Iu=new Map,this.Eu=new Set,this.du=new ke(W.comparator),this.Au=new Map,this.Ru=new Xp,this.Vu={},this.mu=new Map,this.fu=Mi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GR(t,e,n=!0){const r=mE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await uE(r,e,n,!0),s}async function KR(t,e){const n=mE(t);await uE(n,e,!0,!1)}async function uE(t,e,n,r){const s=await pR(t.localStore,In(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await QR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nE(t.remoteStore,s),u}async function QR(t,e,n,r,s){t.pu=(p,m,x)=>async function(C,j,w,_){let y=j.view.ru(w);y.Cs&&(y=await ex(C.localStore,j.query,!1).then(({documents:E})=>j.view.ru(E,y)));const D=_&&_.targetChanges.get(j.targetId),M=_&&_.targetMismatches.get(j.targetId)!=null,F=j.view.applyChanges(y,C.isPrimaryClient,D,M);return ux(C,j.targetId,F.au),F.snapshot}(t,p,m,x);const i=await ex(t.localStore,e,!0),o=new $R(e,i.Qs),u=o.ru(i.documents),l=Ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,l);ux(t,n,d.au);const h=new qR(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function YR(t,e,n){const r=X(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Pu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&nm(r.remoteStore,s.targetId),Ef(r,s.targetId)}).catch(Yi)):(Ef(r,s.targetId),await wf(r.localStore,s.targetId,!0))}async function JR(t,e){const n=X(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nm(n.remoteStore,r.targetId))}async function XR(t,e,n){const r=iP(t);try{const s=await function(o,u){const l=X(o),d=ve.now(),h=u.reduce((x,N)=>x.add(N.key),oe());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=sr(),C=oe();return l.Ns.getEntries(x,h).next(j=>{N=j,N.forEach((w,_)=>{_.isValidDocument()||(C=C.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(x,N)).next(j=>{p=j;const w=[];for(const _ of u){const y=fj(_,p.get(_.key).overlayedDocument);y!=null&&w.push(new os(_.key,y,vb(y.value.mapValue),Qt.exists(!0)))}return l.mutationQueue.addMutationBatch(x,d,w,u)}).next(j=>{m=j;const w=j.applyToLocalDocumentSet(p,C);return l.documentOverlayCache.saveOverlays(x,j.batchId,w)})}).then(()=>({batchId:m.batchId,changes:Cb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,l){let d=o.Vu[o.currentUser.toKey()];d||(d=new ke(ie)),d=d.insert(u,l),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await Qa(r,s.changes),await Uu(r.remoteStore)}catch(s){const i=am(s,"Failed to persist write");n.reject(i)}}async function dE(t,e){const n=X(t);try{const r=await dR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ue(o.hu,14607):s.removedDocuments.size>0&&(ue(o.hu,42227),o.hu=!1))}),await Qa(n,r,e)}catch(r){await Yi(r)}}function cx(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const l=X(o);l.onlineState=u;let d=!1;l.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(u)&&(d=!0)}),d&&um(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZR(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ke(W.comparator);o=o.insert(i,ut.newNoDocument(i,J.min()));const u=oe().add(i),l=new Vu(J.min(),new Map,new ke(ie),o,u);await dE(r,l),r.du=r.du.remove(i),r.Au.delete(e),fm(r)}else await wf(r.localStore,e,!1).then(()=>Ef(r,e,n)).catch(Yi)}async function eP(t,e){const n=X(t),r=e.batch.batchId;try{const s=await uR(n.localStore,e);fE(n,r,null),hE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qa(n,s)}catch(s){await Yi(s)}}async function tP(t,e,n){const r=X(t);try{const s=await function(o,u){const l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,u).next(p=>(ue(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(d,p))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(r.localStore,e);fE(r,e,n),hE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qa(r,s)}catch(s){await Yi(s)}}function hE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function fE(t,e,n){const r=X(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ef(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||pE(t,r)})}function pE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(nm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),fm(t))}function ux(t,e,n){for(const r of n)r instanceof lE?(t.Ru.addReference(r.key,e),nP(t,r)):r instanceof cE?(q(hm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||pE(t,r.key)):Q(19791,{wu:r})}function nP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(hm,"New document in limbo: "+n),t.Eu.add(r),fm(t))}function fm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(me.fromString(e)),r=t.fu.next();t.Au.set(r,new HR(n)),t.du=t.du.insert(n,r),nE(t.remoteStore,new Cr(In(Ru(n.path)),r,"TargetPurposeLimboResolution",ku.ce))}}async function Qa(t,e,n){const r=X(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,l)=>{o.push(r.pu(l,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(d){s.push(d);const p=em.As(l.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,d){const h=X(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(d,m=>V.forEach(m.Es,x=>h.persistence.referenceDelegate.addReference(p,m.targetId,x)).next(()=>V.forEach(m.ds,x=>h.persistence.referenceDelegate.removeReference(p,m.targetId,x)))))}catch(p){if(!Ji(p))throw p;q(tm,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const x=h.Ms.get(m),N=x.snapshotVersion,C=x.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(m,C)}}}(r.localStore,i))}async function rP(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){q(hm,"User change. New user:",e.toKey());const r=await Xb(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(l=>{l.reject(new z(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qa(n,r.Ls)}}function sP(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let s=oe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function mE(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZR.bind(null,e),e.Pu.H_=BR.bind(null,e.eventManager),e.Pu.yu=zR.bind(null,e.eventManager),e}function iP(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tP.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return cR(this.persistence,new oR,e.initialUser,this.serializer)}Cu(e){return new Jb(Zp.mi,this.serializer)}Du(e){return new gR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class oP extends Xc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ue(this.persistence.referenceDelegate instanceof Yc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Hj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new Jb(r=>Yc.mi(r,n),this.serializer)}}class Nf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rP.bind(null,this.syncEngine),await MR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UR}()}createDatastore(e){const n=Mu(e.databaseInfo.databaseId),r=function(i){return new _R(i)}(e.databaseInfo);return function(i,o,u,l){return new TR(i,o,u,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new IR(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>cx(this.syncEngine,n,0),function(){return rx.v()?new rx:new yR}())}createSyncEngine(e,n){return function(s,i,o,u,l,d,h){const p=new WR(s,i,o,u,l,d);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);q(Ls,"RemoteStore shutting down."),i.Ea.add(5),await Ka(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Nf.provider={build:()=>new Nf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="FirestoreClient";class aP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(Jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(Jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=am(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rh(t,e){t.asyncQueue.verifyOperationInProgress(),q(Jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Xb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lP(t);q(Jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ix(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ix(e.remoteStore,s)),t._onlineComponents=e}async function lP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Jr,"Using user provided OfflineComponentProvider");try{await rh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),await rh(t,new Xc)}}else q(Jr,"Using default OfflineComponentProvider"),await rh(t,new oP(void 0));return t._offlineComponents}async function gE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Jr,"Using user provided OnlineComponentProvider"),await dx(t,t._uninitializedComponentsProvider._online)):(q(Jr,"Using default OnlineComponentProvider"),await dx(t,new Nf))),t._onlineComponents}function cP(t){return gE(t).then(e=>e.syncEngine)}async function Zc(t){const e=await gE(t),n=e.eventManager;return n.onListen=GR.bind(null,e.syncEngine),n.onUnlisten=YR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JR.bind(null,e.syncEngine),n}function uP(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,l,d){const h=new pm({next:m=>{h.Nu(),o.enqueueAndForget(()=>cm(i,p));const x=m.docs.has(u);!x&&m.fromCache?d.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&l&&l.source==="server"?d.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new dm(Ru(u.path),h,{includeMetadataChanges:!0,qa:!0});return lm(i,p)}(await Zc(t),t.asyncQueue,e,n,r)),r.promise}function dP(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,l,d){const h=new pm({next:m=>{h.Nu(),o.enqueueAndForget(()=>cm(i,p)),m.fromCache&&l.source==="server"?d.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new dm(u,h,{includeMetadataChanges:!0,qa:!0});return lm(i,p)}(await Zc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firestore.googleapis.com",fx=!0;class px{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xE,this.ssl=fx}else this.host=e.host,this.ssl=e.ssl??fx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$j)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new px({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new px(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yA;switch(r.type){case"firstParty":return new _A(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hx.get(n);r&&(q("ComponentProvider","Removing Datastore"),hx.delete(n),r.terminate())}(this),Promise.resolve()}}function hP(t,e,n,r={}){var d;t=Ct(t,Bu);const s=Bs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Ip(`https://${u}`),kp("Firestore",!0)),i.host!==xE&&i.host!==u&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:u,ssl:s,emulatorOptions:r};if(!As(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=lt.MOCK_USER;else{h=p_(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lt(m)}t._authCredentials=new xA(new ab(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new On(this.firestore,e,this._query)}}class Re{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Re(this.firestore,e,this._key)}toJSON(){return{type:Re._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ha(n,Re._jsonSchema))return new Re(e,r||null,new W(me.fromString(n.referencePath)))}}Re._jsonSchemaVersion="firestore/documentReference/1.0",Re._jsonSchema={type:Be("string",Re._jsonSchemaVersion),referencePath:Be("string")};class zr extends On{constructor(e,n,r){super(e,n,Ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new W(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function Me(t,e,...n){if(t=Ie(t),lb("collection","path",e),t instanceof Bu){const r=me.fromString(e,...n);return k0(r),new zr(t,null,r)}{if(!(t instanceof Re||t instanceof zr))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return k0(r),new zr(t.firestore,null,r)}}function ce(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=Bp.newId()),lb("doc","path",e),t instanceof Bu){const r=me.fromString(e,...n);return I0(r),new Re(t,null,new W(r))}{if(!(t instanceof Re||t instanceof zr))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return I0(r),new Re(t.firestore,t instanceof zr?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="AsyncQueue";class gx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eE(this,"async_queue_retry"),this._c=()=>{const r=nh();r&&q(mx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=nh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=nh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ji(e))throw e;q(mx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",yx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=om.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Q(47125,{Pc:yx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ir extends Bu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new gx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gx(e),this._firestoreClient=void 0,await e}}}function fP(t,e){const n=typeof t=="object"?t:jp(),r=typeof t=="string"?t:Hc,s=Eu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=d_("firestore");i&&hP(s,...i)}return s}function zu(t){if(t._terminated)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pP(t),t._firestoreClient}function pP(t){var r,s,i;const e=t._freezeSettings(),n=function(u,l,d,h){return new FA(u,l,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new aP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const l=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wt(rt.fromBase64String(e))}catch(n){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wt(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ha(e,Wt._jsonSchema))return Wt.fromBase64String(e.bytes)}}Wt._jsonSchemaVersion="firestore/bytes/1.0",Wt._jsonSchema={type:Be("string",Wt._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cn._jsonSchemaVersion}}static fromJSON(e){if(Ha(e,Cn._jsonSchema))return new Cn(e.latitude,e.longitude)}}Cn._jsonSchemaVersion="firestore/geoPoint/1.0",Cn._jsonSchema={type:Be("string",Cn._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:An._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ha(e,An._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new An(e.vectorValues);throw new z(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}An._jsonSchemaVersion="firestore/vectorValue/1.0",An._jsonSchema={type:Be("string",An._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=/^__.*__$/;class gP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wa(e,this.data,n,this.fieldTransforms)}}class vE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class mm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return eu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wE(this.Ac)&&mP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mu(e)}Cc(e,n,r,s=!1){return new mm({Ac:e,methodName:n,Dc:r,path:et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ja(t){const e=t._freezeSettings(),n=Mu(t._databaseId);return new yP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _E(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);xm("Data must be an object, but it was:",o,r);const u=EE(r,o);let l,d;if(i.merge)l=new Ot(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=Tf(e,p,n);if(!o.contains(m))throw new z(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);TE(h,m)||h.push(m)}l=new Ot(h),d=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,d=o.fieldTransforms;return new gP(new Nt(u),l,d)}class qu extends Ya{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qu}}class gm extends Ya{_toFieldTransform(e){return new Vb(e.path,new Na)}isEqual(e){return e instanceof gm}}class ym extends Ya{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Ia(e.serializer,Rb(e.serializer,this.Fc));return new Vb(e.path,n)}isEqual(e){return e instanceof ym&&this.Fc===e.Fc}}function xP(t,e,n,r){const s=t.Cc(1,e,n);xm("Data must be an object, but it was:",s,r);const i=[],o=Nt.empty();is(r,(l,d)=>{const h=vm(e,l,n);d=Ie(d);const p=s.yc(h);if(d instanceof qu)i.push(h);else{const m=Xa(d,p);m!=null&&(i.push(h),o.set(h,m))}});const u=new Ot(i);return new vE(o,u,s.fieldTransforms)}function vP(t,e,n,r,s,i){const o=t.Cc(1,e,n),u=[Tf(e,r,n)],l=[s];if(i.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)u.push(Tf(e,i[m])),l.push(i[m+1]);const d=[],h=Nt.empty();for(let m=u.length-1;m>=0;--m)if(!TE(d,u[m])){const x=u[m];let N=l[m];N=Ie(N);const C=o.yc(x);if(N instanceof qu)d.push(x);else{const j=Xa(N,C);j!=null&&(d.push(x),h.set(x,j))}}const p=new Ot(d);return new vE(h,p,o.fieldTransforms)}function bE(t,e,n,r=!1){return Xa(n,t.Cc(r?4:3,e))}function Xa(t,e){if(NE(t=Ie(t)))return xm("Unsupported field value:",e,t),EE(t,e);if(t instanceof Ya)return function(r,s){if(!wE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let l=Xa(u,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Rb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:Qc(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qc(s.serializer,i)}}if(r instanceof Cn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wt)return{bytesValue:$b(s.serializer,r._byteString)};if(r instanceof Re){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof An)return function(o,u){return{mapValue:{fields:{[yb]:{stringValue:xb},[Wc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Gp(u.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Iu(r)}`)}(t,e)}function EE(t,e){const n={};return db(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,s)=>{const i=Xa(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function NE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof Cn||t instanceof Wt||t instanceof Re||t instanceof Ya||t instanceof An)}function xm(t,e,n){if(!NE(n)||!cb(n)){const r=Iu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Tf(t,e,n){if((e=Ie(e))instanceof $u)return e._internalPath;if(typeof e=="string")return vm(t,e);throw eu("Field path arguments must be of type string or ",t,!1,void 0,n)}const wP=new RegExp("[~\\*/\\[\\]]");function vm(t,e,n){if(e.search(wP)>=0)throw eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $u(...e.split("."))._internalPath}catch{throw eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new z(L.INVALID_ARGUMENT,u+t+l)}function TE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _P(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _P extends wm{data(){return super.data()}}function Hu(t,e){return typeof e=="string"?vm(t,e):e instanceof $u?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _m{}class Wu extends _m{}function bt(t,e,...n){let r=[];e instanceof _m&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof bm).length,u=i.filter(l=>l instanceof Gu).length;if(o>1||o>0&&u>0)throw new z(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Gu extends Wu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gu(e,n,r)}_apply(e){const n=this._parse(e);return IE(e._query,n),new On(e.firestore,e.converter,mf(e._query,n))}_parse(e){const n=Ja(e.firestore);return function(i,o,u,l,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){wx(p,h);const N=[];for(const C of p)N.push(vx(l,i,C));m={arrayValue:{values:N}}}else m=vx(l,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||wx(p,h),m=bE(u,o,p,h==="in"||h==="not-in");return Ue.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ae(t,e,n){const r=e,s=Hu("where",t);return Gu._create(s,r,n)}class bm extends _m{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const l of u)IE(o,l),o=mf(o,l)}(e._query,n),new On(e.firestore,e.converter,mf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Em extends Wu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Em(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ea(i,o)}(e._query,this._field,this._direction);return new On(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new $s(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function an(t,e="asc"){const n=e,r=Hu("orderBy",t);return Em._create(r,n)}class Nm extends Wu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Nm(e,n,r)}_apply(e){return new On(e.firestore,e.converter,Kc(e._query,this._limit,this._limitType))}}function Ar(t){return kA("limit",t),Nm._create("limit",t,"F")}class Tm extends Wu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Tm(e,n,r)}_apply(e){const n=EP(e,this.type,this._docOrFields,this._inclusive);return new On(e.firestore,e.converter,function(s,i){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function bP(...t){return Tm._create("startAfter",t,!1)}function EP(t,e,n,r){if(n[0]=Ie(n[0]),n[0]instanceof wm)return function(i,o,u,l,d){if(!l)throw new z(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const h=[];for(const p of Ni(i))if(p.field.isKeyField())h.push(Gc(o,l.key));else{const m=l.data.field(p.field);if(Au(m))throw new z(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const x=p.field.canonicalString();throw new z(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}h.push(m)}return new Vi(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ja(t.firestore);return function(o,u,l,d,h,p){const m=o.explicitOrderBy;if(h.length>m.length)throw new z(L.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let N=0;N<h.length;N++){const C=h[N];if(m[N].field.isKeyField()){if(typeof C!="string")throw new z(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof C}`);if(!Wp(o)&&C.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${C}' contains a slash.`);const j=o.path.child(me.fromString(C));if(!W.isDocumentKey(j))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const w=new W(j);x.push(Gc(u,w))}else{const j=bE(l,d,C);x.push(j)}}return new Vi(x,p)}(t._query,t.firestore._databaseId,s,e,n,r)}}function vx(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wp(e)&&n.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!W.isDocumentKey(r))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gc(t,new W(r))}if(n instanceof Re)return Gc(t,n._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(n)}.`)}function wx(t,e){if(!Array.isArray(t)||t.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IE(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NP{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Wc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Oe(o.doubleValue));return new An(n)}convertGeoPoint(e){return new Cn(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ju(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const n=Gr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);ue(Qb(r),9688,{name:e});const s=new _a(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||rr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends wm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Es._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:Be("string",Es._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class lc extends Es{data(e={}){return super.data(e)}}class Ns{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lc(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const l=new lc(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Lo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const l=new lc(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Lo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),h=o.indexOf(u.doc.key)),{type:TP(u.type),doc:l,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ns._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){t=Ct(t,Re);const e=Ct(t.firestore,ir);return uP(zu(e),t._key).then(n=>AE(e,t,n))}Ns._jsonSchemaVersion="firestore/querySnapshot/1.0",Ns._jsonSchema={type:Be("string",Ns._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class Sm extends NP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}}function Et(t){t=Ct(t,On);const e=Ct(t.firestore,ir),n=zu(e),r=new Sm(e);return SE(t._query),dP(n,t._query).then(s=>new Ns(e,r,t,s))}function Vo(t,e,n){t=Ct(t,Re);const r=Ct(t.firestore,ir),s=kE(t.converter,e);return Ku(r,[_E(Ja(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qt.none())])}function Qe(t,e,n,...r){t=Ct(t,Re);const s=Ct(t.firestore,ir),i=Ja(s);let o;return o=typeof(e=Ie(e))=="string"||e instanceof $u?vP(i,"updateDoc",t._key,e,n,r):xP(i,"updateDoc",t._key,e),Ku(s,[o.toMutation(t._key,Qt.exists(!0))])}function CE(t){return Ku(Ct(t.firestore,ir),[new Kp(t._key,Qt.none())])}function Im(t,e){const n=Ct(t.firestore,ir),r=ce(t),s=kE(t.converter,e);return Ku(n,[_E(Ja(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function ka(t,...e){var l,d,h;t=Ie(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xx(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xx(e[r])){const p=e[r];e[r]=(l=p.next)==null?void 0:l.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(h=p.complete)==null?void 0:h.bind(p)}let i,o,u;if(t instanceof Re)o=Ct(t.firestore,ir),u=Ru(t._key.path),i={next:p=>{e[r]&&e[r](AE(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=Ct(t,On);o=Ct(p.firestore,ir),u=p._query;const m=new Sm(o);i={next:x=>{e[r]&&e[r](new Ns(o,m,p,x))},error:e[r+1],complete:e[r+2]},SE(t._query)}return function(m,x,N,C){const j=new pm(C),w=new dm(x,j,N);return m.asyncQueue.enqueueAndForget(async()=>lm(await Zc(m),w)),()=>{j.Nu(),m.asyncQueue.enqueueAndForget(async()=>cm(await Zc(m),w))}}(zu(o),u,s,i)}function Ku(t,e){return function(r,s){const i=new Qn;return r.asyncQueue.enqueueAndForget(async()=>XR(await cP(r),s,i)),i.promise}(zu(t),e)}function AE(t,e,n){const r=n.docs.get(e._key),s=new Sm(t);return new Es(t,s,e._key,r,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}function de(){return new gm("serverTimestamp")}function sh(t){return new ym("increment",t)}(function(e,n=!0){(function(s){Qi=s})(zs),js(new Hr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new ir(new vA(r.getProvider("auth-internal")),new bA(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(d.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Nn(E0,N0,e),Nn(E0,N0,"esm2020")})();var SP="firebase",IP="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(SP,IP,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firebasestorage.googleapis.com",kP="storageBucket",CP=2*60*1e3,AP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends Dn{constructor(e,n,r=0){super(ih(e),`Firebase Storage: ${n} (${ih(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ih(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rn||(Rn={}));function ih(t){return"storage/"+t}function jP(){const t="An unknown error occurred, please check the error payload for server response.";return new Ln(Rn.UNKNOWN,t)}function RP(){return new Ln(Rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PP(){return new Ln(Rn.CANCELED,"User canceled the upload/download.")}function DP(t){return new Ln(Rn.INVALID_URL,"Invalid URL '"+t+"'.")}function OP(t){return new Ln(Rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function _x(t){return new Ln(Rn.INVALID_ARGUMENT,t)}function RE(){return new Ln(Rn.APP_DELETED,"The Firebase app was deleted.")}function LP(t){return new Ln(Rn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw OP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${h}/b/${s}/o${m}`,"i"),N={bucket:1,path:3},C=n===jE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",w=new RegExp(`^https?://${C}/${s}/${j}`,"i"),y=[{regex:u,indices:l,postModify:i},{regex:x,indices:N,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<y.length;D++){const M=y[D],F=M.regex.exec(e);if(F){const E=F[M.indices.bucket];let b=F[M.indices.path];b||(b=""),r=new ln(E,b),M.postModify(r);break}}if(r==null)throw DP(e);return r}}class VP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t,e,n){let r=1,s=null,i=null,o=!1,u=0;function l(){return u===2}let d=!1;function h(...j){d||(d=!0,e.apply(null,j))}function p(j){s=setTimeout(()=>{s=null,t(x,l())},j)}function m(){i&&clearTimeout(i)}function x(j,...w){if(d){m();return}if(j){m(),h.call(null,j,...w);return}if(l()||o){m(),h.call(null,j,...w);return}r<64&&(r*=2);let y;u===1?(u=2,y=0):y=(r+Math.random())*1e3,p(y)}let N=!1;function C(j){N||(N=!0,m(),!d&&(s!==null?(j||(u=2),clearTimeout(s),p(0)):j||(u=1)))}return p(0),i=setTimeout(()=>{o=!0,C(!0)},n),C}function FP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){return t!==void 0}function bx(t,e,n,r){if(r<e)throw _x(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _x(`Invalid value for '${t}'. Expected ${n} or less.`)}function BP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var tu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(tu||(tu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n,r,s,i,o,u,l,d,h,p,m=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,C)=>{this.resolve_=N,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Vl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const l=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===tu.NO_ERROR,l=i.getStatus();if(!u||zP(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===tu.ABORT;r(!1,new Vl(!1,null,h));return}const d=this.successCodes_.indexOf(l)!==-1;r(!0,new Vl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(u,u.getResponse());UP(l)?i(l):i()}catch(l){o(l)}else if(u!==null){const l=jP();l.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,l)):o(l)}else if(s.canceled){const l=this.appDelete_?RE():PP();o(l)}else{const l=RP();o(l)}};this.canceled_?n(!1,new Vl(!1,null,!0)):this.backoffId_=MP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function qP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KP(t,e,n,r,s,i,o=!0,u=!1){const l=BP(t.urlParams),d=t.url+l,h=Object.assign({},t.headers);return WP(h,e),qP(h,n),HP(h,i),GP(h,r),new $P(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function YP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new nu(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YP(this._location.path)}get storage(){return this._service}get parent(){const e=QP(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new nu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LP(e)}}function Ex(t,e){const n=e==null?void 0:e[kP];return n==null?null:ln.makeFromBucketSpec(n,t)}function JP(t,e,n,r={}){t.host=`${e}:${n}`;const s=Bs(e);s&&(Ip(`https://${t.host}/b`),kp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:p_(i,t.app.options.projectId))}class XP{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=jE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CP,this._maxUploadRetryTime=AP,this._requests=new Set,s!=null?this._bucket=ln.makeFromBucketSpec(s,this._host):this._bucket=Ex(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=Ex(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new VP(RE());{const o=KP(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Nx="@firebase/storage",Tx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="storage";function ZP(t=jp(),e){t=Ie(t);const r=Eu(t,PE).getImmediate({identifier:e}),s=d_("storage");return s&&e4(r,...s),r}function e4(t,e,n,r={}){JP(t,e,n,r)}function t4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new XP(n,r,s,e,zs)}function n4(){js(new Hr(PE,t4,"PUBLIC").setMultipleInstances(!0)),Nn(Nx,Tx,""),Nn(Nx,Tx,"esm2020")}n4();const r4={apiKey:"AIzaSyDTgym192TZLd5JgF2rzV8ElXK0oB8zpbs",authDomain:"jonnarincon-d5650.firebaseapp.com",projectId:"jonnarincon-d5650",storageBucket:"jonnarincon-d5650.firebasestorage.app",messagingSenderId:"433504539892",appId:"1:433504539892:web:24745d134e41e8751d7aa1"};let Ml,Fn,G,s4;try{Ml=y_(r4),Fn=mA(Ml),G=fP(Ml),s4=ZP(Ml)}catch(t){throw console.error("Firebase initialization error:",t),t}class i4{constructor(){Mn(this,"currentUser",null)}async signIn(e,n){try{const r=await Jk(Fn,e,n),s=await this.getUserData(r.user.uid);if(!s)throw new Error("User data not found");return await this.updateLastLogin(s.uid),this.currentUser=s,s}catch(r){throw console.error("Sign in error:",r),new Error(r.message||"Failed to sign in")}}async signUp(e,n,r){try{const i=(await Yk(Fn,e,n)).user;r&&await h0(i,{displayName:r});const o={uid:i.uid,email:i.email,role:"user",createdAt:de(),updatedAt:de(),lastLoginAt:de()};return(r||i.displayName)&&(o.displayName=r||i.displayName),i.photoURL&&(o.photoURL=i.photoURL),await Vo(ce(G,"users",i.uid),o),this.currentUser=o,o}catch(s){throw console.error("Sign up error:",s),new Error(s.message||"Failed to sign up")}}async signOut(){try{await sC(Fn),this.currentUser=null}catch(e){throw console.error("Sign out error:",e),new Error(e.message||"Failed to sign out")}}async resetPassword(e){try{await Qk(Fn,e)}catch(n){throw console.error("Password reset error:",n),new Error(n.message||"Failed to send password reset email")}}async updateUserPassword(e){const n=Fn.currentUser;if(!n)throw new Error("No user is currently signed in");try{await Zk(n,e)}catch(r){throw console.error("Update password error:",r),new Error(r.message||"Failed to update password")}}async updateUserProfile(e){const n=Fn.currentUser;if(!n)throw new Error("No user is currently signed in");try{await h0(n,e),await Qe(ce(G,"users",n.uid),{...e,updatedAt:de()})}catch(r){throw console.error("Update profile error:",r),new Error(r.message||"Failed to update profile")}}async getUserData(e){try{const n=await $t(ce(G,"users",e));return n.exists()?n.data():null}catch(n){return console.error("Get user data error:",n),null}}async updateLastLogin(e){try{await Qe(ce(G,"users",e),{lastLoginAt:de()})}catch(n){console.error("Update last login error:",n)}}async updateUserRole(e,n){const r=this.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can update user roles");try{await Qe(ce(G,"users",e),{role:n,updatedAt:de()})}catch(s){throw console.error("Update user role error:",s),new Error(s.message||"Failed to update user role")}}onAuthStateChange(e){return rC(Fn,async n=>{if(n){const r=await this.getUserData(n.uid);this.currentUser=r,e(r)}else this.currentUser=null,e(null)})}getCurrentUser(){return this.currentUser}getFirebaseUser(){return Fn.currentUser}isAuthenticated(){return this.currentUser!==null}isAdmin(){var e;return((e=this.currentUser)==null?void 0:e.role)==="admin"}async checkAdminAccess(){const e=this.getCurrentUser();if(!e)return!1;const n=await this.getUserData(e.uid);return(n==null?void 0:n.role)==="admin"}}const he=new i4;class o4{constructor(){Mn(this,"collectionName","beats")}async createBeat(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can create beats");try{const r={...e,plays:0,downloads:0,likes:0,createdBy:n.uid,lastUpdatedBy:n.uid,createdAt:de(),updatedAt:de()},s=await Im(Me(G,this.collectionName),r),i=await this.getBeatById(s.id);if(!i)throw new Error("Failed to retrieve created beat");return i}catch(r){throw console.error("Create beat error:",r),new Error(r.message||"Failed to create beat")}}async getBeatById(e){try{const n=await $t(ce(G,this.collectionName,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){return console.error("Get beat by ID error:",n),null}}async getBeatBySlug(e){try{const n=bt(Me(G,this.collectionName),Ae("slug","==",e),Ar(1)),r=await Et(n);if(!r.empty){const s=r.docs[0];return{id:s.id,...s.data()}}return null}catch(n){return console.error("Get beat by slug error:",n),null}}async getAllBeats(e){try{const n=[];e!=null&&e.status&&n.push(Ae("status","==",e.status)),e!=null&&e.genre&&n.push(Ae("genre","==",e.genre)),(e==null?void 0:e.featured)!==void 0&&n.push(Ae("featured","==",e.featured));const r=(e==null?void 0:e.orderByField)||"createdAt",s=(e==null?void 0:e.orderDirection)||"desc";n.push(an(r,s));const i=(e==null?void 0:e.pageSize)||20;n.push(Ar(i+1)),e!=null&&e.lastDoc&&n.push(bP(e.lastDoc));const o=bt(Me(G,this.collectionName),...n),u=await Et(o),l=[];u.docs.forEach((h,p)=>{p<i&&l.push({id:h.id,...h.data()})});const d=u.docs.length>i;return{data:l,total:l.length,page:1,pageSize:i,hasMore:d}}catch(n){throw console.error("Get all beats error:",n),new Error("Failed to fetch beats")}}async searchBeats(e){try{const n=bt(Me(G,this.collectionName),Ae("status","==","published")),r=await Et(n),s=[];return r.forEach(i=>{const o={id:i.id,...i.data()},u=e.toLowerCase(),l=o.title.toLowerCase().includes(u),d=o.genre.toLowerCase().includes(u),h=o.artist.toLowerCase().includes(u),p=o.tags.some(m=>m.toLowerCase().includes(u));(l||d||h||p)&&s.push(o)}),s}catch(n){throw console.error("Search beats error:",n),new Error("Failed to search beats")}}async updateBeat(e,n){const r=he.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can update beats");try{const s={...n,lastUpdatedBy:r.uid,updatedAt:de()};delete s.id,delete s.createdAt,delete s.createdBy,await Qe(ce(G,this.collectionName,e),s)}catch(s){throw console.error("Update beat error:",s),new Error(s.message||"Failed to update beat")}}async deleteBeat(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can delete beats");try{await CE(ce(G,this.collectionName,e))}catch(r){throw console.error("Delete beat error:",r),new Error(r.message||"Failed to delete beat")}}async incrementPlays(e){try{await Qe(ce(G,this.collectionName,e),{plays:sh(1)})}catch(n){console.error("Increment plays error:",n)}}async incrementDownloads(e){try{await Qe(ce(G,this.collectionName,e),{downloads:sh(1)})}catch(n){console.error("Increment downloads error:",n)}}async toggleLike(e){try{if(!await this.getBeatById(e))throw new Error("Beat not found");await Qe(ce(G,this.collectionName,e),{likes:sh(1)})}catch(n){throw console.error("Toggle like error:",n),new Error("Failed to update like")}}async getFeaturedBeats(){try{const e=bt(Me(G,this.collectionName),Ae("featured","==",!0),Ae("status","==","published"),an("createdAt","desc"),Ar(6)),n=await Et(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(e){return console.error("Get featured beats error:",e),[]}}async getTrendingBeats(){try{const e=bt(Me(G,this.collectionName),Ae("trending","==",!0),Ae("status","==","published"),an("plays","desc"),Ar(10)),n=await Et(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(e){return console.error("Get trending beats error:",e),[]}}async getGenres(){try{const e=await Et(Me(G,this.collectionName)),n=new Set;return e.forEach(r=>{const s=r.data();s.genre&&n.add(s.genre)}),Array.from(n).sort()}catch(e){return console.error("Get genres error:",e),[]}}subscribeToBeats(e,n){const r=[an("createdAt","desc")];n!=null&&n.status&&r.push(Ae("status","==",n.status)),(n==null?void 0:n.featured)!==void 0&&r.push(Ae("featured","==",n.featured)),n!=null&&n.genre&&r.push(Ae("genre","==",n.genre));const s=bt(Me(G,this.collectionName),...r);return ka(s,i=>{const o=[];i.forEach(u=>{o.push({id:u.id,...u.data()})}),e(o)},i=>{console.error("Subscribe to beats error:",i)})}subscribeToBeat(e,n){return ka(ce(G,this.collectionName,e),r=>{r.exists()?n({id:r.id,...r.data()}):n(null)},r=>{console.error("Subscribe to beat error:",r),n(null)})}}const Xr=new o4;class a4{constructor(){Mn(this,"collectionName","orders")}generateOrderNumber(){const e=new Date().getFullYear(),n=Math.floor(Math.random()*99999).toString().padStart(5,"0");return`JR-${e}-${n}`}async createOrder(e){try{const n={...e,orderNumber:this.generateOrderNumber(),createdAt:de(),updatedAt:de()},r=await Im(Me(G,this.collectionName),n),s=await this.getOrderById(r.id);if(!s)throw new Error("Failed to retrieve created order");return s}catch(n){throw console.error("Create order error:",n),new Error(n.message||"Failed to create order")}}async getOrderById(e){try{const n=await $t(ce(G,this.collectionName,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){return console.error("Get order by ID error:",n),null}}async getOrderByNumber(e){try{const n=bt(Me(G,this.collectionName),Ae("orderNumber","==",e),Ar(1)),r=await Et(n);if(!r.empty){const s=r.docs[0];return{id:s.id,...s.data()}}return null}catch(n){return console.error("Get order by number error:",n),null}}async getAllOrders(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can view all orders");try{const r=[];e!=null&&e.status&&r.push(Ae("status","==",e.status));const s=(e==null?void 0:e.orderByField)||"createdAt",i=(e==null?void 0:e.orderDirection)||"desc";r.push(an(s,i)),e!=null&&e.limit&&r.push(Ar(e.limit));const o=bt(Me(G,this.collectionName),...r),u=await Et(o),l=[];return u.forEach(d=>{l.push({id:d.id,...d.data()})}),l}catch(r){throw console.error("Get all orders error:",r),new Error("Failed to fetch orders")}}async getOrdersByCustomer(e){try{const n=bt(Me(G,this.collectionName),Ae("customerEmail","==",e),an("createdAt","desc")),r=await Et(n),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),s}catch(n){throw console.error("Get orders by customer error:",n),new Error("Failed to fetch customer orders")}}async updateOrderStatus(e,n,r){const s=he.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized: Only admins can update order status");try{const i={status:n,updatedAt:de()};n==="completed"&&(i.completedAt=de()),r&&(i.adminNote=r),await Qe(ce(G,this.collectionName,e),i)}catch(i){throw console.error("Update order status error:",i),new Error(i.message||"Failed to update order status")}}async updateOrder(e,n){const r=he.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can update orders");try{const s={...n,updatedAt:de()};delete s.id,delete s.createdAt,delete s.orderNumber,await Qe(ce(G,this.collectionName,e),s)}catch(s){throw console.error("Update order error:",s),new Error(s.message||"Failed to update order")}}async addDownloadLinks(e,n){try{await Qe(ce(G,this.collectionName,e),{downloadLinks:n,updatedAt:de()})}catch(r){throw console.error("Add download links error:",r),new Error(r.message||"Failed to add download links")}}async addLicensePDFs(e,n){try{await Qe(ce(G,this.collectionName,e),{licensePDFs:n,updatedAt:de()})}catch(r){throw console.error("Add license PDFs error:",r),new Error(r.message||"Failed to add license PDFs")}}async getOrderStatistics(){const e=he.getCurrentUser();if(!e||e.role!=="admin")throw new Error("Unauthorized: Only admins can view statistics");try{const n=await Et(Me(G,this.collectionName));let r=0,s=0,i=0,o=0;n.forEach(l=>{const d=l.data();r++,d.status==="completed"&&(s+=d.total,o++),(d.status==="pending"||d.status==="processing")&&i++});const u=r>0?s/o:0;return{totalOrders:r,totalRevenue:s,pendingOrders:i,completedOrders:o,averageOrderValue:u}}catch(n){throw console.error("Get order statistics error:",n),new Error("Failed to fetch order statistics")}}async getRecentOrders(e=10){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can view recent orders");try{const r=bt(Me(G,this.collectionName),an("createdAt","desc"),Ar(e)),s=await Et(r),i=[];return s.forEach(o=>{i.push({id:o.id,...o.data()})}),i}catch(r){return console.error("Get recent orders error:",r),[]}}subscribeToOrders(e,n){const r=he.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can subscribe to orders");const s=[an("createdAt","desc")];n!=null&&n.status&&s.push(Ae("status","==",n.status)),n!=null&&n.customerId&&s.push(Ae("customerId","==",n.customerId));const i=bt(Me(G,this.collectionName),...s);return ka(i,o=>{const u=[];o.forEach(l=>{u.push({id:l.id,...l.data()})}),e(u)},o=>{console.error("Subscribe to orders error:",o)})}subscribeToOrder(e,n){return ka(ce(G,this.collectionName,e),r=>{r.exists()?n({id:r.id,...r.data()}):n(null)},r=>{console.error("Subscribe to order error:",r),n(null)})}}const or=new a4;class l4{constructor(){Mn(this,"collectionName","collaborations")}async createCollaboration(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can create collaborations");try{const r={...e,paidAmount:0,createdBy:n.uid,createdAt:de(),updatedAt:de()},s=await Im(Me(G,this.collectionName),r),i=await this.getCollaborationById(s.id);if(!i)throw new Error("Failed to retrieve created collaboration");return i}catch(r){throw console.error("Create collaboration error:",r),new Error(r.message||"Failed to create collaboration")}}async getCollaborationById(e){try{const n=await $t(ce(G,this.collectionName,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){return console.error("Get collaboration by ID error:",n),null}}async getAllCollaborations(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can view collaborations");try{const r=[];e!=null&&e.status&&r.push(Ae("status","==",e.status)),e!=null&&e.type&&r.push(Ae("type","==",e.type)),r.push(an("createdAt","desc")),e!=null&&e.limitCount&&r.push(Ar(e.limitCount));const s=bt(Me(G,this.collectionName),...r),i=await Et(s),o=[];return i.forEach(u=>{o.push({id:u.id,...u.data()})}),o}catch(r){throw console.error("Get all collaborations error:",r),new Error("Failed to fetch collaborations")}}async getActiveCollaborations(){const e=he.getCurrentUser();if(!e||e.role!=="admin")throw new Error("Unauthorized: Only admins can view collaborations");try{const n=["agreed","contract_sent","signed","in_progress"],r=bt(Me(G,this.collectionName),Ae("status","in",n),an("createdAt","desc")),s=await Et(r),i=[];return s.forEach(o=>{i.push({id:o.id,...o.data()})}),i}catch(n){return console.error("Get active collaborations error:",n),[]}}async updateCollaboration(e,n){const r=he.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can update collaborations");try{const s={...n,updatedAt:de()};n.status==="signed"&&!n.signedAt&&(s.signedAt=de()),n.status==="completed"&&!n.completedAt&&(s.completedAt=de()),delete s.id,delete s.createdAt,delete s.createdBy,await Qe(ce(G,this.collectionName,e),s)}catch(s){throw console.error("Update collaboration error:",s),new Error(s.message||"Failed to update collaboration")}}async updateStatus(e,n){const r=he.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can update collaboration status");try{const s={status:n,updatedAt:de()};n==="signed"&&(s.signedAt=de()),n==="completed"&&(s.completedAt=de()),await Qe(ce(G,this.collectionName,e),s)}catch(s){throw console.error("Update collaboration status error:",s),new Error(s.message||"Failed to update collaboration status")}}async updatePayment(e,n){const r=he.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can update payments");try{const s=await this.getCollaborationById(e);if(!s)throw new Error("Collaboration not found");const i=s.budget||0;let o="unpaid";n>=i?o="paid":n>0&&(o="partial"),await Qe(ce(G,this.collectionName,e),{paidAmount:n,paymentStatus:o,updatedAt:de()})}catch(s){throw console.error("Update payment error:",s),new Error(s.message||"Failed to update payment")}}async deleteCollaboration(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can delete collaborations");try{await CE(ce(G,this.collectionName,e))}catch(r){throw console.error("Delete collaboration error:",r),new Error(r.message||"Failed to delete collaboration")}}async getCollaborationStats(){const e=he.getCurrentUser();if(!e||e.role!=="admin")throw new Error("Unauthorized: Only admins can view statistics");try{const n=await Et(Me(G,this.collectionName));let r=0,s=0,i=0,o=0,u=0;const l=["agreed","contract_sent","signed","in_progress"];return n.forEach(d=>{const h=d.data();r++,l.includes(h.status)&&s++,h.status==="completed"&&(i++,o+=h.paidAmount),h.status!=="completed"&&h.status!=="cancelled"&&(u+=(h.budget||0)-h.paidAmount)}),{total:r,active:s,completed:i,totalRevenue:o,pendingRevenue:u}}catch(n){throw console.error("Get collaboration stats error:",n),new Error("Failed to fetch collaboration statistics")}}subscribeToCollaborations(e,n){const r=he.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can subscribe to collaborations");const s=[an("createdAt","desc")];n!=null&&n.status&&s.push(Ae("status","==",n.status)),n!=null&&n.type&&s.push(Ae("type","==",n.type));const i=bt(Me(G,this.collectionName),...s);return ka(i,o=>{const u=[];o.forEach(l=>{u.push({id:l.id,...l.data()})}),e(u)},o=>{console.error("Subscribe to collaborations error:",o)})}}const Ca=new l4;class c4{constructor(){Mn(this,"collectionName","settings")}async getShopSettings(){try{const e=ce(G,this.collectionName,"shop"),n=await $t(e);return n.exists()?n.data():null}catch(e){throw console.error("Get shop settings error:",e),new Error(e.message||"Failed to get shop settings")}}async saveShopSettings(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const r=ce(G,this.collectionName,"shop"),s={...e,updatedAt:de(),updatedBy:n.uid};(await $t(r)).exists()?await Qe(r,s):await Vo(r,s)}catch(r){throw console.error("Save shop settings error:",r),new Error(r.message||"Failed to save shop settings")}}async getGeneralSettings(){try{const e=ce(G,this.collectionName,"general"),n=await $t(e);return n.exists()?n.data():null}catch(e){throw console.error("Get general settings error:",e),new Error(e.message||"Failed to get general settings")}}async saveGeneralSettings(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const r=ce(G,this.collectionName,"general"),s={...e,updatedAt:de(),updatedBy:n.uid};(await $t(r)).exists()?await Qe(r,s):await Vo(r,s)}catch(r){throw console.error("Save general settings error:",r),new Error(r.message||"Failed to save general settings")}}async getNotificationSettings(){try{const e=ce(G,this.collectionName,"notifications"),n=await $t(e);return n.exists()?n.data():null}catch(e){throw console.error("Get notification settings error:",e),new Error(e.message||"Failed to get notification settings")}}async saveNotificationSettings(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const r=ce(G,this.collectionName,"notifications"),s={...e,updatedAt:de(),updatedBy:n.uid};(await $t(r)).exists()?await Qe(r,s):await Vo(r,s)}catch(r){throw console.error("Save notification settings error:",r),new Error(r.message||"Failed to save notification settings")}}async getSecuritySettings(){try{const e=ce(G,this.collectionName,"security"),n=await $t(e);return n.exists()?n.data():null}catch(e){throw console.error("Get security settings error:",e),new Error(e.message||"Failed to get security settings")}}async saveSecuritySettings(e){const n=he.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const r=ce(G,this.collectionName,"security"),s={...e,updatedAt:de(),updatedBy:n.uid};(await $t(r)).exists()?await Qe(r,s):await Vo(r,s)}catch(r){throw console.error("Save security settings error:",r),new Error(r.message||"Failed to save security settings")}}}const xr=new c4,DE=S.createContext(void 0),Ut=()=>{const t=S.useContext(DE);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},u4=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!0);S.useEffect(()=>{const h=he.onAuthStateChange(p=>{n(p),s(!1)});return()=>h()},[]);const d={user:e,loading:r,signIn:async(h,p)=>{const m=await he.signIn(h,p);return n(m),m},signUp:async(h,p,m)=>{const x=await he.signUp(h,p,m);return n(x),x},signOut:async()=>{await he.signOut(),n(null)},resetPassword:async h=>{await he.resetPassword(h)},isAuthenticated:e!==null,isAdmin:(e==null?void 0:e.role)==="admin"};return a.jsx(DE.Provider,{value:d,children:t})},vt=({children:t,requireAdmin:e=!1})=>{const{user:n,loading:r,isAdmin:s}=Ut();return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"text-white",children:"Loading..."})}):n?e&&!s?a.jsx(Dc,{to:"/",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Dc,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=S.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:l,...d},h)=>S.createElement("svg",{ref:h,...d4,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${h4(t)}`,u].join(" "),...d},[...e.map(([p,m])=>S.createElement(p,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Z("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Z("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Z("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Z("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=Z("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Z("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=Z("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=Z("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Z("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Z("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Z("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Z("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Z("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function UE({cartItemCount:t=0,onCartClick:e}){const[n,r]=S.useState(!1),{user:s,signOut:i}=Ut(),o=rs(),u=async()=>{try{await i(),o("/")}catch(d){console.error("Sign out error:",d)}},l=()=>{if(!s)return"/login";switch(s.role){case"admin":return"/admin/dashboard";case"artist":return"/artist/dashboard";case"user":return"/customer/dashboard";default:return"/login"}};return a.jsx("nav",{className:"fixed top-0 left-0 right-0 z-30 glass border-b border-purple-500/30 backdrop-blur-xl shadow-xl",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ne,{to:"/",className:"flex items-center gap-3 group",children:[a.jsx("img",{src:"/Logo.png",alt:"Jonna Rincon",className:"w-20 h-20 group-hover:scale-110 transition-all duration-300",style:{filter:"drop-shadow(0 0 20px rgba(147, 51, 234, 0.8)) drop-shadow(0 0 40px rgba(236, 72, 153, 0.6)) drop-shadow(0 0 60px rgba(147, 51, 234, 0.4))"}}),a.jsx("span",{className:"text-2xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text",style:{WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(147, 51, 234, 0.9), 0 0 40px rgba(236, 72, 153, 0.7), 0 0 60px rgba(147, 51, 234, 0.5), 0 0 80px rgba(236, 72, 153, 0.3)"},children:"JONNA RINCON"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[a.jsx(ne,{to:"/",className:"text-white hover:text-purple-400 transition-all duration-300 font-bold hover:scale-110 relative after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-purple-400 hover:after:w-full after:transition-all after:duration-300",children:"Home"}),a.jsx(ne,{to:"/shop/beats",className:"text-white hover:text-purple-400 transition-all duration-300 font-bold hover:scale-110 relative after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-purple-400 hover:after:w-full after:transition-all after:duration-300",children:"Shop"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[s?a.jsxs(a.Fragment,{children:[a.jsx(ne,{to:l(),className:"hidden md:block px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all hover:scale-105 text-white font-medium",children:"Dashboard"}),a.jsx("button",{onClick:u,className:"hidden md:block px-4 py-2 glass rounded-lg neon-border-subtle hover:neon-border transition-all hover:scale-105 text-white font-medium",children:"Sign Out"})]}):a.jsxs(a.Fragment,{children:[a.jsx(ne,{to:"/login",className:"hidden md:block px-4 py-2 glass rounded-lg neon-border-subtle hover:neon-border transition-all hover:scale-105 text-white font-medium",children:"Login"}),a.jsx(ne,{to:"/register",className:"hidden md:block px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all hover:scale-105 text-white font-medium",children:"Sign Up"})]}),e&&a.jsxs("button",{onClick:e,className:"relative p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95 group/cart",children:[a.jsx(Ms,{className:"w-6 h-6 group-hover/cart:animate-pulse"}),t>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-7 h-7 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-xs font-black neon-border-subtle animate-pulse",children:t})]}),a.jsx("button",{onClick:()=>r(!n),className:"md:hidden p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95",children:n?a.jsx(Za,{className:"w-6 h-6"}):a.jsx(Yu,{className:"w-6 h-6"})})]})]}),n&&a.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-purple-500/30",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(ne,{to:"/",onClick:()=>r(!1),className:"text-white hover:text-purple-400 transition-colors font-medium",children:"Home"}),a.jsx(ne,{to:"/shop/beats",onClick:()=>r(!1),className:"text-white hover:text-purple-400 transition-colors font-medium",children:"Shop"}),s?a.jsxs(a.Fragment,{children:[a.jsx(ne,{to:l(),onClick:()=>r(!1),className:"text-white hover:text-purple-400 transition-colors font-medium",children:"Dashboard"}),a.jsx("button",{onClick:()=>{r(!1),u()},className:"text-white hover:text-purple-400 transition-colors font-medium text-left",children:"Sign Out"})]}):a.jsxs(a.Fragment,{children:[a.jsx(ne,{to:"/login",onClick:()=>r(!1),className:"text-white hover:text-purple-400 transition-colors font-medium",children:"Login"}),a.jsx(ne,{to:"/register",onClick:()=>r(!1),className:"text-white hover:text-purple-400 transition-colors font-medium",children:"Sign Up"})]})]})})]})})}function S4(){return a.jsxs("section",{className:"relative w-full min-h-screen flex items-center justify-center overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[a.jsx("img",{src:"/TN-DJSet.jpg",alt:"Jonna Rincon",className:"w-full h-full object-cover object-far-left lg:object-right"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/70 to-transparent opacity-60"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"})]}),a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute top-20 -right-32 w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-pulse"}),a.jsx("div",{className:"absolute -bottom-32 left-1/4 w-80 h-80 bg-purple-700 rounded-full filter blur-3xl opacity-15",style:{animationDelay:"1s"}})]}),a.jsx("div",{className:"relative z-10 w-full h-full flex items-center px-4 sm:px-8 lg:px-16",children:a.jsx("div",{className:"w-full max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 items-center",children:[a.jsx("div",{className:"hidden lg:block relative h-screen -ml-16 -my-32"}),a.jsxs("div",{className:"flex flex-col justify-center space-y-8 animate-fade-in",children:[a.jsx("div",{className:"flex justify-start",children:a.jsxs("div",{className:"relative",children:[a.jsx(At,{className:"w-16 h-16 text-purple-400 neon-glow animate-pulse float-animation"}),a.jsx("div",{className:"absolute inset-0 bg-purple-600/20 rounded-full blur-xl"})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(E4,{className:"w-4 h-4 text-purple-400 animate-spin",style:{animationDuration:"4s"}}),a.jsx("span",{className:"text-sm md:text-base font-semibold text-purple-300 tracking-widest uppercase",children:"Producer  Designer  Beatmaker"})]}),a.jsxs("h1",{className:"text-6xl sm:text-7xl lg:text-8xl font-black leading-tight tracking-tighter",children:[a.jsx("span",{className:"block bg-gradient-to-r from-purple-200 via-purple-400 to-pink-400 bg-clip-text text-transparent neon-glow animate-slide-up",style:{animationDelay:"0s"},children:"JONNA"}),a.jsx("span",{className:"block bg-gradient-to-r from-purple-300 to-purple-600 bg-clip-text text-transparent neon-glow animate-slide-up",style:{animationDelay:"0.1s"},children:"RINCON"})]})]}),a.jsx("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-lg font-light animate-fade-in",style:{animationDelay:"0.3s"},children:"Crafting premium beats and sonic experiences that elevate your artistry"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsxs("a",{href:"#beats",className:"group relative px-8 py-4 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 rounded-lg font-bold text-lg transition-all duration-300 neon-border hover:scale-105 active:scale-95 shadow-2xl hover:shadow-purple-500/50 overflow-hidden flex items-center justify-center gap-2 w-full sm:w-auto",children:[a.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[a.jsx(Vs,{className:"w-5 h-5",fill:"currentColor"}),"Browse Beats"]}),a.jsx("div",{className:"absolute inset-0 shimmer"})]}),a.jsx("a",{href:"#music",className:"group relative px-8 py-4 border-2 border-purple-500/50 rounded-lg font-bold text-lg transition-all duration-300 hover:border-purple-400 hover:bg-purple-600/20 hover:scale-105 active:scale-95 backdrop-blur-sm bg-white/5 flex items-center justify-center gap-2 w-full sm:w-auto",children:a.jsx("span",{className:"relative z-10",children:"Listen Now"})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-12 border-t border-purple-500/20 animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsxs("div",{className:"group",children:[a.jsx("div",{className:"text-3xl sm:text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent group-hover:scale-110 transition-transform",children:"500+"}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 mt-2 font-semibold tracking-wider uppercase",children:"Beats"})]}),a.jsxs("div",{className:"group",children:[a.jsx("div",{className:"text-3xl sm:text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent group-hover:scale-110 transition-transform",children:"1K+"}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 mt-2 font-semibold tracking-wider uppercase",children:"Clients"})]}),a.jsxs("div",{className:"group",children:[a.jsx("div",{className:"text-3xl sm:text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent group-hover:scale-110 transition-transform",children:"5+"}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 mt-2 font-semibold tracking-wider uppercase",children:"Years"})]})]})]})]})})}),a.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce z-20 lg:hidden",children:a.jsx("div",{className:"w-6 h-10 border-2 border-purple-400 rounded-full flex items-start justify-center p-2",children:a.jsx("div",{className:"w-1 h-3 bg-purple-400 rounded-full neon-glow"})})}),a.jsx("div",{className:"absolute bottom-12 right-12 hidden lg:block animate-bounce z-20",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("span",{className:"text-sm text-purple-300 font-light",children:"Scroll"}),a.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})]})}function I4(){return a.jsx("section",{className:"py-24 px-4 bg-black",children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-purple-600 to-purple-900 rounded-2xl blur-2xl opacity-30"}),a.jsx("img",{src:"/edited-j18.png",alt:"Jonna Rincon",className:"relative rounded-2xl shadow-2xl neon-border w-full"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-5xl font-bold mb-6 neon-glow",children:"About Jonna"}),a.jsxs("div",{className:"space-y-4 text-gray-300 text-lg leading-relaxed",children:[a.jsx("p",{children:"Jonathan aka  is a human being with a creative mind which is described by many people as ''not from this world'' You may already recognize his J18 tag at the beginning and/or end of every track, or by the clock sound in his work."}),a.jsx("p",{children:"Mostly known for his raw and authentic moombahton style in tracks or beats. But have in mind that this young man has much to offer. From modern rap beats to the dirty old classic hip hop beats, from warm and smooth r&b instrumentals to the world of EDM (electronic dance music) to studying to jonna's lo-fi instrumentals which he made on his trip on earth;"}),a.jsx("p",{children:"Born in Maastricht, The Netherlands & based in Tilburg he began making music when first made contact with any music instrument nearby. When he visited his nephews in Dominican Republic, he was shown FL Studio for the first time. When Jonna saw that it was possible to make a track with a PC, he made his first track immediately together with his oldest nephew and that's where the music production journey started."}),a.jsx("p",{children:"10+ Years later and the stuff what he can do with a creative program like that is absolute crazy. From the most little things and the most weird noises....never-mind, Jonna Rincon is able to make something out of it... And you can hear that on songs like  and  which have been played on MTV and the Dutch Radio. Not there yet, but on the way. J18 (J18=Jeighteen) (Jeighteen=his tag & clothing/brand & nickname)"}),a.jsx("p",{className:"text-purple-300 font-semibold",children:"Based in the Netherlands, working with artists worldwide."})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"glass rounded-xl p-6 neon-border-subtle",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"Studio Grade"}),a.jsx("div",{className:"text-sm text-gray-400",children:"Professional Quality"})]}),a.jsxs("div",{className:"glass rounded-xl p-6 neon-border-subtle",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"24/7"}),a.jsx("div",{className:"text-sm text-gray-400",children:"Beat Production"})]})]})]})]})})})}class k4{constructor(){Mn(this,"beats",[]);Mn(this,"orders",[]);Mn(this,"subscribers",[]);this.initializeBeats()}initializeBeats(){this.beats=[{id:"1",title:"Midnight Dreams",artist:"Jonna Rincon",bpm:140,key:"Am",genre:"Trap",price:29,audio_url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",artwork_url:"https://images.pexels.com/photos/114820/pexels-photo-114820.jpeg?auto=compress&cs=tinysrgb&w=400",tags:["dark","trap","atmospheric"],license_basic:!0,license_premium:!0,license_exclusive:!0,featured:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",title:"Purple Haze",artist:"Jonna Rincon",bpm:128,key:"Gm",genre:"Hip Hop",price:39,audio_url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",artwork_url:"https://images.pexels.com/photos/1763075/pexels-photo-1763075.jpeg?auto=compress&cs=tinysrgb&w=400",tags:["chill","smooth","purple"],license_basic:!0,license_premium:!0,license_exclusive:!0,featured:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",title:"Neon Nights",artist:"Jonna Rincon",bpm:150,key:"F#m",genre:"Drill",price:49,audio_url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",artwork_url:"https://images.pexels.com/photos/1190297/pexels-photo-1190297.jpeg?auto=compress&cs=tinysrgb&w=400",tags:["hard","drill","uk"],license_basic:!0,license_premium:!0,license_exclusive:!0,featured:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"4",title:"Studio Sessions",artist:"Jonna Rincon",bpm:90,key:"Dm",genre:"R&B",price:35,audio_url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3",artwork_url:"https://images.pexels.com/photos/1933900/pexels-photo-1933900.jpeg?auto=compress&cs=tinysrgb&w=400",tags:["smooth","rnb","melodic"],license_basic:!0,license_premium:!0,license_exclusive:!0,featured:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"5",title:"Bassline Theory",artist:"Jonna Rincon",bpm:174,key:"Em",genre:"Drum & Bass",price:45,audio_url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3",artwork_url:"https://images.pexels.com/photos/1389429/pexels-photo-1389429.jpeg?auto=compress&cs=tinysrgb&w=400",tags:["dnb","liquid","fast"],license_basic:!0,license_premium:!0,license_exclusive:!0,featured:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"6",title:"Lost in Tokyo",artist:"Jonna Rincon",bpm:120,key:"Cm",genre:"Lo-Fi",price:25,audio_url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3",artwork_url:"https://images.pexels.com/photos/1123262/pexels-photo-1123262.jpeg?auto=compress&cs=tinysrgb&w=400",tags:["lofi","chill","study"],license_basic:!0,license_premium:!0,license_exclusive:!0,featured:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]}async getBeats(){return[...this.beats]}async getBeatById(e){return this.beats.find(n=>n.id===e)||null}async getFeaturedBeats(){return this.beats.filter(e=>e.featured)}async searchBeats(e){const n=e.toLowerCase();return this.beats.filter(r=>r.title.toLowerCase().includes(n)||r.genre.toLowerCase().includes(n)||r.tags.some(s=>s.toLowerCase().includes(n)))}async getBeatsByGenre(e){return e==="All"?this.beats:this.beats.filter(n=>n.genre===e)}async createOrder(e){const n={...e,id:Date.now().toString(),created_at:new Date().toISOString()};return this.orders.push(n),n}async getOrders(){return[...this.orders]}async subscribeToNewsletter(e){return this.subscribers.includes(e)?!1:(this.subscribers.push(e),!0)}async getSubscribers(){return[...this.subscribers]}getGenres(){const e=new Set(this.beats.map(n=>n.genre));return Array.from(e)}getTotalBeats(){return this.beats.length}getFeaturedCount(){return this.beats.filter(e=>e.featured).length}}const zt=new k4,ei={beats:{getAll:()=>zt.getBeats(),getById:t=>zt.getBeatById(t),getFeatured:()=>zt.getFeaturedBeats(),search:t=>zt.searchBeats(t),getByGenre:t=>zt.getBeatsByGenre(t)},orders:{create:t=>zt.createOrder(t),getAll:()=>zt.getOrders()},newsletter:{subscribe:t=>zt.subscribeToNewsletter(t),getSubscribers:()=>zt.getSubscribers()},utils:{getGenres:()=>zt.getGenres(),getTotalBeats:()=>zt.getTotalBeats(),getFeaturedCount:()=>zt.getFeaturedCount()}};function C4({beat:t,onAddToCart:e}){const[n,r]=S.useState(!1),[s,i]=S.useState("basic"),o=S.useRef(null),u=()=>{o.current&&(n?o.current.pause():o.current.play(),r(!n))},l=()=>{switch(s){case"basic":return t.price;case"premium":return t.price*1.5;case"exclusive":return t.price*3;default:return t.price}};return a.jsxs("div",{className:"group glass rounded-2xl overflow-hidden hover-lift hover:neon-border transition-all duration-300",children:[a.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[a.jsx("img",{src:t.artwork_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 group-hover:rotate-2 transition-all duration-700"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60 group-hover:opacity-40 transition-opacity duration-300"}),a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:a.jsx("div",{className:"absolute inset-0 shimmer"})}),a.jsx("button",{onClick:u,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gradient-to-br from-purple-600 to-purple-800 rounded-full flex items-center justify-center neon-border hover:scale-125 active:scale-95 transition-all duration-300 shadow-2xl",children:n?a.jsx(ME,{className:"w-10 h-10",fill:"currentColor"}):a.jsx(Vs,{className:"w-10 h-10 ml-1",fill:"currentColor"})}),t.featured&&a.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-full text-xs font-bold neon-border-subtle animate-pulse",children:" FEATURED"}),a.jsx("audio",{ref:o,src:t.audio_url,onEnded:()=>r(!1)})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2 text-purple-200",children:t.title}),a.jsx("p",{className:"text-gray-400 mb-4",children:t.artist}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsxs("span",{className:"px-3 py-1 bg-purple-900/30 rounded-full text-sm border border-purple-500/30",children:[t.bpm," BPM"]}),a.jsx("span",{className:"px-3 py-1 bg-purple-900/30 rounded-full text-sm border border-purple-500/30",children:t.key}),a.jsx("span",{className:"px-3 py-1 bg-purple-900/30 rounded-full text-sm border border-purple-500/30",children:t.genre})]}),a.jsxs("div",{className:"flex gap-2 mb-4",children:[t.license_basic&&a.jsx("button",{onClick:()=>i("basic"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${s==="basic"?"bg-purple-600 text-white neon-border-subtle":"bg-purple-900/20 text-purple-300 hover:bg-purple-900/40"}`,children:"Basic"}),t.license_premium&&a.jsx("button",{onClick:()=>i("premium"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${s==="premium"?"bg-purple-600 text-white neon-border-subtle":"bg-purple-900/20 text-purple-300 hover:bg-purple-900/40"}`,children:"Premium"}),t.license_exclusive&&a.jsx("button",{onClick:()=>i("exclusive"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${s==="exclusive"?"bg-purple-600 text-white neon-border-subtle":"bg-purple-900/20 text-purple-300 hover:bg-purple-900/40"}`,children:"Exclusive"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent drop-shadow-[0_0_15px_rgba(199,125,255,0.5)]",children:["",l().toFixed(2)]}),a.jsxs("button",{onClick:()=>e(t,s),className:"group/btn flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 rounded-full font-bold transition-all duration-300 neon-border-subtle hover:scale-110 active:scale-95 shadow-xl hover:shadow-purple-500/50",children:[a.jsx(Ms,{className:"w-5 h-5 group-hover/btn:animate-bounce"}),a.jsx("span",{children:"Add to Cart"})]})]})]})]})}function A4({onAddToCart:t}){const[e,n]=S.useState([]),[r,s]=S.useState([]),[i,o]=S.useState(""),[u,l]=S.useState("All"),[d,h]=S.useState(!0);S.useEffect(()=>{p()},[]),S.useEffect(()=>{(async()=>{await m()})()},[i,u,e]);const p=async()=>{try{const C=(await ei.beats.getAll()).sort((j,w)=>j.featured&&!w.featured?-1:!j.featured&&w.featured?1:new Date(w.created_at).getTime()-new Date(j.created_at).getTime());n(C),s(C)}catch(N){console.error("Error loading beats:",N)}finally{h(!1)}},m=async()=>{let N=[...e];if(i&&(N=await ei.beats.search(i)),u!=="All"&&(N=await ei.beats.getByGenre(u),i)){const C=await ei.beats.search(i);N=N.filter(j=>C.some(w=>w.id===j.id))}s(N)},x=["All",...ei.utils.getGenres()];return a.jsx("section",{id:"beats",className:"py-24 px-4 bg-gradient-to-b from-black to-purple-950/20",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-6xl font-bold mb-4 neon-glow",children:"Beat Store"}),a.jsx("p",{className:"text-xl text-gray-400",children:"Premium beats ready for your next hit"})]}),a.jsxs("div",{className:"mb-12 flex flex-col md:flex-row gap-4 items-center",children:[a.jsxs("div",{className:"relative flex-1 w-full",children:[a.jsx(_4,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-400"}),a.jsx("input",{type:"text",placeholder:"Search beats, tags, or genres...",value:i,onChange:N=>o(N.target.value),className:"w-full pl-12 pr-4 py-4 glass rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border transition-all"})]}),a.jsxs("div",{className:"relative w-full md:w-auto",children:[a.jsx(y4,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-400"}),a.jsx("select",{value:u,onChange:N=>l(N.target.value),className:"w-full md:w-48 pl-12 pr-4 py-4 glass rounded-xl text-white focus:outline-none focus:neon-border transition-all appearance-none cursor-pointer",children:x.map(N=>a.jsx("option",{value:N,className:"bg-gray-900",children:N},N))})]})]}),d?a.jsx("div",{className:"flex justify-center items-center py-20",children:a.jsx("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin neon-border"})}):r.length===0?a.jsx("div",{className:"text-center py-20",children:a.jsx("p",{className:"text-2xl text-gray-400",children:"No beats found matching your criteria"})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(N=>a.jsx(C4,{beat:N,onAddToCart:t},N.id))})]})})}function j4(){return a.jsx("section",{id:"music",className:"py-24 px-4 bg-black",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-6xl font-bold mb-4 neon-glow",children:"Music"}),a.jsx("p",{className:"text-xl text-gray-400",children:"Stream my latest tracks across all platforms"})]}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(x4,{className:"w-8 h-8 text-purple-400"}),a.jsx("h3",{className:"text-3xl font-bold neon-glow",children:"Spotify"})]}),a.jsx("div",{className:"rounded-xl overflow-hidden",children:a.jsx("iframe",{style:{borderRadius:"12px"},src:"https://open.spotify.com/embed/artist/6o3BlWTeK4EKUyByo35y6F?utm_source=generator",width:"100%",height:"352",frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})}),a.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"mt-6 w-full inline-block text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Open in Spotify"})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(jm,{className:"w-8 h-8 text-purple-400"}),a.jsx("h3",{className:"text-3xl font-bold neon-glow",children:"YouTube"})]}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Watch my latest beat making sessions, tutorials, and behind-the-scenes content"}),a.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"inline-block w-full text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Visit Channel"})]}),a.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(km,{className:"w-8 h-8 text-purple-400"}),a.jsx("h3",{className:"text-3xl font-bold neon-glow",children:"SoundCloud"})]}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Exclusive releases, works in progress, and experimental tracks"}),a.jsx("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"inline-block w-full text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Listen on SoundCloud"})]})]})]}),a.jsxs("div",{className:"mt-12 glass rounded-2xl p-8 neon-border text-center",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"Want exclusive releases?"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Subscribe to get early access to new beats, free downloads, and special offers"}),a.jsxs("div",{className:"flex gap-4 max-w-md mx-auto",children:[a.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all"}),a.jsx("button",{className:"px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Subscribe"})]})]})]})})}function R4(){return a.jsx("section",{className:"py-24 px-4 bg-gradient-to-b from-purple-950/20 to-black",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[a.jsx(Ax,{className:"w-8 h-8 text-purple-400"}),a.jsx("h2",{className:"text-6xl font-bold neon-glow",children:"Live Studio"})]}),a.jsx("p",{className:"text-xl text-gray-400",children:"Watch beats being made in real-time"})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("div",{className:"glass rounded-2xl overflow-hidden neon-border aspect-video relative",children:a.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-900/20 to-black flex items-center justify-center relative",children:[a.jsx("img",{src:"https://images.pexels.com/photos/164938/pexels-photo-164938.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Studio",className:"absolute inset-0 w-full h-full object-cover opacity-30"}),a.jsxs("div",{className:"relative text-center z-10",children:[a.jsx(Ax,{className:"w-20 h-20 text-purple-400 mx-auto mb-4"}),a.jsx("p",{className:"text-2xl font-bold text-purple-300 mb-2",children:"Currently Offline"}),a.jsx("p",{className:"text-gray-400",children:"Check back soon for the next session"})]})]})}),a.jsxs("div",{className:"mt-6 glass rounded-2xl p-6 neon-border-subtle",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"About Live Sessions"}),a.jsx("p",{className:"text-gray-400 leading-relaxed",children:"Join me in the studio as I create beats from scratch. Watch the creative process, ask questions in real-time, and get insider tips on production techniques. Sessions include beat making, mixing, sound design, and more."})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),a.jsx("span",{className:"font-semibold text-lg",children:"OFFLINE"})]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Next stream coming soon"})]}),a.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(p4,{className:"w-6 h-6 text-purple-400"}),a.jsx("h3",{className:"text-xl font-bold",children:"Upcoming Streams"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Ix,{className:"w-4 h-4 text-purple-400"}),a.jsx("span",{className:"text-sm text-gray-400",children:"This Friday, 8:00 PM"})]}),a.jsx("p",{className:"font-semibold text-purple-200",children:"Beat Making Session"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Trap & Drill production"})]}),a.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Ix,{className:"w-4 h-4 text-purple-400"}),a.jsx("span",{className:"text-sm text-gray-400",children:"Next Monday, 7:00 PM"})]}),a.jsx("p",{className:"font-semibold text-purple-200",children:"Q&A + Production Tips"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Ask me anything"})]})]})]}),a.jsx("button",{className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold transition-all neon-border hover:scale-105",children:"Set Reminder"}),a.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 text-purple-300",children:"Follow on Socials"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Get notified when I go live and never miss a session"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"YouTube"}),a.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"Instagram"})]})]})]})]})]})})}function P4(){const[t,e]=S.useState({name:"",email:"",subject:"commission",message:""}),n=r=>{r.preventDefault(),console.log("Form submitted:",t)};return a.jsx("section",{id:"contact",className:"py-24 px-4 bg-black",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-6xl font-bold mb-4 neon-glow",children:"Get In Touch"}),a.jsx("p",{className:"text-xl text-gray-400",children:"Let's create something amazing together"})]}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle mb-8",children:[a.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Contact Info"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(VE,{className:"w-6 h-6 text-purple-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold mb-1",children:"Email"}),a.jsx("a",{href:"mailto:contact@jonnarincon.com",className:"text-purple-400 hover:text-purple-300 transition-colors",children:"contact@jonnarincon.com"})]})]}),a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(At,{className:"w-6 h-6 text-purple-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold mb-1",children:"Response Time"}),a.jsx("p",{className:"text-gray-400",children:"Usually within 24 hours"})]})]})]})]}),a.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[a.jsx("h3",{className:"text-2xl font-bold mb-6 text-purple-300",children:"Connect"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[a.jsx(LE,{className:"w-6 h-6 text-purple-400"}),a.jsx("span",{className:"font-semibold",children:"Instagram"})]}),a.jsxs("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[a.jsx(jm,{className:"w-6 h-6 text-purple-400"}),a.jsx("span",{className:"font-semibold",children:"YouTube"})]}),a.jsxs("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[a.jsx(km,{className:"w-6 h-6 text-purple-400"}),a.jsx("span",{className:"font-semibold",children:"SoundCloud"})]}),a.jsxs("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[a.jsx(At,{className:"w-6 h-6 text-purple-400"}),a.jsx("span",{className:"font-semibold",children:"Spotify"})]})]})]})]}),a.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[a.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Send a Message"}),a.jsxs("form",{onSubmit:n,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Name"}),a.jsx("input",{type:"text",required:!0,value:t.name,onChange:r=>e({...t,name:r.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"Your name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Email"}),a.jsx("input",{type:"email",required:!0,value:t.email,onChange:r=>e({...t,email:r.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"your@email.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Subject"}),a.jsxs("select",{value:t.subject,onChange:r=>e({...t,subject:r.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white focus:outline-none focus:neon-border-subtle transition-all appearance-none cursor-pointer",children:[a.jsx("option",{value:"commission",children:"Beat Commission"}),a.jsx("option",{value:"collaboration",children:"Collaboration"}),a.jsx("option",{value:"booking",children:"Booking"}),a.jsx("option",{value:"general",children:"General Inquiry"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Message"}),a.jsx("textarea",{required:!0,value:t.message,onChange:r=>e({...t,message:r.target.value}),rows:6,className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all resize-none",placeholder:"Tell me about your project..."})]}),a.jsx("button",{type:"submit",className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold text-lg transition-all neon-border hover:scale-105",children:"Send Message"})]})]})]})]})})}function D4(){return a.jsx("footer",{className:"bg-gradient-to-t from-purple-950/30 to-black border-t border-purple-500/30 py-12 px-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"grid md:grid-cols-3 gap-12 mb-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(At,{className:"w-8 h-8 text-purple-400 neon-glow"}),a.jsx("span",{className:"text-2xl font-bold neon-glow",children:"JONNA RINCON"})]}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Professional producer and beatmaker crafting premium beats for artists worldwide."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Quick Links"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("a",{href:"#beats",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Browse Beats"}),a.jsx("a",{href:"#music",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Listen to Music"}),a.jsx("a",{href:"#contact",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Get in Touch"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Follow"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:a.jsx(LE,{className:"w-5 h-5"})}),a.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:a.jsx(jm,{className:"w-5 h-5"})}),a.jsx("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:a.jsx(km,{className:"w-5 h-5"})}),a.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:a.jsx(At,{className:"w-5 h-5"})})]})]})]}),a.jsxs("div",{className:"border-t border-purple-500/30 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Copyright  2025 Jonna Rincon. All Rights Reserved."}),a.jsxs("div",{className:"flex gap-6 text-sm",children:[a.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Terms of Service"})]})]})]})})}function O4({isOpen:t,onClose:e,items:n,onRemoveItem:r,onCheckout:s}){const i=n.reduce((o,u)=>o+u.price,0);return t?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-40",onClick:e}),a.jsx("div",{className:"fixed right-0 top-0 h-full w-full md:w-[450px] glass border-l border-purple-500/30 z-50 overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ms,{className:"w-6 h-6 text-purple-400"}),a.jsx("h2",{className:"text-2xl font-bold neon-glow",children:"Shopping Cart"})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-purple-900/30 rounded-lg transition-all",children:a.jsx(Za,{className:"w-6 h-6"})})]}),n.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx(Ms,{className:"w-20 h-20 text-purple-400/30 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"Your cart is empty"}),a.jsx("button",{onClick:e,className:"mt-6 px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-full font-semibold transition-all neon-border-subtle",children:"Browse Beats"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4 mb-6",children:n.map((o,u)=>a.jsx("div",{className:"glass rounded-xl p-4 neon-border-subtle",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("img",{src:o.beat.artwork_url,alt:o.beat.title,className:"w-20 h-20 rounded-lg object-cover"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg text-purple-200",children:o.beat.title}),a.jsx("p",{className:"text-sm text-gray-400 mb-2",children:o.beat.artist}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs px-2 py-1 bg-purple-900/30 rounded-full border border-purple-500/30",children:o.license.charAt(0).toUpperCase()+o.license.slice(1)}),a.jsxs("span",{className:"text-xs text-gray-400",children:[o.beat.bpm," BPM  ",o.beat.key]})]})]}),a.jsxs("div",{className:"flex flex-col items-end justify-between",children:[a.jsx("button",{onClick:()=>r(o.beat.id),className:"p-2 hover:bg-red-900/30 rounded-lg transition-all text-red-400",children:a.jsx(FE,{className:"w-4 h-4"})}),a.jsxs("span",{className:"font-bold text-purple-300",children:["",o.price.toFixed(2)]})]})]})},`${o.beat.id}-${o.license}-${u}`))}),a.jsxs("div",{className:"border-t border-purple-500/30 pt-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"text-lg text-gray-400",children:"Subtotal"}),a.jsxs("span",{className:"text-2xl font-bold text-purple-300 neon-glow",children:["",i.toFixed(2)]})]}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"All beats include instant download and license agreement"}),a.jsx("button",{onClick:s,className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold text-lg transition-all neon-border hover:scale-105",children:"Proceed to Checkout"})]}),a.jsxs("div",{className:"glass rounded-xl p-4 neon-border-subtle",children:[a.jsx("h3",{className:"font-semibold mb-2 text-purple-200",children:"License Info"}),a.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[a.jsx("li",{children:" Basic: MP3 download, unlimited plays"}),a.jsx("li",{children:" Premium: WAV + stems, commercial use"}),a.jsx("li",{children:" Exclusive: Full rights, no resale"})]})]})]})]})})]}):null}function L4(){const[t,e]=S.useState([]),[n,r]=S.useState(!1),s=(u,l)=>{let d=u.price;l==="premium"&&(d=u.price*1.5),l==="exclusive"&&(d=u.price*3);const h={beat:u,license:l,price:d};e([...t,h]),r(!0)},i=u=>{e(t.filter(l=>l.beat.id!==u))},o=()=>{const u={email:"customer@example.com",beat_ids:t.map(l=>l.beat.id),total_amount:t.reduce((l,d)=>l+d.price,0),license_types:t.reduce((l,d)=>(l[d.beat.id]=d.license,l),{}),status:"pending"};ei.orders.create(u).then(()=>{alert("Order created successfully! Check console for details."),console.log("Order created:",u),e([])})};return a.jsxs("div",{className:"min-h-screen",children:[a.jsx(UE,{cartItemCount:t.length,onCartClick:()=>r(!0)}),a.jsx(O4,{isOpen:n,onClose:()=>r(!1),items:t,onRemoveItem:i,onCheckout:o}),a.jsxs("main",{className:"pt-20",children:[a.jsx(S4,{}),a.jsx(I4,{}),a.jsx(A4,{onAddToCart:s}),a.jsx(j4,{}),a.jsx(R4,{}),a.jsx(P4,{})]}),a.jsx(D4,{})]})}const V4=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(""),[o,u]=S.useState(!1),{signIn:l}=Ut(),d=rs(),h=async p=>{p.preventDefault(),i(""),u(!0);try{const m=await l(t,n);m.role==="admin"?d("/admin/dashboard"):m.role==="artist"?d("/artist/dashboard"):d("/customer/dashboard")}catch(m){i(m.message||"Failed to sign in")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:a.jsx("div",{className:"max-w-md w-full",children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-400",children:"Sign in to your account"})]}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s&&a.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:s}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:t,onChange:p=>e(p.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:n,onChange:p=>r(p.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),a.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:o?"Signing in...":"Sign In"})]}),a.jsxs("div",{className:"mt-6 text-center space-y-2",children:[a.jsxs("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",a.jsx(ne,{to:"/register",className:"text-purple-400 hover:text-purple-300",children:"Create one"})]}),a.jsx("p",{className:"text-sm text-gray-400",children:a.jsx(ne,{to:"/",className:"text-purple-400 hover:text-purple-300",children:"Back to home"})})]})]})})})},M4=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(""),[o,u]=S.useState(""),[l,d]=S.useState(""),[h,p]=S.useState(!1),{signUp:m}=Ut(),x=rs(),N=async C=>{if(C.preventDefault(),d(""),n!==s){d("Passwords do not match");return}if(n.length<6){d("Password must be at least 6 characters");return}p(!0);try{const j=await m(t,n,o);x("/customer/dashboard")}catch(j){d(j.message||"Failed to create account")}finally{p(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:a.jsx("div",{className:"max-w-md w-full",children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Create Account"}),a.jsx("p",{className:"text-gray-400",children:"Join Jonna Rincon's beat store"})]}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l&&a.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:l}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),a.jsx("input",{id:"displayName",type:"text",value:o,onChange:C=>u(C.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Your name"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:t,onChange:C=>e(C.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:n,onChange:C=>r(C.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),a.jsx("input",{id:"confirmPassword",type:"password",value:s,onChange:C=>i(C.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),a.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:h?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",a.jsx(ne,{to:"/login",className:"text-purple-400 hover:text-purple-300",children:"Sign in"})]})})]})})})},F4=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState({sortBy:"newest"});S.useEffect(()=>{o()},[s]);const o=async()=>{try{r(!0);let d=await Xr.getPublishedBeats();if(s.genre&&(d=d.filter(h=>h.genre===s.genre)),s.search){const h=s.search.toLowerCase();d=d.filter(p=>p.title.toLowerCase().includes(h)||p.artist.toLowerCase().includes(h)||p.tags.some(m=>m.toLowerCase().includes(h)))}d.sort((h,p)=>{var m,x,N,C;switch(s.sortBy){case"newest":return p.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return p.plays-h.plays;case"price_low":return(((m=h.licenses.basic)==null?void 0:m.price)||0)-(((x=p.licenses.basic)==null?void 0:x.price)||0);case"price_high":return(((N=p.licenses.basic)==null?void 0:N.price)||0)-(((C=h.licenses.basic)==null?void 0:C.price)||0);default:return 0}}),e(d)}catch(l){console.error("Failed to load beats:",l)}finally{r(!1)}},u=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[a.jsx(UE,{}),a.jsxs("div",{className:"container mx-auto px-4 pt-28 pb-12",children:[a.jsxs("div",{className:"mb-12 text-center",children:[a.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Premium Beats"}),a.jsx("p",{className:"text-xl text-gray-400",children:"Explore high-quality beats by Jonna Rincon"})]}),a.jsx("div",{className:"mb-8 bg-gray-800 rounded-lg p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Search beats...",value:s.search||"",onChange:l=>i({...s,search:l.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500"}),a.jsxs("select",{value:s.genre||"",onChange:l=>i({...s,genre:l.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[a.jsx("option",{value:"",children:"All Genres"}),u.map(l=>a.jsx("option",{value:l,children:l},l))]}),a.jsxs("select",{value:s.sortBy,onChange:l=>i({...s,sortBy:l.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"popular",children:"Most Popular"}),a.jsx("option",{value:"price_low",children:"Price: Low to High"}),a.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(s.genre||s.search)&&a.jsx("button",{onClick:()=>i({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 transition",children:"Clear Filters"})]})}),n?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl",children:"Loading beats..."})}):t.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("p",{className:"text-xl mb-2",children:"No beats found"}),a.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(l=>{var d;return a.jsxs(ne,{to:`/shop/beats/${l.id}`,className:"bg-gray-800 rounded-lg overflow-hidden hover:transform hover:scale-105 transition-all duration-200",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:l.artworkUrl||"/placeholder-beat.png",alt:l.title,className:"w-full h-48 object-cover"}),l.featured&&a.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),l.trending&&a.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-lg mb-2",children:l.title}),a.jsx("div",{className:"text-sm text-gray-400 mb-3",children:l.artist}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[a.jsxs("span",{children:[l.bpm," BPM"]}),a.jsx("span",{children:""}),a.jsx("span",{children:l.key}),a.jsx("span",{children:""}),a.jsx("span",{children:l.genre})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[a.jsxs("span",{children:[" ",l.plays.toLocaleString()]}),a.jsxs("span",{children:[" ",l.likes.toLocaleString()]}),a.jsxs("span",{children:[" ",l.downloads.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),a.jsxs("div",{className:"font-bold text-lg",children:["",((d=l.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),a.jsx("div",{className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition",children:"View Beat"})]})]})]},l.id)})}),!n&&t.length>0&&a.jsxs("div",{className:"mt-8 text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})]})},Zr=({children:t})=>{var h,p;const[e,n]=S.useState(!0),{user:r,signOut:s}=Ut(),i=pn(),o=rs(),u=async()=>{await s(),o("/")},l=[{name:"Dashboard",href:"/customer/dashboard",icon:Cm},{name:"Shop Beats",href:"/customer/shop",icon:At},{name:"My Orders",href:"/customer/orders",icon:Ms},{name:"Downloads",href:"/customer/downloads",icon:Ui},{name:"Profile",href:"/customer/profile",icon:ru}],d=m=>i.pathname===m;return a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Customer"})]}),a.jsx("button",{onClick:()=>n(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:a.jsx(Za,{size:20})})]}),a.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=r==null?void 0:r.displayName)==null?void 0:h[0])||((p=r==null?void 0:r.email)==null?void 0:p[0])||"C"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(r==null?void 0:r.displayName)||"Customer"}),a.jsx("p",{className:"text-xs text-gray-400 truncate",children:r==null?void 0:r.email})]})]})}),a.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:l.map(m=>{const x=m.icon;return a.jsxs(ne,{to:m.href,onClick:()=>n(!1),className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(m.href)?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[a.jsx(x,{size:18,className:"flex-shrink-0"}),a.jsx("span",{className:"font-medium",children:m.name})]},m.name)})}),a.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:a.jsxs("button",{onClick:u,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[a.jsx(Qu,{size:18,className:"flex-shrink-0"}),a.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),a.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[a.jsx("button",{onClick:()=>n(!e),className:"text-gray-400 hover:text-white lg:hidden",children:a.jsx(Yu,{size:24})}),a.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:a.jsx("div",{className:"text-right hidden sm:block",children:a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),a.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>n(!1)})]})},U4=()=>{const{user:t}=Ut(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState({totalOrders:0,totalSpent:0,totalDownloads:0});S.useEffect(()=>{if(!t)return;(async()=>{try{const d=await or.getOrdersByCustomer(t.email),h=d.slice(0,5);n(h);const p=d.filter(x=>x.status==="completed").reduce((x,N)=>x+N.total,0),m=d.filter(x=>x.status==="completed").reduce((x,N)=>x+N.items.length,0);o({totalOrders:d.length,totalSpent:p,totalDownloads:m})}catch(d){console.error("Failed to load dashboard data:",d)}finally{s(!1)}})()},[t]);const u=[{name:"Total Orders",value:i.totalOrders,icon:Xo,change:i.totalOrders>0?`${i.totalOrders} orders placed`:"No orders yet",changeType:"neutral"},{name:"Total Spent",value:`${i.totalSpent.toFixed(2)}`,icon:Aa,change:i.totalSpent>0?"On beats & licenses":"Start shopping",changeType:"neutral"},{name:"Total Downloads",value:i.totalDownloads,icon:Ui,change:`${i.totalDownloads} beats owned`,changeType:"positive"}];return r?a.jsx(Zr,{children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):a.jsx(Zr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),a.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Customer","!"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.map(l=>{const d=l.icon;return a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-blue-500/50 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:l.name}),a.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:l.value}),a.jsx("p",{className:"text-sm mt-2 text-gray-400",children:l.change})]}),a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 rounded-xl",children:a.jsx(d,{size:32,className:"text-white"})})]})},l.name)})}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Orders"}),a.jsx(ne,{to:"/customer/orders",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View All "})]}),e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No orders yet"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Start shopping to see your orders here"}),a.jsx(ne,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):a.jsx("div",{className:"space-y-4",children:e.map(l=>{var d,h,p;return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white font-medium",children:l.orderNumber}),a.jsxs("p",{className:"text-sm text-gray-400",children:[l.items.length," item(s)  ",((p=(h=(d=l.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:p.toLocaleDateString())||"N/A"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-white font-semibold",children:["",l.total.toFixed(2)]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${l.status==="completed"?"bg-green-500/20 text-green-400":l.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:l.status})]})]},l.id)})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs(ne,{to:"/shop/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[a.jsx(Xo,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),a.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Find your next hit"})]}),a.jsxs(ne,{to:"/customer/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[a.jsx(Xo,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"My Orders"}),a.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"View order history"})]}),a.jsxs(ne,{to:"/customer/downloads",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[a.jsx(Ui,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"Downloads"}),a.jsx("p",{className:"text-green-100 text-sm mt-1",children:"Access your beats"})]}),a.jsxs(ne,{to:"/customer/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[a.jsx(Am,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),a.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]})]})})},B4=()=>{const{user:t}=Ut(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState("all");S.useEffect(()=>{if(!t)return;(async()=>{try{const d=await or.getOrdersByCustomer(t.email);n(d)}catch(d){console.error("Failed to load orders:",d)}finally{s(!1)}})()},[t]);const u=e.filter(l=>i==="all"?!0:l.status===i);return r?a.jsx(Zr,{children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl text-white",children:"Loading orders..."})})}):a.jsx(Zr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Orders"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"View and manage your order history"})]}),a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:a.jsx("div",{className:"flex gap-4",children:["all","completed","processing","pending"].map(l=>a.jsxs("button",{onClick:()=>o(l),className:`px-4 py-2 rounded-lg capitalize transition ${i===l?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[l,a.jsxs("span",{className:"ml-2 text-xs",children:["(",l==="all"?e.length:e.filter(d=>d.status===l).length,")"]})]},l))})}),u.length===0?a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[a.jsx(v4,{size:64,className:"mx-auto mb-4 text-gray-600"}),a.jsx("p",{className:"text-xl text-white mb-2",children:"No orders found"}),a.jsx("p",{className:"text-gray-400 mb-6",children:i==="all"?"You haven't placed any orders yet":`No ${i} orders`}),a.jsx(ne,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):a.jsx("div",{className:"space-y-4",children:u.map(l=>{var d,h,p;return a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"bg-gray-700/50 p-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-lg text-white mb-1",children:l.orderNumber}),a.jsxs("div",{className:"text-sm text-gray-400",children:["Placed on ",((p=(h=(d=l.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:p.toLocaleDateString())||"N/A"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 ${l.status==="completed"?"bg-green-500/20 text-green-400":l.status==="processing"?"bg-blue-500/20 text-blue-400":l.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:l.status}),a.jsxs("div",{className:"font-bold text-white",children:["",l.total.toFixed(2)]})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"space-y-3",children:l.items.map((m,x)=>{var N;return a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:m.artworkUrl||"/placeholder-beat.png",alt:m.beatTitle,className:"w-16 h-16 rounded object-cover"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-white",children:m.beatTitle}),a.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[m.licenseType," License"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-semibold text-white",children:["",m.price.toFixed(2)]}),l.status==="completed"&&((N=l.downloadLinks)==null?void 0:N[m.beatId])&&a.jsxs("a",{href:l.downloadLinks[m.beatId],className:"inline-flex items-center gap-1 text-sm text-blue-400 hover:text-blue-300 mt-1",download:!0,children:[a.jsx(Ui,{size:14}),"Download"]})]})]},x)})}),l.status==="completed"&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700 flex gap-4",children:a.jsx(ne,{to:"/customer/downloads",className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"View All Downloads "})})]})]},l.id)})})]})})},z4=()=>{const{user:t}=Ut(),[e,n]=S.useState([]),[r,s]=S.useState(!0);return S.useEffect(()=>{if(!t)return;(async()=>{try{const o=await or.getOrdersByCustomer(t.email),u=[];o.filter(l=>l.status==="completed").forEach(l=>{l.items.forEach(d=>{var m,x,N,C,j,w;const h=(m=l.downloadLinks)==null?void 0:m[d.beatId],p=(x=l.licensePDFs)==null?void 0:x[d.beatId];h&&u.push({...d,orderId:l.id,orderNumber:l.orderNumber,downloadUrl:h,licenseUrl:p,purchasedAt:((C=(N=l.completedAt)==null?void 0:N.toDate)==null?void 0:C.call(N))||((w=(j=l.createdAt)==null?void 0:j.toDate)==null?void 0:w.call(j))||new Date})})}),u.sort((l,d)=>d.purchasedAt.getTime()-l.purchasedAt.getTime()),n(u)}catch(o){console.error("Failed to load downloads:",o)}finally{s(!1)}})()},[t]),r?a.jsx(Zr,{children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl text-white",children:"Loading downloads..."})})}):a.jsx(Zr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Downloads"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Access all your purchased beats and licenses"})]}),a.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-8",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-1",children:"Download Tips"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[a.jsx("li",{children:" All purchases include unlimited re-downloads"}),a.jsx("li",{children:" Download your license agreement for legal protection"}),a.jsx("li",{children:" Files are available in high-quality formats"})]})]})]})}),e.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("p",{className:"text-xl mb-2",children:"No downloads available"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Purchase beats to access downloads"}),a.jsx(ne,{to:"/shop/beats",className:"inline-block bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition",children:"Browse Beats"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((i,o)=>a.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-750 transition",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:i.artworkUrl||"/placeholder-beat.png",alt:i.beatTitle,className:"w-full h-48 object-cover"}),a.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs capitalize",children:[i.licenseType," License"]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-lg mb-2",children:i.beatTitle}),a.jsxs("div",{className:"text-sm text-gray-400 mb-4",children:["Purchased: ",i.purchasedAt.toLocaleDateString()]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("a",{href:i.downloadUrl,className:"block w-full bg-purple-600 hover:bg-purple-700 text-center py-2 rounded transition",download:!0,children:" Download Beat"}),i.licenseUrl&&a.jsx("a",{href:i.licenseUrl,className:"block w-full bg-gray-700 hover:bg-gray-600 text-center py-2 rounded transition text-sm",download:!0,children:" Download License"})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:a.jsxs(ne,{to:"/customer/orders",className:"text-xs text-gray-400 hover:text-gray-300",children:["Order: ",i.orderNumber," "]})})]})]},o))}),e.length>0&&a.jsxs("div",{className:"mt-12 bg-gray-800 rounded-lg p-6 text-center",children:[a.jsx("h3",{className:"font-bold mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Having trouble downloading? Contact support for assistance."}),a.jsx("a",{href:"mailto:support@jonnarincon.com",className:"text-purple-400 hover:text-purple-300",children:"support@jonnarincon.com"})]})]})})},Px=()=>{var w,_;const{user:t,signOut:e}=Ut(),[n,r]=S.useState(!1),[s,i]=S.useState((t==null?void 0:t.displayName)||""),[o,u]=S.useState(""),[l,d]=S.useState(""),[h,p]=S.useState(!1),[m,x]=S.useState(null),N=async y=>{y.preventDefault(),p(!0),x(null);try{await he.updateUserProfile({displayName:s}),x({type:"success",text:"Profile updated successfully!"}),r(!1)}catch(D){x({type:"error",text:D.message||"Failed to update profile"})}finally{p(!1)}},C=async y=>{if(y.preventDefault(),p(!0),x(null),o!==l){x({type:"error",text:"Passwords do not match"}),p(!1);return}if(o.length<6){x({type:"error",text:"Password must be at least 6 characters"}),p(!1);return}try{await he.updateUserPassword(o),x({type:"success",text:"Password updated successfully!"}),u(""),d("")}catch(D){x({type:"error",text:D.message||"Failed to update password"})}finally{p(!1)}},j=async()=>{try{await e()}catch(y){console.error("Sign out error:",y)}};return a.jsx(Zr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4",children:((_=(w=t==null?void 0:t.displayName)==null?void 0:w.charAt(0))==null?void 0:_.toUpperCase())||a.jsx(ru,{size:32,className:"text-white"})}),a.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:(t==null?void 0:t.displayName)||"Customer"}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:t==null?void 0:t.email}),a.jsx("div",{className:"inline-block px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs font-semibold border border-blue-700",children:"Customer Account"})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m&&a.jsx("div",{className:`p-4 rounded-lg border ${m.type==="success"?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"}`,children:m.text}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),!n&&a.jsx("button",{onClick:()=>r(!0),className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"Edit"})]}),n?a.jsxs("form",{onSubmit:N,children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[a.jsx(ru,{size:16,className:"inline mr-1"})," Display Name"]}),a.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[a.jsx(VE,{size:16,className:"inline mr-1"})," Email"]}),a.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-gray-400 opacity-50 cursor-not-allowed",disabled:!0}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(pi,{size:16})," ",h?"Saving...":"Save Changes"]}),a.jsx("button",{type:"button",onClick:()=>{r(!1),i((t==null?void 0:t.displayName)||"")},className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Display Name"}),a.jsx("div",{className:"font-semibold text-white",children:(t==null?void 0:t.displayName)||"Not set"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Email"}),a.jsx("div",{className:"font-semibold text-white",children:t==null?void 0:t.email})]})]})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Change Password"}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[a.jsx(Cx,{size:16,className:"inline mr-1"})," New Password"]}),a.jsx("input",{type:"password",value:o,onChange:y=>u(y.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Enter new password",minLength:6})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[a.jsx(Cx,{size:16,className:"inline mr-1"})," Confirm New Password"]}),a.jsx("input",{type:"password",value:l,onChange:y=>d(y.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Confirm new password",minLength:6})]}),a.jsxs("button",{type:"submit",disabled:h||!o||!l,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(pi,{size:16})," ",h?"Updating...":"Update Password"]})]})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Actions"}),a.jsxs("button",{onClick:j,className:"w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[a.jsx(Qu,{size:20})," Sign Out"]})]})]})]})]})})},$4=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState({sortBy:"newest"});S.useEffect(()=>{o()},[s]);const o=async()=>{try{r(!0);let d=await Xr.getPublishedBeats();if(s.genre&&(d=d.filter(h=>h.genre===s.genre)),s.search){const h=s.search.toLowerCase();d=d.filter(p=>p.title.toLowerCase().includes(h)||p.artist.toLowerCase().includes(h)||p.tags.some(m=>m.toLowerCase().includes(h)))}d.sort((h,p)=>{var m,x,N,C;switch(s.sortBy){case"newest":return p.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return p.plays-h.plays;case"price_low":return(((m=h.licenses.basic)==null?void 0:m.price)||0)-(((x=p.licenses.basic)==null?void 0:x.price)||0);case"price_high":return(((N=p.licenses.basic)==null?void 0:N.price)||0)-(((C=h.licenses.basic)==null?void 0:C.price)||0);default:return 0}}),e(d)}catch(l){console.error("Failed to load beats:",l)}finally{r(!1)}},u=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return a.jsx(Zr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and purchase high-quality beats by Jonna Rincon"})]}),a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Search beats...",value:s.search||"",onChange:l=>i({...s,search:l.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),a.jsxs("select",{value:s.genre||"",onChange:l=>i({...s,genre:l.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Genres"}),u.map(l=>a.jsx("option",{value:l,children:l},l))]}),a.jsxs("select",{value:s.sortBy,onChange:l=>i({...s,sortBy:l.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"popular",children:"Most Popular"}),a.jsx("option",{value:"price_low",children:"Price: Low to High"}),a.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(s.genre||s.search)&&a.jsx("button",{onClick:()=>i({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),n?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx(At,{size:64,className:"mx-auto mb-4 text-gray-600"}),a.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),a.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(l=>{var d;return a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-blue-500/50 transition-all hover:transform hover:scale-105",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:l.artworkUrl||"/placeholder-beat.png",alt:l.title,className:"w-full h-48 object-cover"}),l.featured&&a.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),l.trending&&a.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 rounded-full p-4 transition-all hover:scale-110",children:a.jsx(Vs,{size:32,className:"text-white"})})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:l.title}),a.jsx("div",{className:"text-sm text-gray-400 mb-3",children:l.artist}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[a.jsxs("span",{children:[l.bpm," BPM"]}),a.jsx("span",{children:""}),a.jsx("span",{children:l.key}),a.jsx("span",{children:""}),a.jsx("span",{children:l.genre})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Vs,{size:12})," ",l.plays.toLocaleString()]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(OE,{size:12})," ",l.likes.toLocaleString()]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ui,{size:12})," ",l.downloads.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),a.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=l.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),a.jsx(ne,{to:`/customer/shop/${l.id}`,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},l.id)})}),!n&&t.length>0&&a.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},ja=({children:t})=>{var h,p;const[e,n]=S.useState(!0),{user:r,signOut:s}=Ut(),i=pn(),o=rs(),u=async()=>{await s(),o("/")},l=[{name:"Dashboard",href:"/artist/dashboard",icon:Cm},{name:"Collaborations",href:"/artist/collaborations",icon:Bi},{name:"Shop Beats",href:"/artist/beats",icon:At},{name:"My Purchases",href:"/customer/orders",icon:Ms},{name:"Profile",href:"/artist/profile",icon:ru}],d=m=>i.pathname===m;return a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Artist"})]}),a.jsx("button",{onClick:()=>n(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:a.jsx(Za,{size:20})})]}),a.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=r==null?void 0:r.displayName)==null?void 0:h[0])||((p=r==null?void 0:r.email)==null?void 0:p[0])||"A"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(r==null?void 0:r.displayName)||"Artist"}),a.jsx("p",{className:"text-xs text-gray-400 truncate",children:r==null?void 0:r.email})]})]})}),a.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:l.map(m=>{const x=m.icon;return a.jsxs(ne,{to:m.href,onClick:()=>n(!1),className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(m.href)?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[a.jsx(x,{size:18,className:"flex-shrink-0"}),a.jsx("span",{className:"font-medium",children:m.name})]},m.name)})}),a.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:a.jsxs("button",{onClick:u,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[a.jsx(Qu,{size:18,className:"flex-shrink-0"}),a.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),a.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[a.jsx("button",{onClick:()=>n(!e),className:"text-gray-400 hover:text-white lg:hidden",children:a.jsx(Yu,{size:24})}),a.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:a.jsx("div",{className:"text-right hidden sm:block",children:a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),a.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>n(!1)})]})},q4=()=>{const{user:t}=Ut(),[e,n]=S.useState([]),[r,s]=S.useState([]),[i,o]=S.useState(!0),[u,l]=S.useState({activeCollaborations:0,completedCollaborations:0,beatsPurchased:0,totalSpent:0});S.useEffect(()=>{if(!t)return;(async()=>{try{const m=(await Ca.getAll()).filter(_=>_.clientEmail===t.email||_.assignedTo===t.uid);n(m.slice(0,5));const x=await or.getOrdersByCustomer(t.email);s(x);const N=m.filter(_=>_.status==="in_progress"||_.status==="agreed"||_.status==="signed").length,C=m.filter(_=>_.status==="completed").length,j=x.filter(_=>_.status==="completed").reduce((_,y)=>_+y.items.length,0),w=x.filter(_=>_.status==="completed").reduce((_,y)=>_+y.total,0);l({activeCollaborations:N,completedCollaborations:C,beatsPurchased:j,totalSpent:w})}catch(p){console.error("Failed to load dashboard data:",p)}finally{o(!1)}})()},[t]);const d=[{name:"Active Collaborations",value:u.activeCollaborations,icon:Bi,change:`${u.completedCollaborations} completed`,changeType:"positive"},{name:"Beats Purchased",value:u.beatsPurchased,icon:At,change:u.beatsPurchased>0?"From Jonna Rincon":"Browse beats",changeType:"neutral"},{name:"Total Spent",value:`${u.totalSpent.toFixed(2)}`,icon:Aa,change:"On beats & licenses",changeType:"neutral"}];return i?a.jsx(ja,{children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):a.jsx(ja,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Artist Dashboard"}),a.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Artist","!"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map(h=>{const p=h.icon;return a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-orange-500/50 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:h.name}),a.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:h.value}),a.jsx("p",{className:`text-sm mt-2 ${h.changeType==="positive"?"text-green-400":"text-gray-400"}`,children:h.change})]}),a.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 rounded-xl",children:a.jsx(p,{size:32,className:"text-white"})})]})},h.name)})}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Active Collaborations"}),a.jsx(ne,{to:"/artist/collaborations",className:"text-orange-400 hover:text-orange-300 text-sm",children:"View All "})]}),e.filter(h=>h.status==="in_progress"||h.status==="signed").length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No active collaborations"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Check your collaboration page for inquiries"}),a.jsx(ne,{to:"/artist/collaborations",className:"inline-block bg-gradient-to-r from-orange-600 to-red-600 px-6 py-3 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"})]}):a.jsx("div",{className:"space-y-4",children:e.filter(h=>h.status==="in_progress"||h.status==="signed").map(h=>{var p,m,x;return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white font-medium",children:h.title}),a.jsxs("p",{className:"text-sm text-gray-400 capitalize",children:[h.type,"  ",h.status.replace("_"," ")]})]}),a.jsxs("div",{className:"text-right",children:[h.budget&&a.jsxs("p",{className:"text-white font-semibold",children:["",h.budget.toFixed(2)]}),h.deadline&&a.jsxs("p",{className:"text-xs text-yellow-400",children:["Due: ",((x=(m=(p=h.deadline).toDate)==null?void 0:m.call(p))==null?void 0:x.toLocaleDateString())||"N/A"]})]})]},h.id)})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs(ne,{to:"/artist/collaborations",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[a.jsx(Bi,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"Collaborations"}),a.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Manage projects"})]}),a.jsxs(ne,{to:"/artist/beats",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[a.jsx(At,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),a.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Shop from Jonna"})]}),a.jsxs(ne,{to:"/customer/orders",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[a.jsx(Aa,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"My Purchases"}),a.jsx("p",{className:"text-green-100 text-sm mt-1",children:"View orders"})]}),a.jsxs(ne,{to:"/artist/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[a.jsx(Am,{size:32,className:"text-white mb-3"}),a.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),a.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]}),a.jsx("div",{className:"bg-orange-900/30 border border-orange-700 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-3xl",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-white mb-2",children:"Collaborate with Jonna Rincon"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"Work together on exclusive tracks, remixes, and productions. Get access to premium beats and collaborate on exciting projects."}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(ne,{to:"/artist/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-2 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"}),a.jsx(ne,{to:"/artist/beats",className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Browse Beats"})]})]})]})})]})})},H4=()=>{const{user:t}=Ut(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState("all");S.useEffect(()=>{if(!t)return;(async()=>{try{const h=(await Ca.getAll()).filter(p=>p.clientEmail===t.email||p.assignedTo===t.uid);n(h)}catch(d){console.error("Failed to load collaborations:",d)}finally{s(!1)}})()},[t]);const u=e.filter(l=>i==="all"?!0:l.status===i);return r?a.jsx(ja,{children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl text-white",children:"Loading collaborations..."})})}):a.jsx(ja,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Collaborations"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your collaboration projects with Jonna Rincon"})]}),a.jsx("div",{className:"flex gap-4 mb-8 border-b border-gray-700",children:["all","inquiry","in_progress","completed"].map(l=>a.jsxs("button",{onClick:()=>o(l),className:`px-4 py-2 capitalize transition ${i===l?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[l==="all"?"All":l.replace("_"," "),a.jsxs("span",{className:"ml-2 text-sm",children:["(",l==="all"?e.length:e.filter(d=>d.status===l).length,")"]})]},l))}),u.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("p",{className:"text-xl mb-2",children:"No collaborations found"}),a.jsx("p",{className:"text-gray-400 mb-6",children:i==="all"?"Start collaborating with Jonna Rincon today":`No ${i.replace("_"," ")} collaborations`}),a.jsx("a",{href:"mailto:info@jonnarincon.com",className:"inline-block bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition",children:"Contact for Collaboration"})]}):a.jsx("div",{className:"space-y-6",children:u.map(l=>{var d,h,p,m,x,N,C,j,w,_,y,D,M;return a.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-700 p-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-xl mb-2",children:l.title}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[a.jsx("span",{className:"capitalize",children:l.type}),l.budget&&a.jsxs("span",{children:["Budget: ",l.budget.toFixed(2)]}),l.startDate&&a.jsxs("span",{children:["Started: ",((p=(h=(d=l.startDate).toDate)==null?void 0:h.call(d))==null?void 0:p.toLocaleDateString())||"N/A"]})]})]}),a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${l.status==="completed"?"bg-green-900 text-green-300":l.status==="in_progress"?"bg-blue-900 text-blue-300":l.status==="signed"?"bg-purple-900 text-purple-300":l.status==="inquiry"?"bg-yellow-900 text-yellow-300":"bg-gray-600 text-gray-300"}`,children:l.status.replace("_"," ")})]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-200",children:l.description})]}),(l.startDate||l.endDate||l.deadline)&&a.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Timeline"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[l.startDate&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Start: "}),((N=(x=(m=l.startDate).toDate)==null?void 0:x.call(m))==null?void 0:N.toLocaleDateString())||"N/A"]}),l.deadline&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Deadline: "}),a.jsx("span",{className:"text-yellow-400",children:((w=(j=(C=l.deadline).toDate)==null?void 0:j.call(C))==null?void 0:w.toLocaleDateString())||"N/A"})]}),l.endDate&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"End: "}),((D=(y=(_=l.endDate).toDate)==null?void 0:y.call(_))==null?void 0:D.toLocaleDateString())||"N/A"]})]})]}),l.budget&&a.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Payment"}),a.jsxs("div",{className:"flex gap-8 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Budget: "}),"",l.budget.toFixed(2)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Paid: "}),"",l.paidAmount.toFixed(2)]}),a.jsx("div",{children:a.jsx("span",{className:`font-semibold ${l.paymentStatus==="paid"?"text-green-400":l.paymentStatus==="partial"?"text-yellow-400":"text-red-400"}`,children:l.paymentStatus==="paid"?"Paid in Full":l.paymentStatus==="partial"?"Partially Paid":"Unpaid"})})]})]}),(l.contractPDF||l.attachments&&l.attachments.length>0)&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Documents"}),a.jsxs("div",{className:"flex gap-2",children:[l.contractPDF&&a.jsx("a",{href:l.contractPDF,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:" Contract"}),(M=l.attachments)==null?void 0:M.map((F,E)=>a.jsxs("a",{href:F,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:[" Attachment ",E+1]},E))]})]}),l.notes&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-300",children:l.notes})]})]})]},l.id)})})]})})},W4=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState({sortBy:"newest"});S.useEffect(()=>{o()},[s]);const o=async()=>{try{r(!0);let d=await Xr.getPublishedBeats();if(s.genre&&(d=d.filter(h=>h.genre===s.genre)),s.search){const h=s.search.toLowerCase();d=d.filter(p=>p.title.toLowerCase().includes(h)||p.artist.toLowerCase().includes(h)||p.tags.some(m=>m.toLowerCase().includes(h)))}d.sort((h,p)=>{var m,x,N,C;switch(s.sortBy){case"newest":return p.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return p.plays-h.plays;case"price_low":return(((m=h.licenses.basic)==null?void 0:m.price)||0)-(((x=p.licenses.basic)==null?void 0:x.price)||0);case"price_high":return(((N=p.licenses.basic)==null?void 0:N.price)||0)-(((C=h.licenses.basic)==null?void 0:C.price)||0);default:return 0}}),e(d)}catch(l){console.error("Failed to load beats:",l)}finally{r(!1)}},u=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return a.jsx(ja,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and license high-quality beats by Jonna Rincon"})]}),a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Search beats...",value:s.search||"",onChange:l=>i({...s,search:l.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500"}),a.jsxs("select",{value:s.genre||"",onChange:l=>i({...s,genre:l.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[a.jsx("option",{value:"",children:"All Genres"}),u.map(l=>a.jsx("option",{value:l,children:l},l))]}),a.jsxs("select",{value:s.sortBy,onChange:l=>i({...s,sortBy:l.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"popular",children:"Most Popular"}),a.jsx("option",{value:"price_low",children:"Price: Low to High"}),a.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(s.genre||s.search)&&a.jsx("button",{onClick:()=>i({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),n?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx(At,{size:64,className:"mx-auto mb-4 text-gray-600"}),a.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),a.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(l=>{var d;return a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-orange-500/50 transition-all hover:transform hover:scale-105",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:l.artworkUrl||"/placeholder-beat.png",alt:l.title,className:"w-full h-48 object-cover"}),l.featured&&a.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),l.trending&&a.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx("button",{className:"bg-orange-600 hover:bg-orange-700 rounded-full p-4 transition-all hover:scale-110",children:a.jsx(Vs,{size:32,className:"text-white"})})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:l.title}),a.jsx("div",{className:"text-sm text-gray-400 mb-3",children:l.artist}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[a.jsxs("span",{children:[l.bpm," BPM"]}),a.jsx("span",{children:""}),a.jsx("span",{children:l.key}),a.jsx("span",{children:""}),a.jsx("span",{children:l.genre})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Vs,{size:12})," ",l.plays.toLocaleString()]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(OE,{size:12})," ",l.likes.toLocaleString()]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ui,{size:12})," ",l.downloads.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),a.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=l.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),a.jsx(ne,{to:`/artist/shop/${l.id}`,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},l.id)})}),!n&&t.length>0&&a.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},el=({children:t})=>{var h,p;const[e,n]=S.useState(!0),{user:r,signOut:s}=Ut(),i=pn(),o=rs(),u=async()=>{await s(),o("/admin/login")},l=[{name:"Dashboard",href:"/admin/dashboard",icon:Cm},{name:"Beats",href:"/admin/beats",icon:At},{name:"Orders",href:"/admin/orders",icon:Ms},{name:"Content",href:"/admin/content",icon:g4},{name:"Collaborations",href:"/admin/collaborations",icon:Bi},{name:"Analytics",href:"/admin/analytics",icon:f4},{name:"Settings",href:"/admin/settings",icon:b4}],d=m=>i.pathname===m;return a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Admin"})]}),a.jsx("button",{onClick:()=>n(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:a.jsx(Za,{size:20})})]}),a.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=r==null?void 0:r.displayName)==null?void 0:h[0])||((p=r==null?void 0:r.email)==null?void 0:p[0])||"A"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(r==null?void 0:r.displayName)||"Admin"}),a.jsx("p",{className:"text-xs text-gray-400 truncate",children:r==null?void 0:r.email})]})]})}),a.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:l.map(m=>{const x=m.icon;return a.jsxs(ne,{to:m.href,onClick:()=>n(!1),className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(m.href)?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[a.jsx(x,{size:18,className:"flex-shrink-0"}),a.jsx("span",{className:"font-medium",children:m.name})]},m.name)})}),a.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:a.jsxs("button",{onClick:u,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[a.jsx(Qu,{size:18,className:"flex-shrink-0"}),a.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),a.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[a.jsx("button",{onClick:()=>n(!e),className:"text-gray-400 hover:text-white lg:hidden",children:a.jsx(Yu,{size:24})}),a.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:a.jsx("div",{className:"text-right hidden sm:block",children:a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),a.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>n(!1)})]})},G4=t=>{const[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState(null);return S.useEffect(()=>{try{const u=or.subscribeToOrders(l=>{n(l),s(!1)},t);return()=>u()}catch(u){o(u.message),s(!1)}},[t==null?void 0:t.status,t==null?void 0:t.customerId]),{orders:e,loading:r,error:i}},K4=()=>{const[t,e]=S.useState({totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0,averageOrderValue:0}),[n,r]=S.useState(!0),[s,i]=S.useState(null);return S.useEffect(()=>{(async()=>{try{const u=await or.getOrderStatistics();e(u)}catch(u){i(u.message)}finally{r(!1)}})()},[]),{stats:t,loading:n,error:s,refetch:async()=>{r(!0);const o=await or.getOrderStatistics();e(o),r(!1)}}},Q4=t=>{const[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState(null);return S.useEffect(()=>{try{const u=Ca.subscribeToCollaborations(l=>{n(l),s(!1)},t);return()=>u()}catch(u){o(u.message),s(!1)}},[t==null?void 0:t.status,t==null?void 0:t.type]),{collaborations:e,loading:r,error:i}},Y4=()=>{const[t,e]=S.useState({total:0,active:0,completed:0,totalRevenue:0,pendingRevenue:0}),[n,r]=S.useState(!0),[s,i]=S.useState(null);return S.useEffect(()=>{(async()=>{try{const u=await Ca.getCollaborationStats();e(u)}catch(u){i(u.message)}finally{r(!1)}})()},[]),{stats:t,loading:n,error:s,refetch:async()=>{r(!0);const o=await Ca.getCollaborationStats();e(o),r(!1)}}},J4=()=>{const{stats:t}=K4(),{stats:e}=Y4(),[n,r]=S.useState(0),[s,i]=S.useState([]);S.useEffect(()=>{(async()=>{const l=await Xr.getAllBeats();r(l.data.length);const d=await or.getRecentOrders(5);i(d)})()},[]);const o=[{name:"Total Revenue",value:`${t.totalRevenue.toFixed(2)}`,icon:Aa,change:"+12.5%",changeType:"positive"},{name:"Total Orders",value:t.totalOrders,icon:Xo,change:`${t.pendingOrders} pending`,changeType:"neutral"},{name:"Total Beats",value:n,icon:At,change:"In catalog",changeType:"neutral"},{name:"Active Collaborations",value:e.active,icon:Bi,change:`${e.completed} completed`,changeType:"positive"},{name:"Avg Order Value",value:`${t.averageOrderValue.toFixed(2)}`,icon:Am,change:"+8.2%",changeType:"positive"},{name:"Pending Revenue",value:`${e.pendingRevenue.toFixed(2)}`,icon:Aa,change:"From collaborations",changeType:"neutral"}];return a.jsx(el,{children:a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Dashboard"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-400 mt-1 sm:mt-2",children:"Welcome back! Here's what's happening today."})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:o.map(u=>{const l=u.icon;return a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6 hover:border-purple-500/50 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:u.name}),a.jsx("p",{className:"text-xl sm:text-3xl font-bold text-white mt-1 sm:mt-2",children:u.value}),a.jsx("p",{className:`text-xs sm:text-sm mt-1 sm:mt-2 ${u.changeType==="positive"?"text-green-400":u.changeType==="negative"?"text-red-400":"text-gray-400"}`,children:u.change})]}),a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-2 sm:p-4 rounded-lg sm:rounded-xl flex-shrink-0",children:a.jsx(l,{size:20,className:"sm:w-8 sm:h-8 text-white"})})]})},u.name)})}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-3 sm:mb-4",children:"Recent Orders"}),a.jsx("div",{className:"space-y-2 sm:space-y-4",children:s.length===0?a.jsx("p",{className:"text-gray-400 text-center py-6 sm:py-8 text-sm sm:text-base",children:"No orders yet"}):s.map(u=>a.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-700/50 rounded hover:bg-gray-700 transition-colors gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-white font-medium text-sm sm:text-base truncate",children:u.orderNumber}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:u.customerEmail})]}),a.jsxs("div",{className:"text-right flex-shrink-0",children:[a.jsxs("p",{className:"text-white font-semibold text-sm sm:text-base",children:["",u.total.toFixed(2)]}),a.jsx("span",{className:`text-xs px-2 py-0.5 sm:py-1 rounded-full inline-block ${u.status==="completed"?"bg-green-500/20 text-green-400":u.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:u.status})]})]},u.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[a.jsxs("a",{href:"/admin/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[a.jsx(At,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),a.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Manage Beats"}),a.jsx("p",{className:"text-purple-100 text-xs sm:text-sm mt-1",children:"Add or edit beats"})]}),a.jsxs("a",{href:"/admin/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[a.jsx(Xo,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),a.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"View Orders"}),a.jsx("p",{className:"text-blue-100 text-xs sm:text-sm mt-1",children:"Process orders"})]}),a.jsxs("a",{href:"/admin/content",className:"bg-gradient-to-r from-green-600 to-teal-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[a.jsx(T4,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),a.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Content"}),a.jsx("p",{className:"text-green-100 text-xs sm:text-sm mt-1",children:"Manage content"})]}),a.jsxs("a",{href:"/admin/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[a.jsx(Bi,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),a.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Collaborations"}),a.jsx("p",{className:"text-orange-100 text-xs sm:text-sm mt-1",children:"Manage deals"})]})]})]})})},X4=t=>{const[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState(null);return S.useEffect(()=>{const u=Xr.subscribeToBeats(l=>{n(l),s(!1)},t);return()=>u()},[t==null?void 0:t.status,t==null?void 0:t.featured,t==null?void 0:t.genre]),{beats:e,loading:r,error:i,setError:o}},Z4=()=>{const{beats:t,loading:e}=X4(),[n,r]=S.useState(!1),[s,i]=S.useState(null),[o,u]=S.useState(null),l=()=>{i(null),r(!0)},d=m=>{i(m),r(!0)},h=async m=>{if(confirm("Are you sure you want to delete this beat?"))try{await Xr.deleteBeat(m),alert("Beat deleted successfully")}catch(x){alert(x.message)}},p=m=>{u(o===m?null:m)};return a.jsxs(el,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beats Management"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your beat catalog"})]}),a.jsxs("button",{onClick:l,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center space-x-2",children:[a.jsx(w4,{size:20}),a.jsx("span",{children:"Add Beat"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),a.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),a.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(m=>m.status==="published").length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),a.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(m=>m.featured).length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Total Plays"}),a.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((m,x)=>m+x.plays,0)})]})]}),a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Beat"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Genre"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"BPM / Key"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Plays"}),a.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:e?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"Loading beats..."})}):t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No beats yet. Create your first beat!"})}):t.map(m=>a.jsxs("tr",{className:"hover:bg-gray-700/50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:m.artworkUrl,alt:m.title,className:"w-12 h-12 rounded object-cover"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:m.title}),a.jsx("p",{className:"text-sm text-gray-400",children:m.artist})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-sm",children:m.genre})}),a.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[m.bpm," BPM / ",m.key]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-sm ${m.status==="published"?"bg-green-500/20 text-green-400":m.status==="draft"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:m.status})}),a.jsx("td",{className:"px-6 py-4 text-gray-300",children:m.plays}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{onClick:()=>p(m.id),className:"p-2 text-gray-400 hover:text-purple-400 transition-colors",title:"Play preview",children:o===m.id?a.jsx(ME,{size:18}):a.jsx(Vs,{size:18})}),a.jsx("button",{onClick:()=>d(m),className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"Edit",children:a.jsx(N4,{size:18})}),a.jsx("button",{onClick:()=>h(m.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Delete",children:a.jsx(FE,{size:18})})]})})]},m.id))})]})})})]}),n&&a.jsx(eD,{beat:s,onClose:()=>r(!1),onSave:()=>{r(!1),i(null)}})]})},eD=({beat:t,onClose:e,onSave:n})=>{var h,p,m,x,N,C,j;const[r,s]=S.useState({title:(t==null?void 0:t.title)||"",artist:(t==null?void 0:t.artist)||"Jonna Rincon",bpm:(t==null?void 0:t.bpm)||120,key:(t==null?void 0:t.key)||"",genre:(t==null?void 0:t.genre)||"",tags:((h=t==null?void 0:t.tags)==null?void 0:h.join(", "))||"",audioUrl:(t==null?void 0:t.audioUrl)||"",artworkUrl:(t==null?void 0:t.artworkUrl)||"",slug:(t==null?void 0:t.slug)||"",status:(t==null?void 0:t.status)||"draft",featured:(t==null?void 0:t.featured)||!1,basicPrice:((m=(p=t==null?void 0:t.licenses)==null?void 0:p.basic)==null?void 0:m.price)||29,premiumPrice:((N=(x=t==null?void 0:t.licenses)==null?void 0:x.premium)==null?void 0:N.price)||49,exclusivePrice:((j=(C=t==null?void 0:t.licenses)==null?void 0:C.exclusive)==null?void 0:j.price)||199}),[i,o]=S.useState(!1),[u,l]=S.useState(!1),d=async w=>{w.preventDefault(),l(!0);try{const _={title:r.title,artist:r.artist,bpm:r.bpm,key:r.key,genre:r.genre,tags:r.tags.split(",").map(y=>y.trim()),audioUrl:r.audioUrl,artworkUrl:r.artworkUrl,slug:r.slug||r.title.toLowerCase().replace(/\s+/g,"-"),status:r.status,featured:r.featured,trending:!1,licenses:{basic:{type:"basic",price:r.basicPrice,features:["MP3 Download","Non-exclusive rights","Personal use"],downloads:1,streams:1e4,videos:1,distribution:!1},premium:{type:"premium",price:r.premiumPrice,features:["WAV + MP3","Non-exclusive rights","Commercial use","Unlimited streams"],downloads:5,streams:1e6,videos:5,distribution:!0},exclusive:{type:"exclusive",price:r.exclusivePrice,features:["All files","Exclusive rights","Full ownership","Unlimited use"],downloads:-1,streams:-1,videos:-1,distribution:!0}}};t?(await Xr.updateBeat(t.id,_),alert("Beat updated successfully")):(await Xr.createBeat(_),alert("Beat created successfully")),n()}catch(_){alert(_.message)}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full my-8",children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Beat":"Add New Beat"})}),a.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:r.title,onChange:w=>s({...r,title:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist"}),a.jsx("input",{type:"text",value:r.artist,onChange:w=>s({...r,artist:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BPM"}),a.jsx("input",{type:"number",value:r.bpm,onChange:w=>s({...r,bpm:parseInt(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),a.jsx("input",{type:"text",value:r.key,onChange:w=>s({...r,key:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),a.jsx("input",{type:"text",value:r.genre,onChange:w=>s({...r,genre:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:r.status,onChange:w=>s({...r,status:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"}),a.jsx("option",{value:"archived",children:"Archived"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),a.jsx("input",{type:"text",value:r.tags,onChange:w=>s({...r,tags:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"trap, dark, atmospheric"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slug"}),a.jsx("input",{type:"text",value:r.slug,onChange:w=>s({...r,slug:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"auto-generated from title"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Basic Price ()"}),a.jsx("input",{type:"number",value:r.basicPrice,onChange:w=>s({...r,basicPrice:parseFloat(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Premium Price ()"}),a.jsx("input",{type:"number",value:r.premiumPrice,onChange:w=>s({...r,premiumPrice:parseFloat(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Exclusive Price ()"}),a.jsx("input",{type:"number",value:r.exclusivePrice,onChange:w=>s({...r,exclusivePrice:parseFloat(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:r.featured,onChange:w=>s({...r,featured:w.target.checked}),className:"w-4 h-4"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Featured Beat"})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u||i,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:u?"Saving...":t?"Update Beat":"Create Beat"})]})]})]})})},tD=()=>{const{orders:t,loading:e}=G4(),[n,r]=S.useState("all"),s=n==="all"?t:t.filter(u=>u.status===n),i=async(u,l)=>{try{await or.updateOrderStatus(u,l),alert("Order status updated")}catch(d){alert(d.message)}},o=u=>({pending:"bg-yellow-500/20 text-yellow-400",processing:"bg-blue-500/20 text-blue-400",completed:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",refunded:"bg-gray-500/20 text-gray-400",cancelled:"bg-gray-500/20 text-gray-400"})[u];return a.jsx(el,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Orders Management"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Manage and process customer orders"})]})}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("select",{value:n,onChange:u=>r(u.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:[a.jsx("option",{value:"all",children:"All Orders"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"refunded",children:"Refunded"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Total Orders"}),a.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(u=>u.status==="pending").length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(u=>u.status==="completed").length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((u,l)=>l.status==="completed"?u+l.total:u,0).toFixed(2)]})]})]}),a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Order Number"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Customer"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Items"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Total"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Date"}),a.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:e?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Loading orders..."})}):s.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"No orders found"})}):s.map(u=>a.jsxs("tr",{className:"hover:bg-gray-700/50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("p",{className:"font-medium text-white",children:u.orderNumber})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-white",children:u.customerName||"Guest"}),a.jsx("p",{className:"text-sm text-gray-400",children:u.customerEmail})]})}),a.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[u.items.length," item(s)"]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("p",{className:"font-semibold text-white",children:["",u.total.toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("select",{value:u.status,onChange:l=>i(u.id,l.target.value),className:`px-2 py-1 rounded text-sm ${o(u.status)} bg-transparent border-0`,children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"refunded",children:"Refunded"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),a.jsx("td",{className:"px-6 py-4 text-gray-300 text-sm",children:u.createdAt&&new Date(u.createdAt.seconds*1e3).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center justify-end space-x-2",children:a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"View details",children:a.jsx(m4,{size:18})})})})]},u.id))})]})})})]})})},nD=()=>{const{collaborations:t,loading:e}=Q4(),n=r=>({inquiry:"bg-gray-500/20 text-gray-400",negotiating:"bg-yellow-500/20 text-yellow-400",agreed:"bg-blue-500/20 text-blue-400",contract_sent:"bg-purple-500/20 text-purple-400",signed:"bg-green-500/20 text-green-400",in_progress:"bg-cyan-500/20 text-cyan-400",completed:"bg-green-600/20 text-green-500",cancelled:"bg-red-500/20 text-red-400"})[r];return a.jsx(el,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaborations & Contracts"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Manage partnerships and deals"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),a.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:t.filter(r=>["agreed","contract_sent","signed","in_progress"].includes(r.status)).length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(r=>r.status==="completed").length})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((r,s)=>r+s.paidAmount,0).toFixed(2)]})]})]}),a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Title"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Client"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Type"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Budget"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Payment"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:e?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"Loading..."})}):t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No collaborations yet"})}):t.map(r=>a.jsxs("tr",{className:"hover:bg-gray-700/50",children:[a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"font-medium text-white",children:r.title}),a.jsx("p",{className:"text-sm text-gray-400",children:r.type})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"text-white",children:r.clientName}),a.jsx("p",{className:"text-sm text-gray-400",children:r.clientEmail})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-sm",children:r.type})}),a.jsx("td",{className:"px-6 py-4 text-white",children:r.budget?`${r.budget.toFixed(2)}`:"N/A"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-sm ${n(r.status)}`,children:r.status.replace("_"," ")})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsxs("p",{className:"text-white",children:["",r.paidAmount.toFixed(2)]}),a.jsx("p",{className:`text-sm ${r.paymentStatus==="paid"?"text-green-400":r.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:r.paymentStatus})]})})]},r.id))})]})})})]})})},rD=()=>{const[t,e]=S.useState("shop"),[n,r]=S.useState(!0),[s,i]=S.useState({storeName:"",storeDescription:"",heroTitle:"",heroSubtitle:"",featuredEnabled:!0,trendingEnabled:!0,genres:[],currency:"EUR",taxRate:21,enableDownloads:!0,watermarkPreviews:!0}),[o,u]=S.useState({platformName:"",supportEmail:"",websiteUrl:"",timezone:"Europe/Amsterdam",language:"en"}),[l,d]=S.useState({emailOrderNotifications:!0,emailCollaborationNotifications:!0,emailAnalyticsReports:!1,emailSecurityAlerts:!0,emailNewFeatures:!1,pushNotifications:!0}),[h,p]=S.useState({twoFactorEnabled:!1,passwordMinLength:12,sessionTimeout:30,enableAutoBackup:!0,backupFrequency:"daily"}),[m,x]=S.useState(null);S.useEffect(()=>{(async()=>{try{r(!0);const[D,M,F,E]=await Promise.all([xr.getShopSettings(),xr.getGeneralSettings(),xr.getNotificationSettings(),xr.getSecuritySettings()]);D&&i(D),M&&u(M),F&&d(F),E&&p(E)}catch(D){console.error("Failed to load settings:",D)}finally{r(!1)}})()},[]);const N=async()=>{try{await xr.saveShopSettings(s),x({type:"success",text:"Shop settings saved successfully!"}),setTimeout(()=>x(null),3e3)}catch(y){console.error("Failed to save shop settings:",y),x({type:"error",text:"Failed to save settings. Please try again."})}},C=async()=>{try{await xr.saveGeneralSettings(o),x({type:"success",text:"General settings saved successfully!"}),setTimeout(()=>x(null),3e3)}catch(y){console.error("Failed to save general settings:",y),x({type:"error",text:"Failed to save settings. Please try again."})}},j=async()=>{try{await xr.saveNotificationSettings(l),x({type:"success",text:"Notification settings saved successfully!"}),setTimeout(()=>x(null),3e3)}catch(y){console.error("Failed to save notification settings:",y),x({type:"error",text:"Failed to save settings. Please try again."})}},w=async()=>{try{await xr.saveSecuritySettings(h),x({type:"success",text:"Security settings saved successfully!"}),setTimeout(()=>x(null),3e3)}catch(y){console.error("Failed to save security settings:",y),x({type:"error",text:"Failed to save settings. Please try again."})}},_=[{id:"shop",name:"Shop Settings",icon:Rx},{id:"general",name:"General",icon:kx},{id:"notifications",name:"Notifications",icon:Sx},{id:"security",name:"Security",icon:jx}];return a.jsx(el,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Settings"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your platform configuration and preferences"})]}),n&&a.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:a.jsx("p",{className:"text-blue-300",children:"Loading settings..."})}),a.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:a.jsx("div",{className:"flex gap-2 overflow-x-auto",children:_.map(y=>{const D=y.icon;return a.jsxs("button",{onClick:()=>e(y.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition ${t===y.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[a.jsx(D,{size:18}),a.jsx("span",{className:"font-medium",children:y.name})]},y.id)})})}),m&&a.jsx("div",{className:`p-4 rounded-lg border ${m.type==="success"?"bg-green-900/20 border-green-700 text-green-400":"bg-red-900/20 border-red-700 text-red-400"}`,children:m.text}),t==="shop"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Rx,{size:24,className:"text-purple-400"}),"Store Information"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Store Name"}),a.jsx("input",{type:"text",value:s.storeName,onChange:y=>i({...s,storeName:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Store Description"}),a.jsx("textarea",{value:s.storeDescription,onChange:y=>i({...s,storeDescription:y.target.value}),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hero Title"}),a.jsx("input",{type:"text",value:s.heroTitle,onChange:y=>i({...s,heroTitle:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hero Subtitle"}),a.jsx("input",{type:"text",value:s.heroSubtitle,onChange:y=>i({...s,heroSubtitle:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Shop Features"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Featured Beats"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Show featured badge on selected beats"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.featuredEnabled,onChange:y=>i({...s,featuredEnabled:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Trending Beats"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Show trending badge on popular beats"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.trendingEnabled,onChange:y=>i({...s,trendingEnabled:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Enable Downloads"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Allow customers to download purchased beats"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.enableDownloads,onChange:y=>i({...s,enableDownloads:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Watermark Previews"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Add watermark to preview audio files"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.watermarkPreviews,onChange:y=>i({...s,watermarkPreviews:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Payment Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),a.jsxs("select",{value:s.currency,onChange:y=>i({...s,currency:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",children:[a.jsx("option",{value:"EUR",children:"EUR ()"}),a.jsx("option",{value:"USD",children:"USD ($)"}),a.jsx("option",{value:"GBP",children:"GBP ()"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",value:s.taxRate,onChange:y=>i({...s,taxRate:parseFloat(y.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:N,className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[a.jsx(pi,{size:20}),"Save Shop Settings"]})})]}),t==="general"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(kx,{size:24,className:"text-blue-400"}),"General Settings"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform Name"}),a.jsx("input",{type:"text",value:o.platformName,onChange:y=>u({...o,platformName:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Support Email"}),a.jsx("input",{type:"email",value:o.supportEmail,onChange:y=>u({...o,supportEmail:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Website URL"}),a.jsx("input",{type:"url",value:o.websiteUrl,onChange:y=>u({...o,websiteUrl:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Timezone"}),a.jsxs("select",{value:o.timezone,onChange:y=>u({...o,timezone:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[a.jsx("option",{value:"Europe/Amsterdam",children:"Europe/Amsterdam"}),a.jsx("option",{value:"Europe/London",children:"Europe/London"}),a.jsx("option",{value:"Europe/Paris",children:"Europe/Paris"}),a.jsx("option",{value:"America/New_York",children:"America/New_York"}),a.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles"}),a.jsx("option",{value:"Asia/Tokyo",children:"Asia/Tokyo"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Language"}),a.jsxs("select",{value:o.language,onChange:y=>u({...o,language:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"nl",children:"Dutch"}),a.jsx("option",{value:"de",children:"German"}),a.jsx("option",{value:"fr",children:"French"}),a.jsx("option",{value:"es",children:"Spanish"})]})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[a.jsx(pi,{size:20}),"Save General Settings"]})})]}),t==="notifications"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Sx,{size:24,className:"text-yellow-400"}),"Notification Settings"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Email on New Orders"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Get notified when customers place orders"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.emailOrderNotifications,onChange:y=>d({...l,emailOrderNotifications:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Email on Collaborations"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Get notified about collaboration requests"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.emailCollaborationNotifications,onChange:y=>d({...l,emailCollaborationNotifications:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Email Analytics Reports"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Receive weekly analytics reports"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.emailAnalyticsReports,onChange:y=>d({...l,emailAnalyticsReports:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Email Security Alerts"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Important security notifications"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.emailSecurityAlerts,onChange:y=>d({...l,emailSecurityAlerts:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Email New Features"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Learn about new features and updates"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.emailNewFeatures,onChange:y=>d({...l,emailNewFeatures:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Push Notifications"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Receive browser push notifications"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.pushNotifications,onChange:y=>d({...l,pushNotifications:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:j,className:"flex items-center gap-2 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[a.jsx(pi,{size:20}),"Save Notification Settings"]})})]}),t==="security"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(jx,{size:24,className:"text-red-400"}),"Security Settings"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Require 2FA for admin accounts"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:h.twoFactorEnabled,onChange:y=>p({...h,twoFactorEnabled:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Password Length"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"8",max:"20",value:h.passwordMinLength,onChange:y=>p({...h,passwordMinLength:parseInt(y.target.value)}),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),a.jsx("span",{className:"text-white font-medium w-12 text-center",children:h.passwordMinLength})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout (minutes)"}),a.jsx("input",{type:"number",min:"5",max:"480",value:h.sessionTimeout,onChange:y=>p({...h,sessionTimeout:parseInt(y.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Users will be logged out after this period of inactivity"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:"Enable Auto Backup"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Automatically backup database daily"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:h.enableAutoBackup,onChange:y=>p({...h,enableAutoBackup:y.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Backup Frequency"}),a.jsxs("select",{value:h.backupFrequency,onChange:y=>p({...h,backupFrequency:y.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500",children:[a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"})]})]})]})]}),a.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:a.jsxs("p",{className:"text-sm text-blue-300",children:[" ",a.jsx("strong",{children:"Tip:"})," Strong security settings protect your platform and user data. We recommend enabling 2FA and auto-backups."]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:w,className:"flex items-center gap-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[a.jsx(pi,{size:20}),"Save Security Settings"]})})]})]})})},sD=()=>a.jsx(u4,{children:a.jsx(sI,{children:a.jsxs(OS,{children:[a.jsx(De,{path:"/",element:a.jsx(L4,{})}),a.jsx(De,{path:"/login",element:a.jsx(V4,{})}),a.jsx(De,{path:"/register",element:a.jsx(M4,{})}),a.jsx(De,{path:"/shop/beats",element:a.jsx(F4,{})}),a.jsx(De,{path:"/customer/dashboard",element:a.jsx(vt,{children:a.jsx(U4,{})})}),a.jsx(De,{path:"/customer/shop",element:a.jsx(vt,{children:a.jsx($4,{})})}),a.jsx(De,{path:"/customer/orders",element:a.jsx(vt,{children:a.jsx(B4,{})})}),a.jsx(De,{path:"/customer/downloads",element:a.jsx(vt,{children:a.jsx(z4,{})})}),a.jsx(De,{path:"/customer/profile",element:a.jsx(vt,{children:a.jsx(Px,{})})}),a.jsx(De,{path:"/artist/dashboard",element:a.jsx(vt,{children:a.jsx(q4,{})})}),a.jsx(De,{path:"/artist/collaborations",element:a.jsx(vt,{children:a.jsx(H4,{})})}),a.jsx(De,{path:"/artist/beats",element:a.jsx(vt,{children:a.jsx(W4,{})})}),a.jsx(De,{path:"/artist/profile",element:a.jsx(vt,{children:a.jsx(Px,{})})}),a.jsx(De,{path:"/admin/dashboard",element:a.jsx(vt,{requireAdmin:!0,children:a.jsx(J4,{})})}),a.jsx(De,{path:"/admin/beats",element:a.jsx(vt,{requireAdmin:!0,children:a.jsx(Z4,{})})}),a.jsx(De,{path:"/admin/orders",element:a.jsx(vt,{requireAdmin:!0,children:a.jsx(tD,{})})}),a.jsx(De,{path:"/admin/collaborations",element:a.jsx(vt,{requireAdmin:!0,children:a.jsx(nD,{})})}),a.jsx(De,{path:"/admin/settings",element:a.jsx(vt,{requireAdmin:!0,children:a.jsx(rD,{})})}),a.jsx(De,{path:"/admin",element:a.jsx(Dc,{to:"/admin/dashboard",replace:!0})}),a.jsx(De,{path:"*",element:a.jsx(Dc,{to:"/",replace:!0})})]})})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("Service Worker registered successfully:",t.scope)}).catch(t=>{console.log("Service Worker registration failed:",t)})});Ww(document.getElementById("root")).render(a.jsx(S.StrictMode,{children:a.jsx(sD,{})}));
